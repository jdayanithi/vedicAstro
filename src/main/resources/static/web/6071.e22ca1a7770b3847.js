"use strict";(self.webpackChunkblogWeb=self.webpackChunkblogWeb||[]).push([[6071],{6071:(O,p,e)=>{e.r(p),e.d(p,{ViewPostComponent:()=>S});var m=e(9417),i=e(177),u=e(9492),t=e(4438),f=e(7491),v=e(8498),F=e(5416),l=e(5312),k=e(1626);let C=(()=>{class n{constructor(o){this.http=o}createComment(o,a,s){return this.http.post(`${l.c.apiUrl}/comments/create`,s,{params:{postId:o,postedBy:a}})}getAllCommentsByPost(o){return this.http.post(`${l.c.apiUrl}/comments/get-by-post`,{postId:o})}static{this.\u0275fac=function(a){return new(a||n)(t.KVO(k.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var h=e(6471),P=e(8834),r=e(5596),g=e(6467),b=e(9631),y=e(9213);function B(n,c){if(1&n&&(t.j41(0,"mat-chip"),t.EFF(1),t.k0s()),2&n){const o=c.$implicit;t.R7$(),t.JRh(o)}}function j(n,c){if(1&n&&(t.j41(0,"mat-card",13)(1,"mat-card-header"),t.nrm(2,"div",2),t.j41(3,"mat-card-title"),t.EFF(4),t.k0s(),t.j41(5,"mat-card-subtitle"),t.EFF(6),t.nI1(7,"date"),t.k0s()(),t.j41(8,"mat-card-content"),t.EFF(9),t.k0s()()),2&n){const o=c.$implicit;t.R7$(4),t.JRh(o.postedBy),t.R7$(2),t.JRh(t.i5U(7,3,o.createdAt,"medium")),t.R7$(3),t.SpI(" ",o.content," ")}}function I(n,c){if(1&n){const o=t.RV6();t.j41(0,"div",1)(1,"mat-card")(2,"mat-card-header"),t.nrm(3,"div",2),t.j41(4,"mat-card-title"),t.EFF(5),t.k0s(),t.j41(6,"mat-card-subtitle"),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.nrm(9,"img",3),t.j41(10,"mat-card-content"),t.EFF(11),t.k0s(),t.nrm(12,"br"),t.j41(13,"mat-chip-set"),t.DNE(14,B,2,1,"mat-chip",4),t.k0s(),t.j41(15,"mat-card-actions")(16,"button",5),t.bIt("click",function(){t.eBV(o);const s=t.XpG();return t.Njj(s.likePost())}),t.EFF(17),t.j41(18,"mat-icon"),t.EFF(19,"favorite"),t.k0s()(),t.j41(20,"button",6),t.EFF(21),t.j41(22,"mat-icon"),t.EFF(23,"remove_red_eye"),t.k0s()()()(),t.j41(24,"mat-card",7)(25,"mat-card-content")(26,"h4"),t.EFF(27,"Publish Your Comment"),t.k0s(),t.j41(28,"div")(29,"form",8)(30,"mat-form-field",9)(31,"mat-label"),t.EFF(32,"Content"),t.k0s(),t.nrm(33,"textarea",10),t.k0s(),t.j41(34,"mat-form-field",9)(35,"mat-label"),t.EFF(36,"Posted By"),t.k0s(),t.nrm(37,"input",11),t.k0s(),t.j41(38,"button",12),t.bIt("click",function(){t.eBV(o);const s=t.XpG();return t.Njj(s.publishComment())}),t.EFF(39,"Publish Comment"),t.k0s()()()()(),t.j41(40,"div",13)(41,"h4"),t.EFF(42,"Comments"),t.k0s(),t.DNE(43,j,10,6,"mat-card",14),t.k0s()()}if(2&n){const o=t.XpG();t.R7$(5),t.JRh(o.postData.name),t.R7$(2),t.Lme("Posted by : ",o.postData.postedBy," | Posted On : ",t.i5U(8,11,o.postData.date,"medium"),""),t.R7$(2),t.Y8G("src",o.postData.img,t.B4B),t.R7$(2),t.SpI(" ",o.postData.content," "),t.R7$(3),t.Y8G("ngForOf",o.postData.tags),t.R7$(3),t.SpI("",o.postData.likeCount," "),t.R7$(4),t.SpI("",o.postData.viewCount," "),t.R7$(8),t.Y8G("formGroup",o.commentForm),t.R7$(9),t.Y8G("disabled",!o.commentForm.valid),t.R7$(5),t.Y8G("ngForOf",o.comments)}}let S=(()=>{class n{constructor(o,a,s,d,R){this.postService=o,this.activatedRoute=a,this.matSnackBar=s,this.fb=d,this.commentService=R,this.postId=this.activatedRoute.snapshot.params.id}ngOnInit(){console.log(this.postId),this.getPostById(),this.commentForm=this.fb.group({postedBy:[null,m.k0.required],content:[null,m.k0.required]})}publishComment(){const o=this.commentForm.get("postedBy")?.value,a=this.commentForm.get("content")?.value;this.commentService.createComment(this.postId,o,a).subscribe(s=>{this.matSnackBar.open("Comment Published Successfully","Ok"),this.getCommentsByPost()},s=>{this.matSnackBar.open("Something Went Wrong!!!!","Ok")})}getCommentsByPost(){this.commentService.getAllCommentsByPost(this.postId).subscribe(o=>{this.comments=o},o=>{this.matSnackBar.open("Something Went Wrong!!!!","Ok")})}getPostById(){this.postService.getPostById(this.postId).subscribe(o=>{this.postData=o,console.log(o),this.getCommentsByPost()},o=>{this.matSnackBar.open("Something Went Wrong!!!!","Ok")})}likePost(){this.postService.likePost(this.postId).subscribe(o=>{this.matSnackBar.open("Post Liked Successfully","Ok"),this.getPostById()},o=>{this.matSnackBar.open("Something Went Wrong!!!!","Ok")})}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(f.K),t.rXU(v.nX),t.rXU(F.UG),t.rXU(m.ok),t.rXU(C))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-view-post"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[["class","card-container",4,"ngIf"],[1,"card-container"],["mat-card-avatar","",1,"example-header-image"],["mat-card-image","","height","300px","alt","Card Image",1,"img",3,"src"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",2,"margin-left","5px"],[1,"comment-card"],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","content"],["matInput","","formControlName","postedBy"],["mat-raised-button","","color","primary",2,"float","right",3,"click","disabled"],[2,"margin-top","10px"],["style","margin-top: 10px;",4,"ngFor","ngForOf"]],template:function(a,s){1&a&&t.DNE(0,I,44,14,"div",0),2&a&&t.Y8G("ngIf",s.postData)},dependencies:[i.MD,i.Sq,i.bT,i.vh,m.X1,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,u.e,h.Jl,h.Jo,P.$z,r.RN,r.YY,r.QG,r.m2,r.MM,r.kF,r.Lc,r.dh,g.rl,g.nJ,b.fg,y.An],styles:[".card-container[_ngcontent-%COMP%]{margin:16px;max-width:60%;padding-bottom:30px}mat-card[_ngcontent-%COMP%]{padding:10px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}mat-card-content[_ngcontent-%COMP%]{margin-top:10px}mat-card-footer[_ngcontent-%COMP%]{margin-left:20px}.img[_ngcontent-%COMP%]{object-fit:cover}.comment-card[_ngcontent-%COMP%]{margin-top:20px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return n})()}}]);