"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[496],{7496:(te,_,s)=>{s.r(_),s.d(_,{AUTH_ROUTES:()=>re});var p=s(177),a=s(9417),c=s(4710),l=s(5596),u=s(2102),h=s(9631),d=s(8834),F=s(9213),k=s(9183),b=s(5416),e=s(4438),C=s(4796);function S(t,o){if(1&t&&(e.j41(0,"div",12)(1,"mat-icon",13),e.EFF(2,"error"),e.k0s(),e.j41(3,"span",14),e.EFF(4),e.k0s()()),2&t){const m=e.XpG();e.R7$(4),e.JRh(m.errorMessage)}}function x(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Email is required"),e.k0s())}function D(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Please enter a valid email"),e.k0s())}function M(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Password is required"),e.k0s())}function Y(t,o){1&t&&e.nrm(0,"mat-spinner",15)}let B=(()=>{class t{fb;router;authService;snackBar;loginForm;hidePassword=!0;isLoading=!1;errorMessage="";constructor(m,i,r,n){this.fb=m,this.router=i,this.authService=r,this.snackBar=n,this.loginForm=this.fb.group({email:["",[a.k0.required,a.k0.email]],password:["",[a.k0.required]]})}onSubmit(){if(this.loginForm.valid){this.isLoading=!0,this.errorMessage="";const{email:m,password:i}=this.loginForm.value;this.authService.login(m,i).subscribe({next:()=>{this.isLoading=!1,this.snackBar.open("Login successful!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/dashboard"])},error:r=>{this.isLoading=!1,console.error("Login failed:",r);let n="Login failed. Please try again.";r.error?"string"==typeof r.error?n=r.error:r.error.message?n=r.error.message:r.error.error&&(n=r.error.error):r.message&&(n=r.message),n.toLowerCase().includes("invalid username or password")||n.toLowerCase().includes("authentication failed")||401===r.status?n="Invalid email or password. Please check your credentials and try again.":0===r.status?n="Unable to connect to the server. Please check your internet connection.":r.status>=500&&(n="Server error. Please try again later."),this.errorMessage=n,this.snackBar.open(n,"Close",{duration:5e3,panelClass:["error-snackbar"]})}})}}static \u0275fac=function(i){return new(i||t)(e.rXU(a.ok),e.rXU(c.Ix),e.rXU(C.u),e.rXU(b.UG))};static \u0275cmp=e.VBU({type:t,selectors:[["app-login"]],standalone:!0,features:[e.aNF],decls:28,vars:10,consts:[[1,"container","flex","justify-center","align-center",2,"min-height","100vh"],[1,"p-20",2,"max-width","400px","width","100%"],["class","error-container",4,"ngIf"],[1,"flex","flex-column","gap-20",3,"ngSubmit","formGroup"],["matInput","","type","email","formControlName","email","placeholder","Enter your email"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],[1,"text-center"],["mat-button","","routerLink","/register"],[1,"error-container"],["color","warn"],[1,"error-text"],["diameter","20"]],template:function(i,r){if(1&i&&(e.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4,"Login"),e.k0s()(),e.j41(5,"mat-card-content"),e.DNE(6,S,5,1,"div",2),e.j41(7,"form",3),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(8,"mat-form-field")(9,"mat-label"),e.EFF(10,"Email"),e.k0s(),e.nrm(11,"input",4),e.DNE(12,x,2,0,"mat-error",5)(13,D,2,0,"mat-error",5),e.k0s(),e.j41(14,"mat-form-field")(15,"mat-label"),e.EFF(16,"Password"),e.k0s(),e.nrm(17,"input",6),e.j41(18,"button",7),e.bIt("click",function(){return r.hidePassword=!r.hidePassword}),e.j41(19,"mat-icon"),e.EFF(20),e.k0s()(),e.DNE(21,M,2,0,"mat-error",5),e.k0s(),e.j41(22,"button",8),e.DNE(23,Y,1,0,"mat-spinner",9),e.EFF(24),e.k0s(),e.j41(25,"div",10)(26,"a",11),e.EFF(27,"Need to register?"),e.k0s()()()()()()),2&i){let n,f,g;e.R7$(6),e.Y8G("ngIf",r.errorMessage),e.R7$(),e.Y8G("formGroup",r.loginForm),e.R7$(5),e.Y8G("ngIf",null==(n=r.loginForm.get("email"))?null:n.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(f=r.loginForm.get("email"))?null:f.hasError("email")),e.R7$(4),e.Y8G("type",r.hidePassword?"password":"text"),e.R7$(3),e.JRh(r.hidePassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",null==(g=r.loginForm.get("password"))?null:g.hasError("required")),e.R7$(),e.Y8G("disabled",r.loginForm.invalid||r.isLoading),e.R7$(),e.Y8G("ngIf",r.isLoading),e.R7$(),e.SpI(" ",r.isLoading?"Signing in...":"Login"," ")}},dependencies:[p.MD,p.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,c.Wk,l.Hu,l.RN,l.m2,l.MM,l.dh,u.RG,u.rl,u.nJ,u.TL,u.yw,h.fS,h.fg,d.Hl,d.It,d.$z,d.iY,F.m_,F.An,k.D6,k.LG,b._T],styles:["[_nghost-%COMP%]{display:block;height:100%}.error-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background-color:#ffebee;border:1px solid #f44336;border-radius:4px;padding:12px;margin-bottom:20px}.error-text[_ngcontent-%COMP%]{color:#d32f2f;font-size:14px}.flex[_ngcontent-%COMP%]{display:flex}.flex-column[_ngcontent-%COMP%]{flex-direction:column}.gap-20[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:20px}.text-center[_ngcontent-%COMP%]{text-align:center}"]})}return t})();var E=s(5084),R=s(6600),v=s(2798);function U(t,o){if(1&t&&(e.j41(0,"div",27)(1,"mat-icon",28),e.EFF(2,"error"),e.k0s(),e.j41(3,"span",29),e.EFF(4),e.k0s()()),2&t){const m=e.XpG();e.R7$(4),e.JRh(m.errorMessage)}}function q(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"First name is required"),e.k0s())}function O(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Last name is required"),e.k0s())}function X(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Email is required"),e.k0s())}function J(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Please enter a valid email"),e.k0s())}function V(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Password is required"),e.k0s())}function A(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Password must be at least 6 characters"),e.k0s())}function H(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Phone number is required"),e.k0s())}function z(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Please enter a valid phone number"),e.k0s())}function W(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Birth date is required"),e.k0s())}function Z(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Birth time is required"),e.k0s())}function K(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Birth place is required"),e.k0s())}function Q(t,o){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"User type is required"),e.k0s())}function ee(t,o){1&t&&e.nrm(0,"mat-spinner",30)}const re=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:B},{path:"register",component:(()=>{class t{fb;router;authService;snackBar;registerForm;hidePassword=!0;isLoading=!1;errorMessage="";constructor(m,i,r,n){this.fb=m,this.router=i,this.authService=r,this.snackBar=n,this.registerForm=this.fb.group({firstName:["",a.k0.required],lastName:["",a.k0.required],email:["",[a.k0.required,a.k0.email]],password:["",[a.k0.required,a.k0.minLength(6)]],phoneNumber:["",[a.k0.required,a.k0.pattern("^[0-9]{10}$")]],birthDate:["",a.k0.required],birthTime:["",a.k0.required],birthPlace:["",a.k0.required],bio:[""],userType:["student",a.k0.required]})}onSubmit(){if(this.registerForm.valid){this.isLoading=!0,this.errorMessage="";const m=this.registerForm.value;m.birthDate=m.birthDate.toISOString().split("T")[0],this.authService.register(m).subscribe({next:()=>{this.isLoading=!1,this.snackBar.open("Registration successful! Please login.","Close",{duration:5e3,panelClass:["success-snackbar"]}),this.router.navigate(["/login"])},error:i=>{this.isLoading=!1,console.error("Registration failed:",i);let r="Registration failed. Please try again.";i.error?"string"==typeof i.error?r=i.error:i.error.message?r=i.error.message:i.error.error&&(r=i.error.error):i.message&&(r=i.message),r.toLowerCase().includes("username already exists")||r.toLowerCase().includes("user already exists")?r="An account with this email already exists. Please use a different email or try logging in.":r.toLowerCase().includes("email")?r="Please provide a valid email address.":400===i.status?r="Invalid registration data. Please check all fields and try again.":0===i.status?r="Unable to connect to the server. Please check your internet connection.":i.status>=500&&(r="Server error. Please try again later."),this.errorMessage=r,this.snackBar.open(r,"Close",{duration:5e3,panelClass:["error-snackbar"]})}})}}static \u0275fac=function(i){return new(i||t)(e.rXU(a.ok),e.rXU(c.Ix),e.rXU(C.u),e.rXU(b.UG))};static \u0275cmp=e.VBU({type:t,selectors:[["app-register"]],standalone:!0,features:[e.aNF],decls:79,vars:21,consts:[["picker",""],[1,"container","flex","justify-center","align-center",2,"min-height","100vh"],[1,"p-20",2,"max-width","600px","width","100%"],["class","error-container",4,"ngIf"],[1,"flex","flex-column","gap-20",3,"ngSubmit","formGroup"],[1,"flex","gap-20"],[1,"flex-1"],["matInput","","formControlName","firstName"],[4,"ngIf"],["matInput","","formControlName","lastName"],["matInput","","type","email","formControlName","email"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","type","tel","formControlName","phoneNumber"],["matInput","","formControlName","birthDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","type","time","formControlName","birthTime"],["matInput","","formControlName","birthPlace"],["matInput","","rows","3","formControlName","bio"],["formControlName","userType"],["value","student"],["value","instructor"],["value","admin"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],[1,"text-center"],["mat-button","","routerLink","/login"],[1,"error-container"],["color","warn"],[1,"error-text"],["diameter","20"]],template:function(i,r){if(1&i){const n=e.RV6();e.j41(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4,"Register"),e.k0s()(),e.j41(5,"mat-card-content"),e.DNE(6,U,5,1,"div",3),e.j41(7,"form",4),e.bIt("ngSubmit",function(){return e.eBV(n),e.Njj(r.onSubmit())}),e.j41(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),e.EFF(11,"First Name"),e.k0s(),e.nrm(12,"input",7),e.DNE(13,q,2,0,"mat-error",8),e.k0s(),e.j41(14,"mat-form-field",6)(15,"mat-label"),e.EFF(16,"Last Name"),e.k0s(),e.nrm(17,"input",9),e.DNE(18,O,2,0,"mat-error",8),e.k0s()(),e.j41(19,"mat-form-field")(20,"mat-label"),e.EFF(21,"Email"),e.k0s(),e.nrm(22,"input",10),e.DNE(23,X,2,0,"mat-error",8)(24,J,2,0,"mat-error",8),e.k0s(),e.j41(25,"mat-form-field")(26,"mat-label"),e.EFF(27,"Password"),e.k0s(),e.nrm(28,"input",11),e.j41(29,"button",12),e.bIt("click",function(){return e.eBV(n),e.Njj(r.hidePassword=!r.hidePassword)}),e.j41(30,"mat-icon"),e.EFF(31),e.k0s()(),e.DNE(32,V,2,0,"mat-error",8)(33,A,2,0,"mat-error",8),e.k0s(),e.j41(34,"mat-form-field")(35,"mat-label"),e.EFF(36,"Phone Number"),e.k0s(),e.nrm(37,"input",13),e.DNE(38,H,2,0,"mat-error",8)(39,z,2,0,"mat-error",8),e.k0s(),e.j41(40,"mat-form-field")(41,"mat-label"),e.EFF(42,"Birth Date"),e.k0s(),e.nrm(43,"input",14)(44,"mat-datepicker-toggle",15)(45,"mat-datepicker",null,0),e.DNE(47,W,2,0,"mat-error",8),e.k0s(),e.j41(48,"mat-form-field")(49,"mat-label"),e.EFF(50,"Birth Time"),e.k0s(),e.nrm(51,"input",16),e.DNE(52,Z,2,0,"mat-error",8),e.k0s(),e.j41(53,"mat-form-field")(54,"mat-label"),e.EFF(55,"Birth Place"),e.k0s(),e.nrm(56,"input",17),e.DNE(57,K,2,0,"mat-error",8),e.k0s(),e.j41(58,"mat-form-field")(59,"mat-label"),e.EFF(60,"Bio"),e.k0s(),e.nrm(61,"textarea",18),e.k0s(),e.j41(62,"mat-form-field")(63,"mat-label"),e.EFF(64,"User Type"),e.k0s(),e.j41(65,"mat-select",19)(66,"mat-option",20),e.EFF(67,"Student"),e.k0s(),e.j41(68,"mat-option",21),e.EFF(69,"Instructor"),e.k0s(),e.j41(70,"mat-option",22),e.EFF(71,"Admin"),e.k0s()(),e.DNE(72,Q,2,0,"mat-error",8),e.k0s(),e.j41(73,"button",23),e.DNE(74,ee,1,0,"mat-spinner",24),e.EFF(75),e.k0s(),e.j41(76,"div",25)(77,"a",26),e.EFF(78,"Already have an account?"),e.k0s()()()()()()}if(2&i){let n,f,g,j,y,I,T,N,P,L,G,$;const w=e.sdS(46);e.R7$(6),e.Y8G("ngIf",r.errorMessage),e.R7$(),e.Y8G("formGroup",r.registerForm),e.R7$(6),e.Y8G("ngIf",null==(n=r.registerForm.get("firstName"))?null:n.hasError("required")),e.R7$(5),e.Y8G("ngIf",null==(f=r.registerForm.get("lastName"))?null:f.hasError("required")),e.R7$(5),e.Y8G("ngIf",null==(g=r.registerForm.get("email"))?null:g.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(j=r.registerForm.get("email"))?null:j.hasError("email")),e.R7$(4),e.Y8G("type",r.hidePassword?"password":"text"),e.R7$(3),e.JRh(r.hidePassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",null==(y=r.registerForm.get("password"))?null:y.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(I=r.registerForm.get("password"))?null:I.hasError("minlength")),e.R7$(5),e.Y8G("ngIf",null==(T=r.registerForm.get("phoneNumber"))?null:T.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(N=r.registerForm.get("phoneNumber"))?null:N.hasError("pattern")),e.R7$(4),e.Y8G("matDatepicker",w),e.R7$(),e.Y8G("for",w),e.R7$(3),e.Y8G("ngIf",null==(P=r.registerForm.get("birthDate"))?null:P.hasError("required")),e.R7$(5),e.Y8G("ngIf",null==(L=r.registerForm.get("birthTime"))?null:L.hasError("required")),e.R7$(5),e.Y8G("ngIf",null==(G=r.registerForm.get("birthPlace"))?null:G.hasError("required")),e.R7$(15),e.Y8G("ngIf",null==($=r.registerForm.get("userType"))?null:$.hasError("required")),e.R7$(),e.Y8G("disabled",r.registerForm.invalid||r.isLoading),e.R7$(),e.Y8G("ngIf",r.isLoading),e.R7$(),e.SpI(" ",r.isLoading?"Creating account...":"Register"," ")}},dependencies:[p.MD,p.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,c.Wk,l.Hu,l.RN,l.m2,l.MM,l.dh,u.RG,u.rl,u.nJ,u.TL,u.yw,h.fS,h.fg,d.Hl,d.It,d.$z,d.iY,F.m_,F.An,E.X6,E.Vh,E.bZ,E.bU,R.WX,v.Ve,v.VO,R.wT,k.D6,k.LG,b._T],styles:["[_nghost-%COMP%]{display:block;height:100%}.flex-1[_ngcontent-%COMP%]{flex:1}"]})}return t})()}]}}]);