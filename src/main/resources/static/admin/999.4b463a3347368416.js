"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[999],{999:(Ae,b,a)=>{a.r(b),a.d(b,{USERS_ROUTES:()=>Ye});var u=a(177),g=a(4710),p=a(9159),m=a(5596),_=a(8834),h=a(9213),f=a(2102),C=a(9631),F=a(5416),x=a(5351),k=a(9183),l=a(9417),U=a(6695),e=a(4438),E=a(5602);const N=()=>[5,10,20],y=n=>["/users",n];function $(n,r){1&n&&(e.j41(0,"div",9),e.nrm(1,"mat-spinner"),e.k0s())}function M(n,r){1&n&&(e.j41(0,"th",26),e.EFF(1,"ID"),e.k0s())}function S(n,r){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.JRh(t.id)}}function G(n,r){1&n&&(e.j41(0,"th",26),e.EFF(1,"Username"),e.k0s())}function O(n,r){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.JRh(t.username)}}function w(n,r){1&n&&(e.j41(0,"th",26),e.EFF(1,"Name"),e.k0s())}function B(n,r){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.Lme("",t.firstName," ",t.lastName,"")}}function L(n,r){1&n&&(e.j41(0,"th",26),e.EFF(1,"Phone"),e.k0s())}function Y(n,r){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.JRh(t.phoneNumber)}}function A(n,r){1&n&&(e.j41(0,"th",26),e.EFF(1,"User Type"),e.k0s())}function X(n,r){if(1&n&&(e.j41(0,"td",27)(1,"span"),e.EFF(2),e.nI1(3,"titlecase"),e.k0s()()),2&n){const t=r.$implicit;e.R7$(),e.ZvI("user-type-badge user-type-",t.userType,""),e.R7$(),e.SpI(" ",e.bMT(3,4,t.userType)," ")}}function V(n,r){1&n&&(e.j41(0,"th",26),e.EFF(1,"Role"),e.k0s())}function z(n,r){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.JRh(t.role)}}function J(n,r){1&n&&(e.j41(0,"th",26),e.EFF(1,"Birth Date"),e.k0s())}function q(n,r){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.birthDate,"shortDate"))}}function H(n,r){1&n&&(e.j41(0,"th",26),e.EFF(1,"Zodiac"),e.k0s())}function Z(n,r){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.JRh(t.zodiacSign)}}function W(n,r){1&n&&(e.j41(0,"th",26),e.EFF(1,"Actions"),e.k0s())}function Q(n,r){if(1&n){const t=e.RV6();e.j41(0,"td",27)(1,"button",28)(2,"mat-icon"),e.EFF(3,"visibility"),e.k0s()(),e.j41(4,"button",29),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.editUser(o.id))}),e.j41(5,"mat-icon"),e.EFF(6,"edit"),e.k0s()(),e.j41(7,"button",30),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.deleteUser(o))}),e.j41(8,"mat-icon"),e.EFF(9,"delete"),e.k0s()()()}if(2&n){const t=r.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(1,y,t.id))}}function K(n,r){1&n&&e.nrm(0,"tr",31)}function ee(n,r){1&n&&e.nrm(0,"tr",32)}function te(n,r){1&n&&(e.j41(0,"div",33)(1,"mat-icon"),e.EFF(2,"person_off"),e.k0s(),e.j41(3,"p"),e.EFF(4,"No users found"),e.k0s()())}function ne(n,r){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"table",10),e.qex(2,11),e.DNE(3,M,2,0,"th",12)(4,S,2,1,"td",13),e.bVm(),e.qex(5,14),e.DNE(6,G,2,0,"th",12)(7,O,2,1,"td",13),e.bVm(),e.qex(8,15),e.DNE(9,w,2,0,"th",12)(10,B,2,2,"td",13),e.bVm(),e.qex(11,16),e.DNE(12,L,2,0,"th",12)(13,Y,2,1,"td",13),e.bVm(),e.qex(14,17),e.DNE(15,A,2,0,"th",12)(16,X,4,6,"td",13),e.bVm(),e.qex(17,18),e.DNE(18,V,2,0,"th",12)(19,z,2,1,"td",13),e.bVm(),e.qex(20,19),e.DNE(21,J,2,0,"th",12)(22,q,3,4,"td",13),e.bVm(),e.qex(23,20),e.DNE(24,H,2,0,"th",12)(25,Z,2,1,"td",13),e.bVm(),e.qex(26,21),e.DNE(27,W,2,0,"th",12)(28,Q,10,3,"td",13),e.bVm(),e.DNE(29,K,1,0,"tr",22)(30,ee,1,0,"tr",23),e.k0s(),e.DNE(31,te,5,0,"div",24),e.j41(32,"mat-paginator",25),e.bIt("page",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onPageChange(o))}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("dataSource",t.pagedUsers),e.R7$(28),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(),e.Y8G("ngIf",0===t.users.length),e.R7$(),e.Y8G("length",t.filteredUsers.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",e.lJ4(8,N))}}let ie=(()=>{class n{userService;router;snackBar;dialog;users=[];filteredUsers=[];filterText="";pageIndex=0;pageSize=10;loading=!1;searchQuery="";displayedColumns=["id","username","name","phoneNumber","userType","role","birthDate","zodiacSign","actions"];constructor(t,i,o,s){this.userService=t,this.router=i,this.snackBar=o,this.dialog=s}ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.userService.getAllUsers().subscribe({next:t=>{this.users=t,this.onFilterChange(),this.loading=!1},error:t=>{console.error("Error loading users:",t);let i="Error loading users";403===t.status?i="Access denied. Only Admin users can view user list.":401===t.status?i="Authentication required. Please log in again.":t.error?.message&&(i=t.error.message),this.snackBar.open(i,"Close",{duration:5e3}),this.loading=!1}})}get pagedUsers(){const t=this.pageIndex*this.pageSize;return this.filteredUsers.slice(t,t+this.pageSize)}onPageChange(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize}onFilterChange(){this.pageIndex=0;const t=this.filterText.trim().toLowerCase();this.filteredUsers=t?this.users.filter(i=>i.firstName&&i.firstName.toLowerCase().includes(t)||i.lastName&&i.lastName.toLowerCase().includes(t)||i.username&&i.username.toLowerCase().includes(t)||i.phoneNumber&&i.phoneNumber.toLowerCase().includes(t)||i.role&&i.role.toLowerCase().includes(t)||i.zodiacSign&&i.zodiacSign.toLowerCase().includes(t)):this.users.slice()}onSearchChange(){this.filterText=this.searchQuery,this.onFilterChange()}editUser(t){this.router.navigate(["/users/edit",t])}deleteUser(t){confirm(`Are you sure you want to delete ${t.firstName} ${t.lastName}?`)&&this.userService.deleteUser(t.id).subscribe({next:()=>{this.snackBar.open("User deleted successfully","Close",{duration:3e3}),this.loadUsers()},error:i=>{console.error("Error deleting user:",i);let o="Error deleting user";403===i.status?o="Access denied. Only Admin users can delete users.":401===i.status?o="Authentication required. Please log in again.":i.error?.message&&(o=i.error.message),this.snackBar.open(o,"Close",{duration:5e3})}})}static \u0275fac=function(i){return new(i||n)(e.rXU(E.D),e.rXU(g.Ix),e.rXU(F.UG),e.rXU(x.bZ))};static \u0275cmp=e.VBU({type:n,selectors:[["app-user-list"]],standalone:!0,features:[e.aNF],decls:22,vars:3,consts:[[1,"container"],[1,"header"],["mat-raised-button","","color","primary","routerLink","/users/add"],[1,"search-container"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name, username, phone, role, zodiac...",3,"ngModelChange","input","ngModel"],["matSuffix",""],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["matColumnDef","name"],["matColumnDef","phoneNumber"],["matColumnDef","userType"],["matColumnDef","role"],["matColumnDef","birthDate"],["matColumnDef","zodiacSign"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data",4,"ngIf"],[3,"page","length","pageSize","pageIndex","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary","matTooltip","View Details",3,"routerLink"],["mat-icon-button","","color","accent","matTooltip","Edit User",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete User",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3,"User Management"),e.k0s(),e.j41(4,"button",2)(5,"mat-icon"),e.EFF(6,"add"),e.k0s(),e.EFF(7," Add User "),e.k0s()(),e.j41(8,"mat-card")(9,"mat-card-header")(10,"mat-card-title"),e.EFF(11,"Users"),e.k0s()(),e.j41(12,"mat-card-content")(13,"div",3)(14,"mat-form-field",4)(15,"mat-label"),e.EFF(16,"Search users"),e.k0s(),e.j41(17,"input",5),e.mxI("ngModelChange",function(c){return e.DH7(o.filterText,c)||(o.filterText=c),c}),e.bIt("input",function(){return o.onFilterChange()}),e.k0s(),e.j41(18,"mat-icon",6),e.EFF(19,"search"),e.k0s()()(),e.DNE(20,$,2,0,"div",7)(21,ne,33,9,"div",8),e.k0s()()()),2&i&&(e.R7$(17),e.R50("ngModel",o.filterText),e.R7$(3),e.Y8G("ngIf",o.loading),e.R7$(),e.Y8G("ngIf",!o.loading))},dependencies:[u.MD,u.bT,u.PV,u.vh,g.Wk,l.YN,l.me,l.BC,l.vS,p.tP,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,m.Hu,m.RN,m.m2,m.MM,m.dh,_.Hl,_.$z,_.iY,h.m_,h.An,f.RG,f.rl,f.nJ,f.yw,C.fS,C.fg,F._T,x.hM,k.D6,k.LG,U.Ou,U.iy],styles:[".container[_ngcontent-%COMP%]{padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.full-width[_ngcontent-%COMP%]{width:100%}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.user-type-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;text-transform:uppercase}.user-type-student[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0}.user-type-instructor[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.user-type-admin[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.mat-mdc-cell[_ngcontent-%COMP%], .mat-mdc-header-cell[_ngcontent-%COMP%]{padding:12px 8px}.mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#0000000a}"]})}return n})();var re=a(1997),j=a(6471);const oe=n=>["/users/edit",n];function se(n,r){if(1&n&&(e.j41(0,"button",8)(1,"mat-icon"),e.EFF(2,"edit"),e.k0s(),e.EFF(3," Edit User "),e.k0s()),2&n){const t=e.XpG();e.Y8G("routerLink",e.eq3(1,oe,t.user.id))}}function ae(n,r){1&n&&(e.j41(0,"div",9),e.nrm(1,"mat-spinner"),e.k0s())}function le(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Birth Date:"),e.k0s(),e.j41(3,"span",15),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(e.i5U(5,1,t.user.birthDate,"fullDate"))}}function de(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Birth Time:"),e.k0s(),e.j41(3,"span",15),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.user.birthTime)}}function me(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Birth Place:"),e.k0s(),e.j41(3,"span",15),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.user.birthPlace)}}function ce(n,r){if(1&n&&(e.j41(0,"mat-card",11)(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3,"Birth Information"),e.k0s()(),e.j41(4,"mat-card-content")(5,"div",12),e.DNE(6,le,6,4,"div",17)(7,de,5,1,"div",17)(8,me,5,1,"div",17),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(6),e.Y8G("ngIf",t.user.birthDate),e.R7$(),e.Y8G("ngIf",t.user.birthTime),e.R7$(),e.Y8G("ngIf",t.user.birthPlace)}}function ue(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Zodiac Sign:"),e.k0s(),e.j41(3,"mat-chip",18),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.user.zodiacSign)}}function pe(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Rising Sign:"),e.k0s(),e.j41(3,"mat-chip",18),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.user.risingSign)}}function fe(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Moon Sign:"),e.k0s(),e.j41(3,"mat-chip",18),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.user.moonSign)}}function _e(n,r){if(1&n&&(e.j41(0,"mat-card",11)(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3,"Astrological Information"),e.k0s()(),e.j41(4,"mat-card-content")(5,"div",12),e.DNE(6,ue,5,1,"div",17)(7,pe,5,1,"div",17)(8,fe,5,1,"div",17),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(6),e.Y8G("ngIf",t.user.zodiacSign),e.R7$(),e.Y8G("ngIf",t.user.risingSign),e.R7$(),e.Y8G("ngIf",t.user.moonSign)}}function ge(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Profile Picture:"),e.k0s(),e.j41(3,"div",20)(4,"img",21),e.bIt("error",function(o){e.eBV(t);const s=e.XpG(3);return e.Njj(s.onImageError(o))}),e.k0s()()()}if(2&n){const t=e.XpG(3);e.R7$(4),e.Y8G("src",t.user.profilePicture,e.B4B)("alt",t.user.firstName+" "+t.user.lastName)}}function he(n,r){if(1&n&&(e.j41(0,"div",22)(1,"span",14),e.EFF(2,"Bio:"),e.k0s(),e.j41(3,"p",23),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.user.bio)}}function Fe(n,r){if(1&n&&(e.j41(0,"mat-card",11)(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3,"Additional Information"),e.k0s()(),e.j41(4,"mat-card-content"),e.DNE(5,ge,5,2,"div",17)(6,he,5,1,"div",19),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(5),e.Y8G("ngIf",t.user.profilePicture),e.R7$(),e.Y8G("ngIf",t.user.bio)}}function ke(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Created Date:"),e.k0s(),e.j41(3,"span",15),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.JRh(e.i5U(5,1,t.user.createdDate,"medium"))}}function Ce(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Updated Date:"),e.k0s(),e.j41(3,"span",15),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.JRh(e.i5U(5,1,t.user.updatedDate,"medium"))}}function ve(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Created By:"),e.k0s(),e.j41(3,"span",15),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.JRh(t.user.createdBy)}}function Ee(n,r){if(1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Updated By:"),e.k0s(),e.j41(3,"span",15),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.JRh(t.user.updatedBy)}}function be(n,r){if(1&n&&(e.j41(0,"div",10)(1,"mat-card",11)(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4,"Basic Information"),e.k0s()(),e.j41(5,"mat-card-content")(6,"div",12)(7,"div",13)(8,"span",14),e.EFF(9,"ID:"),e.k0s(),e.j41(10,"span",15),e.EFF(11),e.k0s()(),e.j41(12,"div",13)(13,"span",14),e.EFF(14,"Username:"),e.k0s(),e.j41(15,"span",15),e.EFF(16),e.k0s()(),e.j41(17,"div",13)(18,"span",14),e.EFF(19,"First Name:"),e.k0s(),e.j41(20,"span",15),e.EFF(21),e.k0s()(),e.j41(22,"div",13)(23,"span",14),e.EFF(24,"Last Name:"),e.k0s(),e.j41(25,"span",15),e.EFF(26),e.k0s()(),e.j41(27,"div",13)(28,"span",14),e.EFF(29,"Phone Number:"),e.k0s(),e.j41(30,"span",15),e.EFF(31),e.k0s()(),e.j41(32,"div",13)(33,"span",14),e.EFF(34,"Role:"),e.k0s(),e.j41(35,"span",15),e.EFF(36),e.k0s()(),e.j41(37,"div",13)(38,"span",14),e.EFF(39,"User Type:"),e.k0s(),e.j41(40,"mat-chip"),e.EFF(41),e.nI1(42,"titlecase"),e.k0s()()()()(),e.DNE(43,ce,9,3,"mat-card",16)(44,_e,9,3,"mat-card",16)(45,Fe,7,2,"mat-card",16),e.j41(46,"mat-card",11)(47,"mat-card-header")(48,"mat-card-title"),e.EFF(49,"System Information"),e.k0s()(),e.j41(50,"mat-card-content")(51,"div",12),e.DNE(52,ke,6,4,"div",17)(53,Ce,6,4,"div",17)(54,ve,5,1,"div",17)(55,Ee,5,1,"div",17),e.k0s()()()()),2&n){const t=e.XpG();e.R7$(11),e.JRh(t.user.id),e.R7$(5),e.JRh(t.user.username),e.R7$(5),e.JRh(t.user.firstName),e.R7$(5),e.JRh(t.user.lastName),e.R7$(5),e.JRh(t.user.phoneNumber),e.R7$(5),e.JRh(t.user.role),e.R7$(4),e.ZvI("user-type-chip user-type-",t.user.userType,""),e.R7$(),e.SpI(" ",e.bMT(42,17,t.user.userType)," "),e.R7$(2),e.Y8G("ngIf",t.user.birthDate||t.user.birthTime||t.user.birthPlace),e.R7$(),e.Y8G("ngIf",t.user.zodiacSign||t.user.risingSign||t.user.moonSign),e.R7$(),e.Y8G("ngIf",t.user.bio||t.user.profilePicture),e.R7$(7),e.Y8G("ngIf",t.user.createdDate),e.R7$(),e.Y8G("ngIf",t.user.updatedDate),e.R7$(),e.Y8G("ngIf",t.user.createdBy),e.R7$(),e.Y8G("ngIf",t.user.updatedBy)}}function xe(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",24)(1,"mat-icon"),e.EFF(2,"person_off"),e.k0s(),e.j41(3,"h2"),e.EFF(4,"User Not Found"),e.k0s(),e.j41(5,"p"),e.EFF(6,"The user you're looking for doesn't exist or has been deleted."),e.k0s(),e.j41(7,"button",25),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.EFF(8," Go Back to Users "),e.k0s()()}}let Ue=(()=>{class n{route;router;userService;snackBar;userId=null;user=null;loading=!1;constructor(t,i,o,s){this.route=t,this.router=i,this.userService=o,this.snackBar=s}ngOnInit(){this.route.params.subscribe(t=>{t.id&&(this.userId=+t.id,this.loadUser())})}loadUser(){this.userId&&(this.loading=!0,this.userService.getUserById(this.userId).subscribe({next:t=>{this.user=t,this.loading=!1},error:t=>{console.error("Error loading user:",t);let i="Error loading user details";403===t.status?i="Access denied. Only Admin users can view user details.":401===t.status?i="Authentication required. Please log in again.":t.error?.message&&(i=t.error.message),this.snackBar.open(i,"Close",{duration:5e3}),this.loading=!1}}))}goBack(){this.router.navigate(["/users"])}onImageError(t){t.target.style.display="none"}static \u0275fac=function(i){return new(i||n)(e.rXU(g.nX),e.rXU(g.Ix),e.rXU(E.D),e.rXU(F.UG))};static \u0275cmp=e.VBU({type:n,selectors:[["app-user-details"]],standalone:!0,features:[e.aNF],decls:13,vars:4,consts:[[1,"container"],[1,"header"],[1,"actions"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"routerLink",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","user-details",4,"ngIf"],["class","no-user",4,"ngIf"],["mat-raised-button","","color","accent",3,"routerLink"],[1,"loading-container"],[1,"user-details"],[1,"info-card"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],["class","info-card",4,"ngIf"],["class","info-item",4,"ngIf"],[1,"astro-chip"],["class","info-item bio-item",4,"ngIf"],[1,"profile-picture"],[3,"error","src","alt"],[1,"info-item","bio-item"],[1,"bio-text"],[1,"no-user"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3,"User Details"),e.k0s(),e.j41(4,"div",2)(5,"button",3),e.bIt("click",function(){return o.goBack()}),e.j41(6,"mat-icon"),e.EFF(7,"arrow_back"),e.k0s(),e.EFF(8," Back to Users "),e.k0s(),e.DNE(9,se,4,3,"button",4),e.k0s()(),e.DNE(10,ae,2,0,"div",5)(11,be,56,19,"div",6)(12,xe,9,0,"div",7),e.k0s()),2&i&&(e.R7$(9),e.Y8G("ngIf",o.user),e.R7$(),e.Y8G("ngIf",o.loading),e.R7$(),e.Y8G("ngIf",!o.loading&&o.user),e.R7$(),e.Y8G("ngIf",!o.loading&&!o.user))},dependencies:[u.MD,u.bT,u.PV,u.vh,g.Wk,m.Hu,m.RN,m.m2,m.MM,m.dh,_.Hl,_.$z,h.m_,h.An,re.w,j.YN,j.Jl,k.D6,k.LG,F._T],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1000px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.actions[_ngcontent-%COMP%]{display:flex;gap:12px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:60px}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.info-card[_ngcontent-%COMP%]{width:100%}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:40px}.bio-item[_ngcontent-%COMP%]{align-items:flex-start;flex-direction:column;grid-column:1/-1}.label[_ngcontent-%COMP%]{font-weight:600;color:#666;min-width:120px;margin-right:12px}.value[_ngcontent-%COMP%]{color:#333;word-break:break-word}.bio-text[_ngcontent-%COMP%]{margin:8px 0 0;line-height:1.5;color:#333}.user-type-chip[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.user-type-student[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0}.user-type-instructor[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.user-type-admin[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.astro-chip[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100}.profile-picture[_ngcontent-%COMP%]{margin-top:8px}.profile-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:150px;border-radius:8px;box-shadow:0 2px 8px #0000001a}.no-user[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.no-user[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}.no-user[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:16px 0;color:#333}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.info-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.label[_ngcontent-%COMP%]{min-width:auto;margin-right:0;margin-bottom:4px}}"]})}return n})();var R=a(2798),v=a(5084),I=a(6600);function je(n,r){1&n&&(e.j41(0,"div",6),e.nrm(1,"mat-spinner"),e.k0s())}function Re(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Username is required "),e.k0s())}function Ie(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Password is required "),e.k0s())}function De(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Password must be at least 6 characters "),e.k0s())}function Te(n,r){if(1&n){const t=e.RV6();e.j41(0,"mat-form-field",10)(1,"mat-label"),e.EFF(2,"Password"),e.k0s(),e.nrm(3,"input",37),e.j41(4,"button",38),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.hidePassword=!o.hidePassword)}),e.j41(5,"mat-icon"),e.EFF(6),e.k0s()(),e.DNE(7,Ie,2,0,"mat-error",12)(8,De,2,0,"mat-error",12),e.k0s()}if(2&n){let t,i;const o=e.XpG(2);e.R7$(3),e.Y8G("type",o.hidePassword?"password":"text"),e.R7$(3),e.JRh(o.hidePassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",null==(t=o.userForm.get("password"))?null:t.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(i=o.userForm.get("password"))?null:i.hasError("minlength"))}}function Pe(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1," First name is required "),e.k0s())}function Ne(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Last name is required "),e.k0s())}function ye(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Phone number is required "),e.k0s())}function $e(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1," User type is required "),e.k0s())}function Me(n,r){if(1&n&&(e.j41(0,"mat-option",39),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function Se(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Role is required "),e.k0s())}function Ge(n,r){if(1&n&&(e.j41(0,"mat-option",40),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Oe(n,r){if(1&n&&(e.j41(0,"mat-option",40),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function we(n,r){if(1&n&&(e.j41(0,"mat-option",40),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Be(n,r){1&n&&e.nrm(0,"mat-spinner",41)}function Le(n,r){if(1&n){const t=e.RV6();e.j41(0,"form",7),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onSubmit())}),e.j41(1,"div",8)(2,"h3"),e.EFF(3,"Basic Information"),e.k0s(),e.j41(4,"div",9)(5,"mat-form-field",10)(6,"mat-label"),e.EFF(7,"Username"),e.k0s(),e.nrm(8,"input",11),e.DNE(9,Re,2,0,"mat-error",12),e.k0s(),e.DNE(10,Te,9,4,"mat-form-field",13),e.k0s(),e.j41(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),e.EFF(14,"First Name"),e.k0s(),e.nrm(15,"input",14),e.DNE(16,Pe,2,0,"mat-error",12),e.k0s(),e.j41(17,"mat-form-field",10)(18,"mat-label"),e.EFF(19,"Last Name"),e.k0s(),e.nrm(20,"input",15),e.DNE(21,Ne,2,0,"mat-error",12),e.k0s()(),e.j41(22,"mat-form-field",10)(23,"mat-label"),e.EFF(24,"Phone Number"),e.k0s(),e.nrm(25,"input",16),e.DNE(26,ye,2,0,"mat-error",12),e.k0s(),e.j41(27,"div",9)(28,"mat-form-field",10)(29,"mat-label"),e.EFF(30,"User Type"),e.k0s(),e.j41(31,"mat-select",17)(32,"mat-option",18),e.EFF(33,"Student"),e.k0s(),e.j41(34,"mat-option",19),e.EFF(35,"Instructor"),e.k0s(),e.j41(36,"mat-option",20),e.EFF(37,"Admin"),e.k0s()(),e.DNE(38,$e,2,0,"mat-error",12),e.k0s(),e.j41(39,"mat-form-field",10)(40,"mat-label"),e.EFF(41,"Role"),e.k0s(),e.j41(42,"mat-select",21),e.DNE(43,Me,2,2,"mat-option",22),e.k0s(),e.DNE(44,Se,2,0,"mat-error",12),e.k0s()()(),e.j41(45,"div",8)(46,"h3"),e.EFF(47,"Birth Information"),e.k0s(),e.j41(48,"div",9)(49,"mat-form-field",10)(50,"mat-label"),e.EFF(51,"Birth Date"),e.k0s(),e.nrm(52,"input",23)(53,"mat-datepicker-toggle",24)(54,"mat-datepicker",null,0),e.k0s(),e.j41(56,"mat-form-field",10)(57,"mat-label"),e.EFF(58,"Birth Time"),e.k0s(),e.nrm(59,"input",25),e.k0s()(),e.j41(60,"mat-form-field",10)(61,"mat-label"),e.EFF(62,"Birth Place"),e.k0s(),e.nrm(63,"input",26),e.k0s()(),e.j41(64,"div",8)(65,"h3"),e.EFF(66,"Astrological Information"),e.k0s(),e.j41(67,"div",9)(68,"mat-form-field",10)(69,"mat-label"),e.EFF(70,"Zodiac Sign"),e.k0s(),e.j41(71,"mat-select",27),e.DNE(72,Ge,2,2,"mat-option",28),e.k0s()(),e.j41(73,"mat-form-field",10)(74,"mat-label"),e.EFF(75,"Rising Sign"),e.k0s(),e.j41(76,"mat-select",29),e.DNE(77,Oe,2,2,"mat-option",28),e.k0s()()(),e.j41(78,"mat-form-field",10)(79,"mat-label"),e.EFF(80,"Moon Sign"),e.k0s(),e.j41(81,"mat-select",30),e.DNE(82,we,2,2,"mat-option",28),e.k0s()()(),e.j41(83,"div",8)(84,"h3"),e.EFF(85,"Additional Information"),e.k0s(),e.j41(86,"mat-form-field",10)(87,"mat-label"),e.EFF(88,"Bio"),e.k0s(),e.j41(89,"textarea",31),e.EFF(90,"                "),e.k0s()(),e.j41(91,"mat-form-field",10)(92,"mat-label"),e.EFF(93,"Profile Picture URL"),e.k0s(),e.nrm(94,"input",32),e.k0s()(),e.j41(95,"div",33)(96,"button",34),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.EFF(97,"Cancel"),e.k0s(),e.j41(98,"button",35),e.DNE(99,Be,1,0,"mat-spinner",36),e.EFF(100),e.k0s()()()}if(2&n){let t,i,o,s,c,T;const P=e.sdS(55),d=e.XpG();e.Y8G("formGroup",d.userForm),e.R7$(9),e.Y8G("ngIf",null==(t=d.userForm.get("username"))?null:t.hasError("required")),e.R7$(),e.Y8G("ngIf",!d.isEditMode),e.R7$(6),e.Y8G("ngIf",null==(i=d.userForm.get("firstName"))?null:i.hasError("required")),e.R7$(5),e.Y8G("ngIf",null==(o=d.userForm.get("lastName"))?null:o.hasError("required")),e.R7$(5),e.Y8G("ngIf",null==(s=d.userForm.get("phoneNumber"))?null:s.hasError("required")),e.R7$(12),e.Y8G("ngIf",null==(c=d.userForm.get("userType"))?null:c.hasError("required")),e.R7$(5),e.Y8G("ngForOf",d.roleOptions),e.R7$(),e.Y8G("ngIf",null==(T=d.userForm.get("role"))?null:T.hasError("required")),e.R7$(8),e.Y8G("matDatepicker",P),e.R7$(),e.Y8G("for",P),e.R7$(19),e.Y8G("ngForOf",d.zodiacSigns),e.R7$(5),e.Y8G("ngForOf",d.zodiacSigns),e.R7$(5),e.Y8G("ngForOf",d.zodiacSigns),e.R7$(16),e.Y8G("disabled",d.userForm.invalid||d.submitting),e.R7$(),e.Y8G("ngIf",d.submitting),e.R7$(),e.SpI(" ",d.submitting?"Saving...":d.isEditMode?"Update User":"Create User"," ")}}let D=(()=>{class n{fb;userService;router;route;snackBar;userForm;isEditMode=!1;userId=null;loading=!1;submitting=!1;hidePassword=!0;zodiacSigns=["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"];roleOptions=[{value:"USER",label:"User - Standard user access"},{value:"Admin",label:"Admin - Full system access"},{value:"ADMIN",label:"Admin (Legacy) - Full system access"},{value:"INSTRUCTOR",label:"Instructor - Can manage courses and lessons"},{value:"STUDENT",label:"Student - Can view and participate in courses"},{value:"MODERATOR",label:"Moderator - Can moderate content and users"}];constructor(t,i,o,s,c){this.fb=t,this.userService=i,this.router=o,this.route=s,this.snackBar=c,this.userForm=this.fb.group({username:["",[l.k0.required]],password:[""],firstName:["",[l.k0.required]],lastName:["",[l.k0.required]],phoneNumber:["",[l.k0.required]],userType:["student",[l.k0.required]],role:["USER",[l.k0.required]],birthDate:[""],birthTime:[""],birthPlace:[""],zodiacSign:[""],risingSign:[""],moonSign:[""],bio:[""],profilePicture:[""]})}ngOnInit(){this.route.params.subscribe(t=>{t.id?(this.isEditMode=!0,this.userId=+t.id,console.log("\u{1f527} Edit mode detected, userId:",this.userId),this.userForm.get("password")?.clearValidators(),this.userForm.get("password")?.updateValueAndValidity(),this.loadUser()):(console.log("\u{1f527} Add mode detected"),this.userForm.get("password")?.setValidators([l.k0.required,l.k0.minLength(6)]),this.userForm.get("password")?.updateValueAndValidity())})}loadUser(){this.userId&&(console.log("\u{1f527} Loading user with ID:",this.userId),this.userService.checkAuthInfo().subscribe({next:t=>{console.log("\u{1f527} Current auth info:",t)},error:t=>{console.error("\u{1f527} Error checking auth info:",t)}}),this.loading=!0,this.userService.getUserById(this.userId).subscribe({next:t=>{console.log("\u{1f527} User data loaded:",t);const i={...t,birthDate:t.birthDate?new Date(t.birthDate):null};console.log("\u{1f527} Formatted user data:",i),this.userForm.patchValue(i),console.log("\u{1f527} Form after patch:",this.userForm.value),this.loading=!1},error:t=>{console.error("\u{1f527} Error loading user:",t),console.error("\u{1f527} Error details:",t.error),console.error("\u{1f527} Error status:",t.status),this.snackBar.open("Error loading user details","Close",{duration:3e3}),this.loading=!1}}))}onSubmit(){if(this.userForm.invalid)return;this.submitting=!0;const t=this.userForm.value,i={...t,birthDate:t.birthDate?t.birthDate.toISOString().split("T")[0]:null,updatedBy:"admin"};this.isEditMode&&!i.password&&delete i.password,(this.isEditMode?this.userService.updateUser(this.userId,i):this.userService.createUser(i)).subscribe({next:s=>{this.snackBar.open(this.isEditMode?"User updated successfully":"User created successfully","Close",{duration:3e3}),this.router.navigate(["/users"])},error:s=>{console.error("Error saving user:",s);let c="Error saving user";403===s.status?c="Access denied. Only Admin users can update user details.":401===s.status?c="Authentication required. Please log in again.":s.error?.message&&(c=s.error.message),this.snackBar.open(c,"Close",{duration:5e3}),this.submitting=!1}})}goBack(){this.router.navigate(["/users"])}static \u0275fac=function(i){return new(i||n)(e.rXU(l.ok),e.rXU(E.D),e.rXU(g.Ix),e.rXU(g.nX),e.rXU(F.UG))};static \u0275cmp=e.VBU({type:n,selectors:[["app-add-user"]],standalone:!0,features:[e.aNF],decls:15,vars:4,consts:[["picker",""],[1,"container"],[1,"header"],["mat-button","",3,"click"],["class","loading-container",4,"ngIf"],["class","user-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"loading-container"],[1,"user-form",3,"ngSubmit","formGroup"],[1,"section"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","username","placeholder","Enter username"],[4,"ngIf"],["appearance","outline",4,"ngIf"],["matInput","","formControlName","firstName","placeholder","Enter first name"],["matInput","","formControlName","lastName","placeholder","Enter last name"],["matInput","","formControlName","phoneNumber","placeholder","Enter phone number"],["formControlName","userType"],["value","student"],["value","instructor"],["value","admin"],["formControlName","role"],["class","role-option",3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","birthDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","type","time","formControlName","birthTime","placeholder","HH:MM"],["matInput","","formControlName","birthPlace","placeholder","Enter birth place"],["formControlName","zodiacSign"],[3,"value",4,"ngFor","ngForOf"],["formControlName","risingSign"],["formControlName","moonSign"],["matInput","","formControlName","bio","rows","4","placeholder","Enter user bio"],["matInput","","formControlName","profilePicture","placeholder","Enter profile picture URL"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"role-option",3,"value"],[3,"value"],["diameter","20"]],template:function(i,o){1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"h1"),e.EFF(3),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return o.goBack()}),e.j41(5,"mat-icon"),e.EFF(6,"arrow_back"),e.k0s(),e.EFF(7," Back to Users "),e.k0s()(),e.j41(8,"mat-card")(9,"mat-card-header")(10,"mat-card-title"),e.EFF(11),e.k0s()(),e.j41(12,"mat-card-content"),e.DNE(13,je,2,0,"div",4)(14,Le,101,17,"form",5),e.k0s()()()),2&i&&(e.R7$(3),e.JRh(o.isEditMode?"Edit User":"Add New User"),e.R7$(8),e.JRh(o.isEditMode?"Edit User Details":"User Information"),e.R7$(2),e.Y8G("ngIf",o.loading),e.R7$(),e.Y8G("ngIf",!o.loading))},dependencies:[u.MD,u.Sq,u.bT,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,m.Hu,m.RN,m.m2,m.MM,m.dh,f.RG,f.rl,f.nJ,f.TL,f.yw,C.fS,C.fg,_.Hl,_.$z,_.iY,R.Ve,R.VO,I.wT,v.X6,v.Vh,v.bZ,v.bU,I.WX,h.m_,h.An,F._T,k.D6,k.LG],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.user-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.section[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:20px;background-color:#fafafa}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;color:#333;font-size:16px;font-weight:500}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}  .role-option{white-space:normal;line-height:1.3;padding:8px 16px}  .mat-mdc-option-text{white-space:normal}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding-top:20px;border-top:1px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.form-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})}return n})();const Ye=[{path:"",component:ie},{path:"add",component:D},{path:"edit/:id",component:D},{path:":id",component:Ue}]}}]);