"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[834],{1834:(v,y,n)=>{n.r(y),n.d(y,{TOPICS_ROUTES:()=>nt});var u=n(177),m=n(9159),g=n(8834),T=n(9213),p=n(5596),C=n(2102),l=n(2798),s=n(4518),h=n(9631),_=n(5416),d=n(9417),F=n(7673),S=n(9172),b=n(152),$=n(3294),j=n(5558),D=n(6695),t=n(4438),k=n(9973),R=n(3635),N=n(4354),E=n(4710),M=n(6600);const A=()=>[5,10,20];function O(r,c){if(1&r&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&r){const e=c.$implicit;t.Y8G("value",e.categoryId),t.R7$(),t.SpI(" ",e.name," ")}}function x(r,c){if(1&r&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&r){const e=c.$implicit;t.Y8G("value",e.courseId),t.R7$(),t.SpI(" ",e.title," ")}}function P(r,c){if(1&r&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&r){const e=c.$implicit,o=t.XpG();t.Y8G("value",e),t.R7$(),t.SpI(" ",o.displayCourseFn(e)," ")}}function L(r,c){if(1&r&&(t.j41(0,"span",31),t.EFF(1),t.k0s()),2&r){const e=t.XpG(2);t.R7$(),t.SpI(" (",e.selectedCategory.name,") ")}}function U(r,c){1&r&&(t.j41(0,"th",32),t.EFF(1,"ID"),t.k0s())}function V(r,c){if(1&r&&(t.j41(0,"td",33),t.EFF(1),t.k0s()),2&r){const e=c.$implicit;t.R7$(),t.JRh(e.topicId)}}function G(r,c){1&r&&(t.j41(0,"th",32),t.EFF(1,"Order"),t.k0s())}function Y(r,c){if(1&r&&(t.j41(0,"td",33),t.EFF(1),t.k0s()),2&r){const e=c.$implicit;t.R7$(),t.JRh(e.orderNumber)}}function z(r,c){1&r&&(t.j41(0,"th",32),t.EFF(1,"Title"),t.k0s())}function W(r,c){if(1&r&&(t.j41(0,"td",33),t.EFF(1),t.k0s()),2&r){const e=c.$implicit;t.R7$(),t.JRh(e.title)}}function X(r,c){1&r&&(t.j41(0,"th",32),t.EFF(1,"Description"),t.k0s())}function w(r,c){if(1&r&&(t.j41(0,"td",33),t.EFF(1),t.k0s()),2&r){const e=c.$implicit;t.R7$(),t.SpI(" ",e.description?e.description.length>100?e.description.substring(0,100)+"...":e.description:"-"," ")}}function J(r,c){1&r&&(t.j41(0,"th",32),t.EFF(1,"Created"),t.k0s())}function K(r,c){if(1&r&&(t.j41(0,"td",33),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=c.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.createdAt,"short"))}}function H(r,c){1&r&&(t.j41(0,"th",32),t.EFF(1,"Actions"),t.k0s())}function Q(r,c){if(1&r){const e=t.RV6();t.j41(0,"td",33)(1,"button",34),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.navigateToEditTopic(i.topicId))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",35),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.deleteTopic(i.topicId))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()}}function Z(r,c){1&r&&t.nrm(0,"tr",36)}function q(r,c){1&r&&t.nrm(0,"tr",37)}function tt(r,c){1&r&&(t.j41(0,"div",38)(1,"p"),t.EFF(2,"No topics found for this course."),t.k0s()())}function et(r,c){if(1&r){const e=t.RV6();t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.DNE(4,L,2,1,"span",17),t.k0s()(),t.j41(5,"mat-card-content")(6,"table",18),t.qex(7,19),t.DNE(8,U,2,0,"th",20)(9,V,2,1,"td",21),t.bVm(),t.qex(10,22),t.DNE(11,G,2,0,"th",20)(12,Y,2,1,"td",21),t.bVm(),t.qex(13,23),t.DNE(14,z,2,0,"th",20)(15,W,2,1,"td",21),t.bVm(),t.qex(16,24),t.DNE(17,X,2,0,"th",20)(18,w,2,1,"td",21),t.bVm(),t.qex(19,25),t.DNE(20,J,2,0,"th",20)(21,K,3,4,"td",21),t.bVm(),t.qex(22,26),t.DNE(23,H,2,0,"th",20)(24,Q,7,0,"td",21),t.bVm(),t.DNE(25,Z,1,0,"tr",27)(26,q,1,0,"tr",28),t.k0s(),t.j41(27,"mat-paginator",29),t.bIt("page",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.onPageChange(i))}),t.k0s(),t.DNE(28,tt,3,0,"div",30),t.k0s()()}if(2&r){const e=t.XpG();t.R7$(3),t.SpI(" Topics for: ",e.selectedCourse.title," "),t.R7$(),t.Y8G("ngIf",e.selectedCategory),t.R7$(2),t.Y8G("dataSource",e.pagedTopics),t.R7$(19),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("length",e.topics.length)("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",t.lJ4(10,A)),t.R7$(),t.Y8G("ngIf",0===e.topics.length)}}function ot(r,c){1&r&&(t.j41(0,"mat-card",39)(1,"mat-card-content")(2,"div",38)(3,"mat-icon"),t.EFF(4,"school"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Please select a course to view its topics."),t.k0s()()()())}let it=(()=>{class r{topicService;courseService;categoryService;snackBar;router;topics=[];selectedCourse=null;selectedCategory=null;categories=[];filteredCoursesList=[];allCourses=[];categoryControl=new d.MJ("");courseControl=new d.MJ("");courseSearchControl=new d.MJ("");filteredCourses=(0,F.of)([]);displayedColumns=["topicId","orderNumber","title","description","createdAt","actions"];pageIndex=0;pageSize=10;get pagedTopics(){const e=this.pageIndex*this.pageSize;return this.topics.slice(e,e+this.pageSize)}constructor(e,o,i,a,f){this.topicService=e,this.courseService=o,this.categoryService=i,this.snackBar=a,this.router=f}ngOnInit(){Promise.all([this.loadCategoriesAsync(),this.loadAllCoursesAsync()]).then(()=>{this.setupCourseAutocomplete(),this.restoreSelectedCourse()})}loadCategories(){this.categoryService.getCategories().subscribe({next:e=>{this.categories=e},error:()=>{this.snackBar.open("Error loading categories","Close",{duration:3e3})}})}loadCategoriesAsync(){return new Promise((e,o)=>{this.categoryService.getCategories().subscribe({next:i=>{this.categories=i,e()},error:i=>{this.snackBar.open("Error loading categories","Close",{duration:3e3}),o(i)}})})}loadAllCourses(){this.courseService.getAllCourses().subscribe({next:e=>{this.allCourses=e},error:()=>{this.snackBar.open("Error loading courses","Close",{duration:3e3})}})}loadAllCoursesAsync(){return new Promise((e,o)=>{this.courseService.getAllCourses().subscribe({next:i=>{this.allCourses=i,e()},error:i=>{this.snackBar.open("Error loading courses","Close",{duration:3e3}),o(i)}})})}setupCourseAutocomplete(){this.filteredCourses=this.courseSearchControl.valueChanges.pipe((0,S.Z)(""),(0,b.B)(300),(0,$.F)(),(0,j.n)(e=>this._filterCourses(e||"")))}_filterCourses(e){const o="string"==typeof e?e:e?.title||"";if(!o||""===o.trim())return(0,F.of)(this.categoryControl.value?this.allCourses.filter(a=>a.categoryId===this.categoryControl.value):this.allCourses);let i=this.allCourses.filter(a=>a.title.toLowerCase().includes(o.toLowerCase()));return this.categoryControl.value&&(i=i.filter(a=>a.categoryId===this.categoryControl.value)),(0,F.of)(i)}displayCourseFn=e=>{if(!e)return"";let a="";return e.categoryId&&this.selectedCategory&&(a=` - ${this.selectedCategory.name}`),`${e.title||"Untitled"} (ID: ${e.courseId||"N/A"})${a}`};onCategorySelected(e){const o=e.value;this.selectedCategory=o&&this.categories.find(i=>i.categoryId===o)||null,this.courseControl.setValue(""),this.courseSearchControl.setValue(""),this.selectedCourse=null,this.topics=[],o?this.loadCoursesByCategory(o):this.filteredCoursesList=[]}onCourseSelected(e){const o=e.value;this.selectedCourse=o&&this.filteredCoursesList.find(i=>i.courseId===o)||null,this.courseSearchControl.setValue(""),this.topics=[],this.selectedCourse&&this.loadTopics()}onCourseSearchSelected(e){const o=e.option.value;if(this.selectedCourse=o,!this.selectedCategory&&o.categoryId){const i=this.categories.find(a=>a.categoryId===o.categoryId);i&&i.categoryId&&(this.selectedCategory=i,this.categoryControl.setValue(i.categoryId),this.loadCoursesByCategory(i.categoryId),setTimeout(()=>{this.courseControl.setValue(o.courseId)},100))}this.loadTopics()}loadCoursesByCategory(e){this.filteredCoursesList=this.allCourses.filter(o=>o.categoryId===e)}restoreSelectedCourse(){const e=history.state;if(e&&e.selectedCourse){const o=e.selectedCourse;if(this.selectedCourse=o,this.courseSearchControl.setValue(o),e.selectedCategory)this.selectedCategory=e.selectedCategory,this.selectedCategory&&this.selectedCategory.categoryId&&(this.categoryControl.setValue(this.selectedCategory.categoryId),this.loadCoursesByCategory(this.selectedCategory.categoryId),this.courseControl.setValue(this.selectedCourse.courseId));else if(o.categoryId){const i=this.categories.find(a=>a.categoryId===o.categoryId);i&&i.categoryId&&(this.selectedCategory=i,this.categoryControl.setValue(i.categoryId),this.loadCoursesByCategory(i.categoryId),this.courseControl.setValue(o.courseId))}this.loadTopics()}}onPageChange(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize}loadTopics(){this.selectedCourse&&this.topicService.getTopicsByCourseId(this.selectedCourse.courseId).subscribe({next:e=>{this.topics=e.map(o=>({...o,createdAt:this.parseCustomDate(o.createdAt)})),this.pageIndex=0},error:()=>{this.snackBar.open("Error loading topics","Close",{duration:3e3})}})}parseCustomDate(e){if(!e)return new Date(0);if("string"==typeof e){const o=e.split(",").map(Number);if(6===o.length)return new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]);const i=new Date(e);return isNaN(i.getTime())?new Date(0):i}return e instanceof Date?e:new Date(0)}deleteTopic(e){confirm("Are you sure you want to delete this topic?")&&this.topicService.deleteTopic(e).subscribe({next:()=>{this.loadTopics(),this.snackBar.open("Topic deleted successfully","Close",{duration:3e3})},error:()=>{this.snackBar.open("Error deleting topic","Close",{duration:3e3})}})}navigateToAddTopic(){this.selectedCourse&&this.router.navigate(["topics/add"],{state:{selectedCourse:this.selectedCourse,selectedCategory:this.selectedCategory}})}navigateToEditTopic(e){this.router.navigate(["topics/update",e],{state:{selectedCourse:this.selectedCourse,selectedCategory:this.selectedCategory}})}static \u0275fac=function(o){return new(o||r)(t.rXU(k.h),t.rXU(R.f),t.rXU(N.M),t.rXU(_.UG),t.rXU(E.Ix))};static \u0275cmp=t.VBU({type:r,selectors:[["app-topic-list"]],standalone:!0,features:[t.aNF],decls:35,vars:14,consts:[["auto","matAutocomplete"],[1,"container"],[1,"header"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"filter-card"],[1,"filter-row"],[1,"filter-field"],[3,"selectionChange","formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"selectionChange","formControl","disabled"],[1,"full-width"],["type","text","matInput","","placeholder","Type to search courses...",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[4,"ngIf"],["class","placeholder-card",4,"ngIf"],[3,"value"],["class","course-context",4,"ngIf"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","topicId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","orderNumber"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageIndex","pageSizeOptions"],["class","no-data",4,"ngIf"],[1,"course-context"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"],[1,"placeholder-card"]],template:function(o,i){if(1&o){const a=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"h1"),t.EFF(3,"Topics"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return t.eBV(a),t.Njj(i.navigateToAddTopic())}),t.j41(5,"mat-icon"),t.EFF(6,"add"),t.k0s(),t.EFF(7," Add Topic "),t.k0s()(),t.j41(8,"mat-card",4)(9,"mat-card-content")(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),t.EFF(13,"Filter by Category"),t.k0s(),t.j41(14,"mat-select",7),t.bIt("selectionChange",function(I){return t.eBV(a),t.Njj(i.onCategorySelected(I))}),t.j41(15,"mat-option",8),t.EFF(16,"All Categories"),t.k0s(),t.DNE(17,O,2,2,"mat-option",9),t.k0s()(),t.j41(18,"mat-form-field",6)(19,"mat-label"),t.EFF(20,"Filter by Course"),t.k0s(),t.j41(21,"mat-select",10),t.bIt("selectionChange",function(I){return t.eBV(a),t.Njj(i.onCourseSelected(I))}),t.j41(22,"mat-option",8),t.EFF(23,"All Courses"),t.k0s(),t.DNE(24,x,2,2,"mat-option",9),t.k0s()()(),t.j41(25,"mat-form-field",11)(26,"mat-label"),t.EFF(27,"Search Course"),t.k0s(),t.nrm(28,"input",12),t.j41(29,"mat-autocomplete",13,0),t.bIt("optionSelected",function(I){return t.eBV(a),t.Njj(i.onCourseSearchSelected(I))}),t.DNE(31,P,2,2,"mat-option",9),t.nI1(32,"async"),t.k0s()()()(),t.DNE(33,et,29,11,"mat-card",14)(34,ot,7,0,"mat-card",15),t.k0s()}if(2&o){const a=t.sdS(30);t.R7$(4),t.Y8G("disabled",!i.selectedCourse),t.R7$(10),t.Y8G("formControl",i.categoryControl),t.R7$(3),t.Y8G("ngForOf",i.categories),t.R7$(4),t.Y8G("formControl",i.courseControl)("disabled",!i.categoryControl.value),t.R7$(3),t.Y8G("ngForOf",i.filteredCoursesList),t.R7$(4),t.Y8G("formControl",i.courseSearchControl)("matAutocomplete",a),t.R7$(),t.Y8G("displayWith",i.displayCourseFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(32,12,i.filteredCourses)),t.R7$(2),t.Y8G("ngIf",i.selectedCourse),t.R7$(),t.Y8G("ngIf",!i.selectedCourse)}},dependencies:[u.MD,u.Sq,u.bT,u.Jj,u.vh,m.tP,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,g.Hl,g.$z,g.iY,T.m_,T.An,p.Hu,p.RN,p.m2,p.MM,p.dh,C.RG,C.rl,C.nJ,l.Ve,l.VO,M.wT,s.jL,s.$3,s.pN,h.fS,h.fg,_._T,d.X1,d.me,d.BC,d.l_,D.Ou,D.iy],styles:[".container[_ngcontent-%COMP%]{padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.full-width[_ngcontent-%COMP%]{width:100%}.filter-card[_ngcontent-%COMP%]{margin-bottom:20px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.filter-field[_ngcontent-%COMP%]{flex:1}.course-context[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:400}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px}.placeholder-card[_ngcontent-%COMP%]{margin-top:20px}"]})}return r})();function rt(r,c){if(1&r&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&r){const e=c.$implicit,o=t.XpG();t.Y8G("value",e),t.R7$(),t.SpI(" ",o.displayCourseFn(e)," ")}}function st(r,c){1&r&&(t.j41(0,"mat-form-field",3)(1,"mat-label"),t.EFF(2,"Order Number"),t.k0s(),t.nrm(3,"input",15),t.k0s())}let B=(()=>{class r{topicForm;filteredCourses=(0,F.of)([]);isEditMode=!1;topicId=null;fb=(0,t.WQX)(d.ok);topicService=(0,t.WQX)(k.h);courseService=(0,t.WQX)(R.f);router=(0,t.WQX)(E.Ix);route=(0,t.WQX)(E.nX);snackBar=(0,t.WQX)(_.UG);constructor(){this.topicForm=this.fb.group({title:["",d.k0.required],description:[""],courseId:["",d.k0.required],courseSearch:[""],orderNumber:[1]})}ngOnInit(){this.setupCourseAutocomplete(),this.checkEditMode(),this.handleNavigationState()}handleNavigationState(){const o=this.router.getCurrentNavigation()?.extras?.state||history.state;if(o&&o.selectedCourse&&!this.isEditMode){const i=o.selectedCourse;this.topicForm.patchValue({courseId:i.courseId,courseSearch:i})}}setupCourseAutocomplete(){this.filteredCourses=this.topicForm.get("courseSearch").valueChanges.pipe((0,S.Z)(""),(0,b.B)(300),(0,$.F)(),(0,j.n)(e=>this._filterCourses(e)))}_filterCourses(e){return"string"!=typeof e?(0,F.of)([]):(e&&e.trim(),this.courseService.getAllCourses())}displayCourseFn=e=>e?`${e.title} (ID: ${e.courseId})`:"";onCourseSelected(e){this.topicForm.patchValue({courseId:e.option.value.courseId})}checkEditMode(){const e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.topicId=+e,this.loadTopic())}loadTopic(){this.topicId&&this.topicService.getTopicById(this.topicId).subscribe({next:e=>{this.topicForm.patchValue({title:e.title,description:e.description,courseId:e.courseId,orderNumber:e.orderNumber}),this.courseService.getCourseById(e.courseId).subscribe({next:o=>{this.topicForm.patchValue({courseSearch:o})}})},error:()=>{this.snackBar.open("Error loading topic","Close",{duration:3e3})}})}onSubmit(){if(this.topicForm.valid){const e=this.topicForm.value,o={title:e.title,description:e.description,courseId:e.courseId,...this.isEditMode&&{orderNumber:e.orderNumber}};this.isEditMode&&this.topicId?this.topicService.updateTopic(this.topicId,o).subscribe({next:()=>{this.snackBar.open("Topic updated successfully","Close",{duration:3e3}),this.goBack()},error:()=>{this.snackBar.open("Error updating topic","Close",{duration:3e3})}}):this.topicService.createTopic(o).subscribe({next:()=>{this.snackBar.open("Topic created successfully","Close",{duration:3e3}),this.goBack()},error:()=>{this.snackBar.open("Error creating topic","Close",{duration:3e3})}})}}goBack(){const o=this.router.getCurrentNavigation()?.extras?.state||history.state,a=this.topicForm.get("courseSearch")?.value||o?.selectedCourse,f=o?.selectedCategory;this.router.navigate(["/topics"],{state:{selectedCourse:a,selectedCategory:f}})}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=t.VBU({type:r,selectors:[["app-add-topic"]],standalone:!0,features:[t.aNF],decls:35,vars:10,consts:[["auto","matAutocomplete"],[1,"container"],[3,"ngSubmit","formGroup"],["appearance","fill",1,"full-width"],["type","text","matInput","","formControlName","courseSearch","placeholder","Type to search courses...",3,"matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","courseId","required","","readonly",""],["matInput","","formControlName","title","required",""],["matInput","","formControlName","description","rows","4"],["appearance","fill","class","full-width",4,"ngIf"],[1,"button-container"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"],["matInput","","type","number","formControlName","orderNumber","min","1"]],template:function(o,i){if(1&o){const a=t.RV6();t.j41(0,"div",1)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4),t.k0s()(),t.j41(5,"mat-card-content")(6,"form",2),t.bIt("ngSubmit",function(){return t.eBV(a),t.Njj(i.onSubmit())}),t.j41(7,"mat-form-field",3)(8,"mat-label"),t.EFF(9,"Search Course"),t.k0s(),t.nrm(10,"input",4),t.j41(11,"mat-autocomplete",5,0),t.bIt("optionSelected",function(I){return t.eBV(a),t.Njj(i.onCourseSelected(I))}),t.DNE(13,rt,2,2,"mat-option",6),t.nI1(14,"async"),t.k0s()(),t.j41(15,"mat-form-field",3)(16,"mat-label"),t.EFF(17,"Course ID"),t.k0s(),t.nrm(18,"input",7),t.j41(19,"mat-hint"),t.EFF(20,"Selected from course search above"),t.k0s()(),t.j41(21,"mat-form-field",3)(22,"mat-label"),t.EFF(23,"Title"),t.k0s(),t.nrm(24,"input",8),t.k0s(),t.j41(25,"mat-form-field",3)(26,"mat-label"),t.EFF(27,"Description"),t.k0s(),t.nrm(28,"textarea",9),t.k0s(),t.DNE(29,st,4,0,"mat-form-field",10),t.j41(30,"div",11)(31,"button",12),t.bIt("click",function(){return t.eBV(a),t.Njj(i.goBack())}),t.EFF(32,"Cancel"),t.k0s(),t.j41(33,"button",13),t.EFF(34),t.k0s()()()()()()}if(2&o){const a=t.sdS(12);t.R7$(4),t.JRh(i.isEditMode?"Edit Topic"+(i.topicId?" (ID: "+i.topicId+")":""):"Add New Topic"),t.R7$(2),t.Y8G("formGroup",i.topicForm),t.R7$(4),t.Y8G("matAutocomplete",a),t.R7$(),t.Y8G("displayWith",i.displayCourseFn),t.R7$(2),t.Y8G("ngForOf",t.bMT(14,8,i.filteredCourses)),t.R7$(16),t.Y8G("ngIf",i.isEditMode),t.R7$(4),t.Y8G("disabled",i.topicForm.invalid),t.R7$(),t.SpI(" ",i.isEditMode?"Update":"Create"," ")}},dependencies:[u.MD,u.Sq,u.bT,u.Jj,d.X1,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.VZ,d.j4,d.JD,C.RG,C.rl,C.nJ,C.MV,h.fS,h.fg,g.Hl,g.$z,p.Hu,p.RN,p.m2,p.MM,p.dh,s.jL,s.$3,M.wT,s.pN,_._T],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:20px}"]})}return r})();const nt=[{path:"",component:it},{path:"add",component:B},{path:"update/:id",component:B}]},4354:(v,y,n)=>{n.d(y,{M:()=>T});var u=n(5312),m=n(4438),g=n(1626);let T=(()=>{class p{http;apiUrl=`${u.c.apiUrl}/secure/categories`;constructor(l){this.http=l}getCategories(){return this.http.post(`${this.apiUrl}/get-all`,{})}getCategoryById(l){return this.http.post(`${this.apiUrl}/get-by-id`,{id:l})}getRootCategories(){return this.http.post(`${this.apiUrl}/get-root`,{})}getCategoriesByParent(l){return this.http.post(`${this.apiUrl}/get-by-parent`,{parentId:l})}createCategory(l){return this.http.post(this.apiUrl,l)}updateCategory(l,s){return this.http.put(`${this.apiUrl}/${l}`,s)}deleteCategory(l){return this.http.delete(`${this.apiUrl}/${l}`)}static \u0275fac=function(s){return new(s||p)(m.KVO(g.Qq))};static \u0275prov=m.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},3635:(v,y,n)=>{n.d(y,{f:()=>p});var u=n(6354),m=n(5312),g=n(4438),T=n(1626);let p=(()=>{class C{http;apiUrl=`${m.c.apiUrl}/secure/courses`;constructor(s){this.http=s}getAllCourses(){return this.http.post(`${this.apiUrl}/get-all`,{}).pipe((0,u.T)(s=>this.sanitizeCourseData(s)))}getCourseById(s){return this.http.post(`${this.apiUrl}/get-by-id`,{id:s}).pipe((0,u.T)(h=>this.sanitizeSingleCourse(h)))}getCoursesByCategory(s){return this.http.post(`${this.apiUrl}/get-by-category`,{categoryId:s}).pipe((0,u.T)(h=>this.sanitizeCourseData(h)))}getCoursesByLogin(s){return this.http.post(`${this.apiUrl}/get-by-login`,{loginId:s}).pipe((0,u.T)(h=>this.sanitizeCourseData(h)))}getPublishedCourses(){return this.http.post(`${this.apiUrl}/get-published`,{}).pipe((0,u.T)(s=>this.sanitizeCourseData(s)))}createCourse(s){return this.http.post(this.apiUrl,s).pipe((0,u.T)(h=>this.sanitizeSingleCourse(h)))}updateCourse(s,h){return this.http.put(`${this.apiUrl}/${s}`,h).pipe((0,u.T)(_=>this.sanitizeSingleCourse(_)))}deleteCourse(s){return this.http.delete(`${this.apiUrl}/${s}`)}sanitizeCourseData(s){return s.map(h=>this.sanitizeSingleCourse(h))}sanitizeSingleCourse(s){return s.description&&(s.description=this.addProtectionMarkers(s.description)),s.title&&(s.title=this.addProtectionMarkers(s.title)),s}addProtectionMarkers(s){return s.split("").map((_,d)=>d%10==0&&d>0?"\u200b"+_:_).join("")}getDisplayContent(s){return s?s.replace(/[\u200B\u200C\u200D\uFEFF]/g,""):""}isProtectedContent(s){return!0}getProtectedContent(s){return s?this.addProtectionMarkers(s):""}static \u0275fac=function(h){return new(h||C)(g.KVO(T.Qq))};static \u0275prov=g.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})()},9973:(v,y,n)=>{n.d(y,{h:()=>T});var u=n(5312),m=n(4438),g=n(1626);let T=(()=>{class p{http;apiUrl=`${u.c.apiUrl}/secure/topics`;constructor(l){this.http=l}getAllTopics(){return this.http.post(`${this.apiUrl}/get-all`,{})}getTopicsByCourseId(l){return this.http.post(`${this.apiUrl}/get-by-course`,{courseId:l})}getTopicById(l){return this.http.post(`${this.apiUrl}/get-by-id`,{id:l})}createTopic(l){return this.http.post(this.apiUrl,l)}updateTopic(l,s){return this.http.put(`${this.apiUrl}/${l}`,s)}deleteTopic(l){return this.http.delete(`${this.apiUrl}/${l}`)}static \u0275fac=function(s){return new(s||p)(m.KVO(g.Qq))};static \u0275prov=m.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);