"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[239],{3239:(L,g,i)=>{i.r(g),i.d(g,{PAYMENT_ROUTES:()=>xt});var f=i(177),h=i(4710),p=i(9159),_=i(5596),u=i(8834),F=i(9213),l=i(2102),y=i(9631),C=i(2798),x=i(6471),P=i(5416),k=i(9183),j=i(4823),m=i(9417),t=i(4438),N=i(5312),S=i(1626);let D=(()=>{class e{http;apiUrl=`${N.c.apiUrl}/payments`;constructor(n){this.http=n}getPayments(){return this.http.get(this.apiUrl)}getPaymentById(n){return this.http.get(`${this.apiUrl}/${n}`)}createPayment(n){return this.http.post(this.apiUrl,n)}updatePayment(n,r){return this.http.put(`${this.apiUrl}/${n}`,r)}deletePayment(n){return this.http.delete(`${this.apiUrl}/${n}`)}static \u0275fac=function(r){return new(r||e)(t.KVO(S.Qq))};static \u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var M=i(6600);const G=e=>["edit",e];function U(e,a){1&e&&(t.j41(0,"div",22),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading payments..."),t.k0s()())}function B(e,a){1&e&&(t.j41(0,"th",38),t.EFF(1,"Payment ID"),t.k0s())}function Y(e,a){if(1&e&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&e){const n=a.$implicit;t.R7$(),t.JRh(n.paymentId)}}function w(e,a){1&e&&(t.j41(0,"th",38),t.EFF(1,"User ID"),t.k0s())}function V(e,a){if(1&e&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&e){const n=a.$implicit;t.R7$(),t.JRh(n.loginId)}}function A(e,a){1&e&&(t.j41(0,"th",38),t.EFF(1,"Course ID"),t.k0s())}function X(e,a){if(1&e&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&e){const n=a.$implicit;t.R7$(),t.JRh(n.courseId)}}function J(e,a){1&e&&(t.j41(0,"th",38),t.EFF(1,"Amount"),t.k0s())}function q(e,a){if(1&e&&(t.j41(0,"td",39)(1,"strong"),t.EFF(2),t.nI1(3,"number"),t.k0s()()),2&e){const n=a.$implicit;t.R7$(2),t.SpI("\u20b9",t.i5U(3,1,n.amount,"1.2-2"),"")}}function H(e,a){1&e&&(t.j41(0,"th",38),t.EFF(1,"Payment Method"),t.k0s())}function Q(e,a){if(1&e&&(t.j41(0,"td",39)(1,"mat-chip-set")(2,"mat-chip"),t.EFF(3),t.nI1(4,"titlecase"),t.k0s()()()),2&e){const n=a.$implicit;t.R7$(3),t.JRh(t.bMT(4,1,n.paymentMethod))}}function W(e,a){1&e&&(t.j41(0,"th",38),t.EFF(1,"Transaction ID"),t.k0s())}function z(e,a){if(1&e&&(t.j41(0,"td",39)(1,"span",40),t.EFF(2),t.k0s()()),2&e){const n=a.$implicit;t.R7$(2),t.JRh(n.transactionId||"N/A")}}function K(e,a){1&e&&(t.j41(0,"th",38),t.EFF(1,"Status"),t.k0s())}function Z(e,a){if(1&e&&(t.j41(0,"td",39)(1,"mat-chip-set")(2,"mat-chip",41),t.EFF(3),t.nI1(4,"titlecase"),t.k0s()()()),2&e){const n=a.$implicit,r=t.XpG(2);t.R7$(2),t.Y8G("ngClass",r.getStatusClass(n.status)),t.R7$(),t.SpI(" ",t.bMT(4,2,n.status)," ")}}function tt(e,a){1&e&&(t.j41(0,"th",38),t.EFF(1,"Payment Date"),t.k0s())}function et(e,a){if(1&e&&(t.j41(0,"td",39),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=a.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,n.paymentDate,"dd/MM/yyyy HH:mm")," ")}}function nt(e,a){1&e&&(t.j41(0,"th",38),t.EFF(1,"Actions"),t.k0s())}function at(e,a){if(1&e){const n=t.RV6();t.j41(0,"td",39)(1,"button",42)(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",43),t.bIt("click",function(){const o=t.eBV(n).$implicit,s=t.XpG(2);return t.Njj(s.deletePayment(o))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()}if(2&e){const n=a.$implicit;t.R7$(),t.Y8G("routerLink",t.eq3(1,G,n.paymentId))}}function ot(e,a){1&e&&t.nrm(0,"tr",44)}function rt(e,a){1&e&&t.nrm(0,"tr",45)}function it(e,a){1&e&&(t.j41(0,"button",4)(1,"mat-icon"),t.EFF(2,"add"),t.k0s(),t.EFF(3," Add First Payment "),t.k0s())}function mt(e,a){if(1&e&&(t.j41(0,"div",46)(1,"mat-icon"),t.EFF(2,"payment"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No payments found"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s(),t.DNE(7,it,4,0,"button",47),t.k0s()),2&e){const n=t.XpG(2);t.R7$(6),t.JRh(0===n.payments.length?"No payments have been created yet.":"No payments match your current filters."),t.R7$(),t.Y8G("ngIf",0===n.payments.length)}}function st(e,a){if(1&e&&(t.j41(0,"mat-card")(1,"table",23),t.qex(2,24),t.DNE(3,B,2,0,"th",25)(4,Y,2,1,"td",26),t.bVm(),t.qex(5,27),t.DNE(6,w,2,0,"th",25)(7,V,2,1,"td",26),t.bVm(),t.qex(8,28),t.DNE(9,A,2,0,"th",25)(10,X,2,1,"td",26),t.bVm(),t.qex(11,29),t.DNE(12,J,2,0,"th",25)(13,q,4,4,"td",26),t.bVm(),t.qex(14,30),t.DNE(15,H,2,0,"th",25)(16,Q,5,3,"td",26),t.bVm(),t.qex(17,31),t.DNE(18,W,2,0,"th",25)(19,z,3,1,"td",26),t.bVm(),t.qex(20,32),t.DNE(21,K,2,0,"th",25)(22,Z,5,4,"td",26),t.bVm(),t.qex(23,33),t.DNE(24,tt,2,0,"th",25)(25,et,3,4,"td",26),t.bVm(),t.qex(26,34),t.DNE(27,nt,2,0,"th",25)(28,at,7,3,"td",26),t.bVm(),t.DNE(29,ot,1,0,"tr",35)(30,rt,1,0,"tr",36),t.k0s(),t.DNE(31,mt,8,2,"div",37),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("dataSource",n.filteredPayments),t.R7$(28),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("ngIf",0===n.filteredPayments.length)}}let lt=(()=>{class e{paymentService;snackBar;payments=[];filteredPayments=[];loading=!1;searchQuery="";statusFilter="";paymentMethodFilter="";displayedColumns=["paymentId","loginId","courseId","amount","paymentMethod","transactionId","status","paymentDate","actions"];constructor(n,r){this.paymentService=n,this.snackBar=r}ngOnInit(){this.loadPayments()}loadPayments(){this.loading=!0,this.paymentService.getPayments().subscribe({next:n=>{this.payments=n,this.applyFilters(),this.loading=!1},error:n=>{console.error("Error loading payments:",n),this.snackBar.open("Error loading payments","Close",{duration:3e3}),this.loading=!1}})}applyFilters(){this.filteredPayments=this.payments.filter(n=>(!this.searchQuery||n.transactionId&&n.transactionId.toLowerCase().includes(this.searchQuery.toLowerCase()))&&(!this.statusFilter||n.status===this.statusFilter)&&(!this.paymentMethodFilter||n.paymentMethod===this.paymentMethodFilter))}clearFilters(){this.searchQuery="",this.statusFilter="",this.paymentMethodFilter="",this.applyFilters()}deletePayment(n){confirm(`Are you sure you want to delete payment ${n.paymentId}?`)&&this.paymentService.deletePayment(n.paymentId).subscribe({next:()=>{this.snackBar.open("Payment deleted successfully","Close",{duration:3e3}),this.loadPayments()},error:r=>{console.error("Error deleting payment:",r),this.snackBar.open("Error deleting payment","Close",{duration:3e3})}})}getStatusClass(n){return`status-${n.toLowerCase()}`}static \u0275fac=function(r){return new(r||e)(t.rXU(D),t.rXU(P.UG))};static \u0275cmp=t.VBU({type:e,selectors:[["app-payment-list"]],standalone:!0,features:[t.aNF],decls:55,vars:5,consts:[[1,"container"],[1,"header"],[1,"header-actions"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["mat-raised-button","","color","primary","routerLink","add"],[1,"filter-card"],[1,"filters"],["matInput","","placeholder","Enter transaction ID",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],["value","pending"],["value","completed"],["value","failed"],["value","refunded"],["value","credit_card"],["value","debit_card"],["value","paypal"],["value","upi"],["value","net_banking"],["mat-button","",3,"click"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","paymentId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","loginId"],["matColumnDef","courseId"],["matColumnDef","amount"],["matColumnDef","paymentMethod"],["matColumnDef","transactionId"],["matColumnDef","status"],["matColumnDef","paymentDate"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"transaction-id"],[3,"ngClass"],["mat-icon-button","","matTooltip","Edit Payment",3,"routerLink"],["mat-icon-button","","matTooltip","Delete Payment","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"],["mat-raised-button","","color","primary","routerLink","add",4,"ngIf"]],template:function(r,o){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Payment Management"),t.k0s(),t.j41(4,"div",2)(5,"button",3),t.bIt("click",function(){return o.loadPayments()}),t.j41(6,"mat-icon"),t.EFF(7,"refresh"),t.k0s()(),t.j41(8,"button",4)(9,"mat-icon"),t.EFF(10,"add"),t.k0s(),t.EFF(11," Add Payment "),t.k0s()()(),t.j41(12,"mat-card",5)(13,"mat-card-content")(14,"div",6)(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Search by Transaction ID"),t.k0s(),t.j41(18,"input",7),t.mxI("ngModelChange",function(c){return t.DH7(o.searchQuery,c)||(o.searchQuery=c),c}),t.bIt("input",function(){return o.applyFilters()}),t.k0s()(),t.j41(19,"mat-form-field")(20,"mat-label"),t.EFF(21,"Filter by Status"),t.k0s(),t.j41(22,"mat-select",8),t.mxI("ngModelChange",function(c){return t.DH7(o.statusFilter,c)||(o.statusFilter=c),c}),t.bIt("selectionChange",function(){return o.applyFilters()}),t.j41(23,"mat-option",9),t.EFF(24,"All Statuses"),t.k0s(),t.j41(25,"mat-option",10),t.EFF(26,"Pending"),t.k0s(),t.j41(27,"mat-option",11),t.EFF(28,"Completed"),t.k0s(),t.j41(29,"mat-option",12),t.EFF(30,"Failed"),t.k0s(),t.j41(31,"mat-option",13),t.EFF(32,"Refunded"),t.k0s()()(),t.j41(33,"mat-form-field")(34,"mat-label"),t.EFF(35,"Filter by Payment Method"),t.k0s(),t.j41(36,"mat-select",8),t.mxI("ngModelChange",function(c){return t.DH7(o.paymentMethodFilter,c)||(o.paymentMethodFilter=c),c}),t.bIt("selectionChange",function(){return o.applyFilters()}),t.j41(37,"mat-option",9),t.EFF(38,"All Methods"),t.k0s(),t.j41(39,"mat-option",14),t.EFF(40,"Credit Card"),t.k0s(),t.j41(41,"mat-option",15),t.EFF(42,"Debit Card"),t.k0s(),t.j41(43,"mat-option",16),t.EFF(44,"PayPal"),t.k0s(),t.j41(45,"mat-option",17),t.EFF(46,"UPI"),t.k0s(),t.j41(47,"mat-option",18),t.EFF(48,"Net Banking"),t.k0s()()(),t.j41(49,"button",19),t.bIt("click",function(){return o.clearFilters()}),t.j41(50,"mat-icon"),t.EFF(51,"clear"),t.k0s(),t.EFF(52," Clear Filters "),t.k0s()()()(),t.DNE(53,U,4,0,"div",20)(54,st,32,4,"mat-card",21),t.k0s()),2&r&&(t.R7$(18),t.R50("ngModel",o.searchQuery),t.R7$(4),t.R50("ngModel",o.statusFilter),t.R7$(14),t.R50("ngModel",o.paymentMethodFilter),t.R7$(17),t.Y8G("ngIf",o.loading),t.R7$(),t.Y8G("ngIf",!o.loading))},dependencies:[f.MD,f.YU,f.bT,f.QX,f.PV,f.vh,h.Wk,m.YN,m.me,m.BC,m.vS,p.tP,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,_.Hu,_.RN,_.m2,u.Hl,u.$z,u.iY,F.m_,F.An,l.RG,l.rl,l.nJ,y.fS,y.fg,C.Ve,C.VO,M.wT,x.YN,x.Jl,x.Jo,P._T,k.D6,k.LG,j.uc,j.oV],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.filter-card[_ngcontent-%COMP%]{margin-bottom:20px}.filters[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;flex-wrap:wrap}.filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:200px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:20px}.mat-elevation-z2[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}table[_ngcontent-%COMP%]{width:100%}.transaction-id[_ngcontent-%COMP%]{font-family:monospace;font-size:.9rem;background:#f5f5f5;padding:2px 6px;border-radius:4px}.status-pending[_ngcontent-%COMP%]{background-color:#fff3cd!important;color:#856404!important}.status-completed[_ngcontent-%COMP%]{background-color:#d4edda!important;color:#155724!important}.status-failed[_ngcontent-%COMP%]{background-color:#f8d7da!important;color:#721c24!important}.status-refunded[_ngcontent-%COMP%]{background-color:#d1ecf1!important;color:#0c5460!important}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;opacity:.5}.no-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width: 768px){.filters[_ngcontent-%COMP%]{flex-direction:column}.filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:unset}.header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.header-actions[_ngcontent-%COMP%]{justify-content:center}}"]})}return e})();var E=i(5084),ct=i(5602),dt=i(3635);function pt(e,a){1&e&&(t.j41(0,"div",7),t.nrm(1,"mat-spinner"),t.k0s())}function ut(e,a){1&e&&(t.j41(0,"mat-error"),t.EFF(1," User ID is required "),t.k0s())}function ft(e,a){1&e&&(t.j41(0,"mat-error"),t.EFF(1," User ID must be greater than 0 "),t.k0s())}function _t(e,a){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Course ID is required "),t.k0s())}function yt(e,a){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Course ID must be greater than 0 "),t.k0s())}function ht(e,a){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Amount is required "),t.k0s())}function gt(e,a){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Amount must be greater than 0 "),t.k0s())}function Ft(e,a){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Payment method is required "),t.k0s())}function Ct(e,a){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Status is required "),t.k0s())}function Pt(e,a){1&e&&(t.j41(0,"mat-error"),t.EFF(1," Payment date is required "),t.k0s())}function kt(e,a){1&e&&t.nrm(0,"mat-spinner",40)}function Et(e,a){if(1&e&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.JRh(n.isEditMode?"Update Payment":"Create Payment")}}function It(e,a){if(1&e&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.JRh(n.isEditMode?"Updating...":"Creating...")}}function bt(e,a){if(1&e){const n=t.RV6();t.j41(0,"form",8),t.bIt("ngSubmit",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.onSubmit())}),t.j41(1,"div",9)(2,"h3"),t.EFF(3,"Transaction Details"),t.k0s(),t.j41(4,"div",10)(5,"mat-form-field",11)(6,"mat-label"),t.EFF(7,"User ID"),t.k0s(),t.nrm(8,"input",12),t.DNE(9,ut,2,0,"mat-error",13)(10,ft,2,0,"mat-error",13),t.k0s(),t.j41(11,"mat-form-field",11)(12,"mat-label"),t.EFF(13,"Course ID"),t.k0s(),t.nrm(14,"input",14),t.DNE(15,_t,2,0,"mat-error",13)(16,yt,2,0,"mat-error",13),t.k0s()()(),t.j41(17,"div",9)(18,"h3"),t.EFF(19,"Payment Information"),t.k0s(),t.j41(20,"div",10)(21,"mat-form-field",11)(22,"mat-label"),t.EFF(23,"Amount"),t.k0s(),t.nrm(24,"input",15),t.j41(25,"span",16),t.EFF(26,"\u20b9\xa0"),t.k0s(),t.DNE(27,ht,2,0,"mat-error",13)(28,gt,2,0,"mat-error",13),t.k0s(),t.j41(29,"mat-form-field",11)(30,"mat-label"),t.EFF(31,"Payment Method"),t.k0s(),t.j41(32,"mat-select",17)(33,"mat-option",18),t.EFF(34,"Credit Card"),t.k0s(),t.j41(35,"mat-option",19),t.EFF(36,"Debit Card"),t.k0s(),t.j41(37,"mat-option",20),t.EFF(38,"PayPal"),t.k0s(),t.j41(39,"mat-option",21),t.EFF(40,"UPI"),t.k0s(),t.j41(41,"mat-option",22),t.EFF(42,"Net Banking"),t.k0s(),t.j41(43,"mat-option",23),t.EFF(44,"Digital Wallet"),t.k0s()(),t.DNE(45,Ft,2,0,"mat-error",13),t.k0s()(),t.j41(46,"div",10)(47,"mat-form-field",11)(48,"mat-label"),t.EFF(49,"Transaction ID"),t.k0s(),t.nrm(50,"input",24),t.j41(51,"mat-hint"),t.EFF(52,"Leave empty to auto-generate"),t.k0s()(),t.j41(53,"mat-form-field",11)(54,"mat-label"),t.EFF(55,"Status"),t.k0s(),t.j41(56,"mat-select",25)(57,"mat-option",26),t.EFF(58,"Pending"),t.k0s(),t.j41(59,"mat-option",27),t.EFF(60,"Completed"),t.k0s(),t.j41(61,"mat-option",28),t.EFF(62,"Failed"),t.k0s(),t.j41(63,"mat-option",29),t.EFF(64,"Refunded"),t.k0s()(),t.DNE(65,Ct,2,0,"mat-error",13),t.k0s()(),t.j41(66,"div",10)(67,"mat-form-field",11)(68,"mat-label"),t.EFF(69,"Payment Date"),t.k0s(),t.nrm(70,"input",30)(71,"mat-datepicker-toggle",31)(72,"mat-datepicker",null,0),t.DNE(74,Pt,2,0,"mat-error",13),t.k0s(),t.j41(75,"mat-form-field",11)(76,"mat-label"),t.EFF(77,"Expiry Date"),t.k0s(),t.nrm(78,"input",32)(79,"mat-datepicker-toggle",31)(80,"mat-datepicker",null,1),t.j41(82,"mat-hint"),t.EFF(83,"Optional: When payment access expires"),t.k0s()()()(),t.j41(84,"div",9)(85,"h3"),t.EFF(86,"Additional Information"),t.k0s(),t.j41(87,"div",10)(88,"mat-form-field",11)(89,"mat-label"),t.EFF(90,"Created By (User ID)"),t.k0s(),t.nrm(91,"input",33),t.j41(92,"mat-hint"),t.EFF(93,"ID of user who created this payment record"),t.k0s()(),t.j41(94,"mat-form-field",11)(95,"mat-label"),t.EFF(96,"Modified By (User ID)"),t.k0s(),t.nrm(97,"input",34),t.j41(98,"mat-hint"),t.EFF(99,"ID of user who last modified this payment record"),t.k0s()()(),t.j41(100,"div",10)(101,"mat-form-field",11)(102,"mat-label"),t.EFF(103,"Comments"),t.k0s(),t.nrm(104,"textarea",35),t.j41(105,"mat-hint"),t.EFF(106,"Optional comments or notes"),t.k0s()()()(),t.j41(107,"div",36)(108,"button",37),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.onCancel())}),t.EFF(109," Cancel "),t.k0s(),t.j41(110,"button",38),t.DNE(111,kt,1,0,"mat-spinner",39)(112,Et,2,1,"span",13)(113,It,2,1,"span",13),t.k0s()()()}if(2&e){let n,r,o,s,c,I,b,T,R;const O=t.sdS(73),$=t.sdS(81),d=t.XpG();t.Y8G("formGroup",d.paymentForm),t.R7$(9),t.Y8G("ngIf",null==(n=d.paymentForm.get("loginId"))?null:n.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(r=d.paymentForm.get("loginId"))?null:r.hasError("min")),t.R7$(5),t.Y8G("ngIf",null==(o=d.paymentForm.get("courseId"))?null:o.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(s=d.paymentForm.get("courseId"))?null:s.hasError("min")),t.R7$(11),t.Y8G("ngIf",null==(c=d.paymentForm.get("amount"))?null:c.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(I=d.paymentForm.get("amount"))?null:I.hasError("min")),t.R7$(17),t.Y8G("ngIf",null==(b=d.paymentForm.get("paymentMethod"))?null:b.hasError("required")),t.R7$(20),t.Y8G("ngIf",null==(T=d.paymentForm.get("status"))?null:T.hasError("required")),t.R7$(5),t.Y8G("matDatepicker",O),t.R7$(),t.Y8G("for",O),t.R7$(3),t.Y8G("ngIf",null==(R=d.paymentForm.get("paymentDate"))?null:R.hasError("required")),t.R7$(4),t.Y8G("matDatepicker",$),t.R7$(),t.Y8G("for",$),t.R7$(31),t.Y8G("disabled",d.paymentForm.invalid||d.submitting),t.R7$(),t.Y8G("ngIf",d.submitting),t.R7$(),t.Y8G("ngIf",!d.submitting),t.R7$(),t.Y8G("ngIf",d.submitting)}}let v=(()=>{class e{fb;paymentService;userService;courseService;router;route;snackBar;paymentForm;isEditMode=!1;paymentId=null;loading=!1;submitting=!1;constructor(n,r,o,s,c,I,b){this.fb=n,this.paymentService=r,this.userService=o,this.courseService=s,this.router=c,this.route=I,this.snackBar=b,this.createForm()}ngOnInit(){this.route.params.subscribe(n=>{n.id&&(this.isEditMode=!0,this.paymentId=+n.id,this.loadPayment())})}createForm(){this.paymentForm=this.fb.group({loginId:["",[m.k0.required,m.k0.min(1)]],courseId:["",[m.k0.required,m.k0.min(1)]],amount:["",[m.k0.required,m.k0.min(.01)]],paymentMethod:["",m.k0.required],transactionId:[""],status:["pending",m.k0.required],paymentDate:[new Date,m.k0.required],expiryDate:[""],createdBy:[""],modifiedBy:[""],comments:[""]})}loadPayment(){this.paymentId&&(this.loading=!0,this.paymentService.getPaymentById(this.paymentId).subscribe({next:n=>{this.paymentForm.patchValue({loginId:n.loginId,courseId:n.courseId,amount:n.amount,paymentMethod:n.paymentMethod,transactionId:n.transactionId,status:n.status,paymentDate:n.paymentDate?new Date(n.paymentDate):new Date,expiryDate:n.expiryDate?new Date(n.expiryDate):null,createdBy:n.createdBy,modifiedBy:n.modifiedBy,comments:n.comments}),this.loading=!1},error:n=>{console.error("Error loading payment:",n),this.snackBar.open("Error loading payment details","Close",{duration:3e3}),this.loading=!1,this.goBack()}}))}onSubmit(){if(this.paymentForm.valid){this.submitting=!0;const n={...this.paymentForm.value};n.paymentDate instanceof Date&&(n.paymentDate=n.paymentDate.toISOString()),n.expiryDate instanceof Date&&(n.expiryDate=n.expiryDate.toISOString()),n.transactionId||(n.transactionId=this.generateTransactionId());const r={...n,...this.isEditMode&&{paymentId:this.paymentId}};(this.isEditMode?this.paymentService.updatePayment(this.paymentId,r):this.paymentService.createPayment(r)).subscribe({next:()=>{this.snackBar.open(this.isEditMode?"Payment updated successfully":"Payment created successfully","Close",{duration:3e3}),this.router.navigate(["/payments"])},error:s=>{console.error("Error saving payment:",s),this.snackBar.open(s.error?.message||"Error saving payment","Close",{duration:5e3}),this.submitting=!1}})}}onCancel(){this.goBack()}goBack(){this.router.navigate(["/payments"])}generateTransactionId(){return`TXN${Date.now().toString()}${Math.random().toString(36).substring(2,8)}`.toUpperCase()}static \u0275fac=function(r){return new(r||e)(t.rXU(m.ok),t.rXU(D),t.rXU(ct.D),t.rXU(dt.f),t.rXU(h.Ix),t.rXU(h.nX),t.rXU(P.UG))};static \u0275cmp=t.VBU({type:e,selectors:[["app-payment-form"]],standalone:!0,features:[t.aNF],decls:15,vars:4,consts:[["picker",""],["expiryPicker",""],[1,"container"],[1,"header"],["mat-button","",3,"click"],["class","loading-container",4,"ngIf"],["class","payment-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"loading-container"],[1,"payment-form",3,"ngSubmit","formGroup"],[1,"section"],[1,"form-row"],["appearance","fill",1,"full-width"],["matInput","","type","number","formControlName","loginId","required",""],[4,"ngIf"],["matInput","","type","number","formControlName","courseId","required",""],["matInput","","type","number","formControlName","amount","required","","step","0.01","min","0"],["matPrefix",""],["formControlName","paymentMethod","required",""],["value","credit_card"],["value","debit_card"],["value","paypal"],["value","upi"],["value","net_banking"],["value","wallet"],["matInput","","formControlName","transactionId","placeholder","Auto-generated if empty"],["formControlName","status","required",""],["value","pending"],["value","completed"],["value","failed"],["value","refunded"],["matInput","","formControlName","paymentDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["matInput","","type","number","formControlName","createdBy","min","1"],["matInput","","type","number","formControlName","modifiedBy","min","1"],["matInput","","formControlName","comments","rows","3","placeholder","Additional notes about the payment"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],["diameter","20"]],template:function(r,o){1&r&&(t.j41(0,"div",2)(1,"div",3)(2,"h1"),t.EFF(3),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){return o.goBack()}),t.j41(5,"mat-icon"),t.EFF(6,"arrow_back"),t.k0s(),t.EFF(7," Back to Payments "),t.k0s()(),t.j41(8,"mat-card")(9,"mat-card-header")(10,"mat-card-title"),t.EFF(11),t.k0s()(),t.j41(12,"mat-card-content"),t.DNE(13,pt,2,0,"div",5)(14,bt,114,18,"form",6),t.k0s()()()),2&r&&(t.R7$(3),t.JRh(o.isEditMode?"Edit Payment":"Add New Payment"),t.R7$(8),t.JRh(o.isEditMode?"Edit Payment Details":"Payment Information"),t.R7$(2),t.Y8G("ngIf",o.loading),t.R7$(),t.Y8G("ngIf",!o.loading))},dependencies:[f.MD,f.bT,m.X1,m.qT,m.me,m.Q0,m.BC,m.cb,m.YS,m.VZ,m.j4,m.JD,_.Hu,_.RN,_.m2,_.MM,_.dh,l.RG,l.rl,l.nJ,l.MV,l.TL,l.JW,l.yw,y.fS,y.fg,u.Hl,u.$z,C.Ve,C.VO,M.wT,E.X6,E.Vh,E.bZ,E.bU,M.WX,F.m_,F.An,P._T,k.D6,k.LG],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.payment-form[_ngcontent-%COMP%]{padding:20px 0}.section[_ngcontent-%COMP%]{margin-bottom:30px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;border-bottom:2px solid #e0e0e0;padding-bottom:8px}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1}.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;margin-top:30px;padding-top:20px;border-top:1px solid #e0e0e0}mat-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}mat-card-header[_ngcontent-%COMP%]{background:#f5f5f5;margin:-24px -24px 0;padding:20px 24px;border-bottom:1px solid #e0e0e0}mat-card-title[_ngcontent-%COMP%]{color:#333;font-size:1.2rem}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.mat-form-field.ng-invalid.ng-touched[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%], .mat-form-field.ng-invalid.ng-touched[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:#f44336}"]})}return e})();const xt=[{path:"",component:lt},{path:"add",component:v},{path:"edit/:id",component:v}]},3635:(L,g,i)=>{i.d(g,{f:()=>_});var f=i(5312),h=i(4438),p=i(1626);let _=(()=>{class u{http;apiUrl=`${f.c.apiUrl}/courses`;constructor(l){this.http=l}getAllCourses(){return this.http.get(this.apiUrl)}getCourseById(l){return this.http.get(`${this.apiUrl}/${l}`)}createCourse(l){return this.http.post(this.apiUrl,l)}updateCourse(l,y){return this.http.put(`${this.apiUrl}/${l}`,y)}deleteCourse(l){return this.http.delete(`${this.apiUrl}/${l}`)}static \u0275fac=function(y){return new(y||u)(h.KVO(p.Qq))};static \u0275prov=h.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);