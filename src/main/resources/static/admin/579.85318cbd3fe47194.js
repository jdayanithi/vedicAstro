"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[579],{8579:(ae,S,c)=>{c.r(S),c.d(S,{ImageLibraryModule:()=>ie});var b=c(177),X=c(4710),h=c(9417),m=c(9159),I=c(6695),t=c(4438),j=c(9888),E=c(7336),z=c(2771),D=c(1413),H=c(7786),r=c(9969),O=c(6600);const J=["mat-sort-header",""],K=["*"];function W(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",2),t.bIt("@arrowPosition.start",function(){t.eBV(e);const n=t.XpG();return t.Njj(n._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){t.eBV(e);const n=t.XpG();return t.Njj(n._disableViewStateAnimation=!1)}),t.nrm(1,"div",3),t.j41(2,"div",4),t.nrm(3,"div",5)(4,"div",6)(5,"div",7),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("@arrowOpacity",e._getArrowViewState())("@arrowPosition",e._getArrowViewState())("@allowChildren",e._getArrowDirectionState()),t.R7$(2),t.Y8G("@indicator",e._getArrowDirectionState()),t.R7$(),t.Y8G("@leftPointer",e._getArrowDirectionState()),t.R7$(),t.Y8G("@rightPointer",e._getArrowDirectionState())}}const R=new t.nKC("MAT_SORT_DEFAULT_OPTIONS");let y=(()=>{class i{get direction(){return this._direction}set direction(e){this._direction=e}constructor(e){this._defaultOptions=e,this._initializedStream=new z.m(1),this.sortables=new Map,this._stateChanges=new D.B,this.start="asc",this._direction="",this.disabled=!1,this.sortChange=new t.bkB,this.initialized=this._initializedStream}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let n=function Z(i,s){let e=["asc","desc"];return"desc"==i&&e.reverse(),s||e.push(""),e}(e.start||this.start,e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),o=n.indexOf(this.direction)+1;return o>=n.length&&(o=0),n[o]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(R,8))}}static{this.\u0275dir=t.FsC({type:i,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",t.L39],disabled:[2,"matSortDisabled","disabled",t.L39]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],standalone:!0,features:[t.GFd,t.OA$]})}}return i})();const p=O.ed.ENTERING+" "+O.r5.STANDARD_CURVE,f={indicator:(0,r.hZ)("indicator",[(0,r.wk)("active-asc, asc",(0,r.iF)({transform:"translateY(0px)"})),(0,r.wk)("active-desc, desc",(0,r.iF)({transform:"translateY(10px)"})),(0,r.kY)("active-asc <=> active-desc",(0,r.i0)(p))]),leftPointer:(0,r.hZ)("leftPointer",[(0,r.wk)("active-asc, asc",(0,r.iF)({transform:"rotate(-45deg)"})),(0,r.wk)("active-desc, desc",(0,r.iF)({transform:"rotate(45deg)"})),(0,r.kY)("active-asc <=> active-desc",(0,r.i0)(p))]),rightPointer:(0,r.hZ)("rightPointer",[(0,r.wk)("active-asc, asc",(0,r.iF)({transform:"rotate(45deg)"})),(0,r.wk)("active-desc, desc",(0,r.iF)({transform:"rotate(-45deg)"})),(0,r.kY)("active-asc <=> active-desc",(0,r.i0)(p))]),arrowOpacity:(0,r.hZ)("arrowOpacity",[(0,r.wk)("desc-to-active, asc-to-active, active",(0,r.iF)({opacity:1})),(0,r.wk)("desc-to-hint, asc-to-hint, hint",(0,r.iF)({opacity:.54})),(0,r.wk)("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",(0,r.iF)({opacity:0})),(0,r.kY)("* => asc, * => desc, * => active, * => hint, * => void",(0,r.i0)("0ms")),(0,r.kY)("* <=> *",(0,r.i0)(p))]),arrowPosition:(0,r.hZ)("arrowPosition",[(0,r.kY)("* => desc-to-hint, * => desc-to-active",(0,r.i0)(p,(0,r.i7)([(0,r.iF)({transform:"translateY(-25%)"}),(0,r.iF)({transform:"translateY(0)"})]))),(0,r.kY)("* => hint-to-desc, * => active-to-desc",(0,r.i0)(p,(0,r.i7)([(0,r.iF)({transform:"translateY(0)"}),(0,r.iF)({transform:"translateY(25%)"})]))),(0,r.kY)("* => asc-to-hint, * => asc-to-active",(0,r.i0)(p,(0,r.i7)([(0,r.iF)({transform:"translateY(25%)"}),(0,r.iF)({transform:"translateY(0)"})]))),(0,r.kY)("* => hint-to-asc, * => active-to-asc",(0,r.i0)(p,(0,r.i7)([(0,r.iF)({transform:"translateY(0)"}),(0,r.iF)({transform:"translateY(-25%)"})]))),(0,r.wk)("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",(0,r.iF)({transform:"translateY(0)"})),(0,r.wk)("hint-to-desc, active-to-desc, desc",(0,r.iF)({transform:"translateY(-25%)"})),(0,r.wk)("hint-to-asc, active-to-asc, asc",(0,r.iF)({transform:"translateY(25%)"}))]),allowChildren:(0,r.hZ)("allowChildren",[(0,r.kY)("* <=> *",[(0,r.P)("@*",(0,r.MA)(),{optional:!0})])])};let P=(()=>{class i{constructor(){this.changes=new D.B}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const q={provide:P,deps:[[new t.Xx1,new t.kdw,P]],useFactory:function Q(i){return i||new P}};let tt=(()=>{class i{get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}constructor(e,a,n,o,l,g,_,F){this._intl=e,this._changeDetectorRef=a,this._sort=n,this._columnDef=o,this._focusMonitor=l,this._elementRef=g,this._ariaDescriber=_,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this.disabled=!1,this._sortActionDescription="Sort",F?.arrowPosition&&(this.arrowPosition=F?.arrowPosition),this._handleStateChanges()}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const a=!!e;a!==this._showIndicatorHint&&(this._setIndicatorHintVisible(a),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe(),this._sortButton&&this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription)}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(e.keyCode===E.t6||e.keyCode===E.Fm)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,e)),this._sortActionDescription=e}_handleStateChanges(){this._rerenderSubscription=(0,H.h)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(P),t.rXU(t.gRc),t.rXU(y,8),t.rXU("MAT_SORT_HEADER_COLUMN_DEF",8),t.rXU(j.FN),t.rXU(t.aKT),t.rXU(j.vr,8),t.rXU(R,8))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(a,n){1&a&&t.bIt("click",function(){return n._handleClick()})("keydown",function(l){return n._handleKeydown(l)})("mouseenter",function(){return n._setIndicatorHintVisible(!0)})("mouseleave",function(){return n._setIndicatorHintVisible(!1)}),2&a&&(t.BMQ("aria-sort",n._getAriaSortAttribute()),t.AVh("mat-sort-header-disabled",n._isDisabled()))},inputs:{id:[0,"mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",disabled:[2,"disabled","disabled",t.L39],sortActionDescription:"sortActionDescription",disableClear:[2,"disableClear","disableClear",t.L39]},exportAs:["matSortHeader"],standalone:!0,features:[t.GFd,t.aNF],attrs:J,ngContentSelectors:K,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(a,n){1&a&&(t.NAR(),t.j41(0,"div",0)(1,"div",1),t.SdG(2),t.k0s(),t.DNE(3,W,6,6,"div",2),t.k0s()),2&a&&(t.AVh("mat-sort-header-sorted",n._isSorted())("mat-sort-header-position-before","before"===n.arrowPosition),t.BMQ("tabindex",n._isDisabled()?null:0)("role",n._isDisabled()?null:"button"),t.R7$(3),t.vxM(n._renderArrow()?3:-1))},styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;color:var(--mat-sort-arrow-color, var(--mat-app-on-surface));opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[f.indicator,f.leftPointer,f.rightPointer,f.arrowOpacity,f.arrowPosition,f.allowChildren]},changeDetection:0})}}return i})(),et=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({providers:[q],imports:[O.yE]})}}return i})();var x=c(5596),w=c(8834),T=c(9213),C=c(5351),v=c(2102),N=c(9631),G=c(2798),L=c(2765),M=c(9115),$=c(6471),A=c(9183),B=c(5416),V=c(4823),k=c(3902),U=c(1997),nt=c(5024),it=c(152),at=c(3294),u=c(1626),ot=c(8141),rt=c(9437),st=c(5312),d=function(i){return i.LESSON_CONTENT="LESSON_CONTENT",i.TOPIC_THUMBNAIL="TOPIC_THUMBNAIL",i.COURSE_BANNER="COURSE_BANNER",i.ILLUSTRATION="ILLUSTRATION",i.DIAGRAM="DIAGRAM",i.ICON="ICON",i.BACKGROUND="BACKGROUND",i.PROFILE="PROFILE",i.GENERAL="GENERAL",i.MARKETING="MARKETING",i}(d||{});let ct=(()=>{class i{http;baseUrl=`${st.c.apiUrl}/secure/images`;constructor(e){this.http=e}getAllImages(e=0,a=10,n="uploadDate",o="desc"){const l=(new u.Nl).set("page",e.toString()).set("size",a.toString()).set("sortBy",n).set("sortDir",o);return console.log("Making POST request to:",`${this.baseUrl}/get-all`),console.log("With params:",l.toString()),this.http.post(`${this.baseUrl}/get-all`,{},{params:l}).pipe((0,ot.M)(g=>console.log("Image library response:",g)),(0,rt.W)(g=>{throw console.error("Image library error:",g),403===g.status?console.error("Authentication required: Please log in to access the image library"):401===g.status&&console.error("Invalid or expired token: Please log in again"),g}))}getImageById(e){return this.http.get(`${this.baseUrl}/${e}`)}getImageUrl(e){return`${this.baseUrl}/${e}/view`}uploadImage(e,a){const n=new FormData;return n.append("file",e),a.title&&n.append("title",a.title),a.description&&n.append("description",a.description),a.altText&&n.append("altText",a.altText),a.tags&&n.append("tags",a.tags),a.category&&n.append("category",a.category),a.lesson?.lessonId&&n.append("lessonId",a.lesson.lessonId.toString()),a.topic?.topicId&&n.append("topicId",a.topic.topicId.toString()),a.course?.id&&n.append("courseId",a.course.id.toString()),a.uploadedBy&&n.append("uploadedBy",a.uploadedBy),this.http.post(`${this.baseUrl}/upload`,n)}uploadMultipleImages(e,a,n,o,l,g){const _=new FormData;return e.forEach(F=>{_.append("files",F)}),a&&_.append("category",a),n&&_.append("lessonId",n.toString()),o&&_.append("topicId",o.toString()),l&&_.append("courseId",l.toString()),g&&_.append("uploadedBy",g),this.http.post(`${this.baseUrl}/upload/multiple`,_)}updateImage(e,a){return this.http.put(`${this.baseUrl}/${e}`,a)}updateImageAssociations(e,a,n,o){let l=new u.Nl;return a&&(l=l.set("lessonId",a.toString())),n&&(l=l.set("topicId",n.toString())),o&&(l=l.set("courseId",o.toString())),this.http.put(`${this.baseUrl}/${e}/associations`,null,{params:l})}deleteImage(e){return this.http.delete(`${this.baseUrl}/${e}`)}disableImage(e){return this.http.put(`${this.baseUrl}/${e}/disable`,null)}deleteMultipleImages(e){return this.http.delete(`${this.baseUrl}/bulk`,{body:e})}searchImages(e,a=0,n=10){const o=(new u.Nl).set("searchTerm",e).set("page",a.toString()).set("size",n.toString());return this.http.post(`${this.baseUrl}/search`,{},{params:o})}filterImages(e){let a=(new u.Nl).set("page",(e.page||0).toString()).set("size",(e.size||10).toString());return e.category&&(a=a.set("category",e.category)),e.lessonId&&(a=a.set("lessonId",e.lessonId.toString())),e.topicId&&(a=a.set("topicId",e.topicId.toString())),e.courseId&&(a=a.set("courseId",e.courseId.toString())),e.searchTerm&&(a=a.set("searchTerm",e.searchTerm)),this.http.post(`${this.baseUrl}/filter`,{},{params:a})}getImagesByCategory(e,a=0,n=10){const o=(new u.Nl).set("page",a.toString()).set("size",n.toString());return this.http.get(`${this.baseUrl}/category/${e}`,{params:o})}getImagesByLesson(e){return this.http.get(`${this.baseUrl}/lesson/${e}`)}getImagesByTopic(e){return this.http.get(`${this.baseUrl}/topic/${e}`)}getImagesByCourse(e){return this.http.get(`${this.baseUrl}/course/${e}`)}getFeaturedImages(){return this.http.get(`${this.baseUrl}/featured`)}getRecentImages(e=10){const a=(new u.Nl).set("limit",e.toString());return this.http.get(`${this.baseUrl}/recent`,{params:a})}getOrphanedImages(){return this.http.get(`${this.baseUrl}/orphaned`)}getImageStatistics(){return this.http.get(`${this.baseUrl}/statistics`)}getImageCategories(){return this.http.get(`${this.baseUrl}/categories`)}formatFileSize(e){if(0===e)return"0 B";const o=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,o)).toFixed(2))+" "+["B","KB","MB","GB"][o]}getCategoryDisplayName(e){return{[d.LESSON_CONTENT]:"Lesson Content",[d.TOPIC_THUMBNAIL]:"Topic Thumbnail",[d.COURSE_BANNER]:"Course Banner",[d.ILLUSTRATION]:"Illustration",[d.DIAGRAM]:"Diagram",[d.ICON]:"Icon",[d.BACKGROUND]:"Background",[d.PROFILE]:"Profile",[d.GENERAL]:"General",[d.MARKETING]:"Marketing"}[e]||e}isImageFile(e){return e.type.startsWith("image/")}getFileExtension(e){return e.split(".").pop()?.toLowerCase()||""}static \u0275fac=function(a){return new(a||i)(t.KVO(u.Qq))};static \u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const lt=["uploadDialog"],gt=["imageDetailsDialog"],dt=["imagePreviewDialog"],Y=i=>({image:i});function mt(i,s){if(1&i&&(t.j41(0,"mat-option",22),t.EFF(1),t.k0s()),2&i){const e=s.$implicit,a=t.XpG();t.Y8G("value",e),t.R7$(),t.SpI(" ",a.getCategoryDisplayName(e)," ")}}function _t(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",31),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.clearFilters())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s(),t.EFF(3," Clear Filters "),t.k0s()}}function pt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",32)(1,"span",33),t.EFF(2),t.k0s(),t.j41(3,"button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.deleteSelectedImages())}),t.j41(4,"mat-icon"),t.EFF(5,"delete"),t.k0s(),t.EFF(6," Delete Selected "),t.k0s(),t.j41(7,"button",31),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.selection.clear())}),t.j41(8,"mat-icon"),t.EFF(9,"clear"),t.k0s(),t.EFF(10," Clear Selection "),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.SpI("",e.selection.selected.length," images selected")}}function ht(i,s){1&i&&(t.j41(0,"div",35),t.nrm(1,"mat-spinner",36),t.j41(2,"p"),t.EFF(3,"Loading images..."),t.k0s()())}function ut(i,s){if(1&i){const e=t.RV6();t.j41(0,"th",54)(1,"mat-checkbox",55),t.bIt("change",function(n){t.eBV(e);const o=t.XpG(2);return t.Njj(n?o.masterToggle():null)}),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(),t.Y8G("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function ft(i,s){if(1&i){const e=t.RV6();t.j41(0,"td",56)(1,"mat-checkbox",57),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())})("change",function(n){const o=t.eBV(e).$implicit,l=t.XpG(2);return t.Njj(n?l.selection.toggle(o):null)}),t.k0s()()}if(2&i){const e=s.$implicit,a=t.XpG(2);t.R7$(),t.Y8G("checked",a.selection.isSelected(e))}}function Ct(i,s){1&i&&(t.j41(0,"th",54),t.EFF(1,"Thumbnail"),t.k0s())}function Mt(i,s){if(1&i){const e=t.RV6();t.j41(0,"td",56)(1,"div",58),t.bIt("click",function(){const n=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.previewImage(n))}),t.j41(2,"img",59),t.bIt("error",function(n){t.eBV(e);const o=t.XpG(2);return t.Njj(o.onImageError(n))}),t.k0s()()()}if(2&i){const e=s.$implicit,a=t.XpG(2);t.R7$(2),t.Y8G("src",a.getImageUrl(e),t.B4B)("alt",e.altText||e.fileName)}}function bt(i,s){1&i&&(t.j41(0,"th",60),t.EFF(1,"File Name"),t.k0s())}function Ot(i,s){if(1&i&&(t.j41(0,"td",56)(1,"div",61)(2,"span",62),t.EFF(3),t.k0s(),t.j41(4,"small",63),t.EFF(5),t.k0s()()()),2&i){const e=s.$implicit,a=t.XpG(2);t.R7$(2),t.Y8G("matTooltip",e.originalName),t.R7$(),t.JRh(e.fileName),t.R7$(2),t.JRh(a.getFileExtension(e.fileName))}}function Pt(i,s){1&i&&(t.j41(0,"th",60),t.EFF(1,"Title"),t.k0s())}function vt(i,s){if(1&i&&(t.j41(0,"small",67),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.description)}}function Ft(i,s){if(1&i&&(t.j41(0,"td",56)(1,"div",64)(2,"span",65),t.EFF(3),t.k0s(),t.DNE(4,vt,2,1,"small",66),t.k0s()()),2&i){const e=s.$implicit;t.R7$(3),t.JRh(e.title||"Untitled"),t.R7$(),t.Y8G("ngIf",e.description)}}function It(i,s){1&i&&(t.j41(0,"th",60),t.EFF(1,"Category"),t.k0s())}function yt(i,s){if(1&i&&(t.j41(0,"td",56)(1,"mat-chip",68),t.EFF(2),t.k0s()()),2&i){const e=s.$implicit,a=t.XpG(2);t.R7$(2),t.JRh(a.getCategoryDisplayName(e.category))}}function xt(i,s){1&i&&(t.j41(0,"th",54),t.EFF(1,"Dimensions"),t.k0s())}function wt(i,s){if(1&i&&(t.j41(0,"td",56),t.EFF(1),t.k0s()),2&i){const e=s.$implicit,a=t.XpG(2);t.R7$(),t.JRh(a.getDimensions(e))}}function kt(i,s){1&i&&(t.j41(0,"th",60),t.EFF(1,"Size"),t.k0s())}function St(i,s){if(1&i&&(t.j41(0,"td",56),t.EFF(1),t.k0s()),2&i){const e=s.$implicit,a=t.XpG(2);t.R7$(),t.JRh(a.formatFileSize(e.fileSize))}}function jt(i,s){1&i&&(t.j41(0,"th",60),t.EFF(1,"Upload Date"),t.k0s())}function Et(i,s){if(1&i&&(t.j41(0,"td",56),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.uploadDate,"medium"))}}function Dt(i,s){1&i&&(t.j41(0,"th",54),t.EFF(1,"Actions"),t.k0s())}function Rt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",14),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(3);return t.Njj(o.previewImage(n))}),t.j41(1,"mat-icon"),t.EFF(2,"visibility"),t.k0s(),t.EFF(3," Preview "),t.k0s(),t.j41(4,"button",14),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(3);return t.Njj(o.viewImageDetails(n))}),t.j41(5,"mat-icon"),t.EFF(6,"info"),t.k0s(),t.EFF(7," Details "),t.k0s(),t.j41(8,"button",14),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(3);return t.Njj(o.editImage(n))}),t.j41(9,"mat-icon"),t.EFF(10,"edit"),t.k0s(),t.EFF(11," Edit "),t.k0s(),t.j41(12,"button",14),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(3);return t.Njj(o.toggleImageFeatured(n))}),t.j41(13,"mat-icon"),t.EFF(14),t.k0s(),t.EFF(15),t.k0s(),t.nrm(16,"mat-divider"),t.j41(17,"button",72),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(3);return t.Njj(o.deleteImage(n))}),t.j41(18,"mat-icon"),t.EFF(19,"delete"),t.k0s(),t.EFF(20," Delete "),t.k0s()}if(2&i){const e=s.image;t.R7$(14),t.JRh(e.isFeatured?"star":"star_border"),t.R7$(),t.SpI(" ",e.isFeatured?"Unfeature":"Feature"," ")}}function Tt(i,s){if(1&i&&(t.j41(0,"td",56)(1,"div",69)(2,"button",70)(3,"mat-icon"),t.EFF(4,"more_vert"),t.k0s()(),t.j41(5,"mat-menu",null,4),t.DNE(7,Rt,21,2,"ng-template",71),t.k0s()()()),2&i){const e=s.$implicit,a=t.sdS(6);t.R7$(2),t.Y8G("matMenuTriggerFor",a)("matMenuTriggerData",t.eq3(2,Y,e))}}function Nt(i,s){1&i&&t.nrm(0,"tr",73)}function Gt(i,s){1&i&&t.nrm(0,"tr",74)}function Lt(i,s){1&i&&(t.j41(0,"p"),t.EFF(1,"Try adjusting your filters or search criteria."),t.k0s())}function $t(i,s){1&i&&(t.j41(0,"p"),t.EFF(1,"Upload your first image to get started."),t.k0s())}function At(i,s){if(1&i&&(t.j41(0,"div",75)(1,"mat-icon"),t.EFF(2,"photo_library"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No images found"),t.k0s(),t.DNE(5,Lt,2,0,"p",76)(6,$t,2,0,"p",76),t.k0s()),2&i){const e=t.XpG(2);t.R7$(5),t.Y8G("ngIf",e.hasFilters()),t.R7$(),t.Y8G("ngIf",!e.hasFilters())}}function Bt(i,s){if(1&i&&(t.j41(0,"div",37)(1,"table",38),t.qex(2,39),t.DNE(3,ut,2,2,"th",40)(4,ft,2,1,"td",41),t.bVm(),t.qex(5,42),t.DNE(6,Ct,2,0,"th",40)(7,Mt,3,2,"td",41),t.bVm(),t.qex(8,43),t.DNE(9,bt,2,0,"th",44)(10,Ot,6,3,"td",41),t.bVm(),t.qex(11,45),t.DNE(12,Pt,2,0,"th",44)(13,Ft,5,2,"td",41),t.bVm(),t.qex(14,46),t.DNE(15,It,2,0,"th",44)(16,yt,3,1,"td",41),t.bVm(),t.qex(17,47),t.DNE(18,xt,2,0,"th",40)(19,wt,2,1,"td",41),t.bVm(),t.qex(20,48),t.DNE(21,kt,2,0,"th",44)(22,St,2,1,"td",41),t.bVm(),t.qex(23,49),t.DNE(24,jt,2,0,"th",44)(25,Et,3,4,"td",41),t.bVm(),t.qex(26,50),t.DNE(27,Dt,2,0,"th",40)(28,Tt,8,4,"td",41),t.bVm(),t.DNE(29,Nt,1,0,"tr",51)(30,Gt,1,0,"tr",52),t.k0s(),t.DNE(31,At,7,2,"div",53),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("dataSource",e.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("ngIf",0===e.dataSource.data.length)}}function Vt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",80)(1,"mat-card")(2,"div",81)(3,"mat-checkbox",82),t.bIt("change",function(n){const o=t.eBV(e).$implicit,l=t.XpG(2);return t.Njj(n?l.selection.toggle(o):null)}),t.k0s(),t.j41(4,"button",70)(5,"mat-icon"),t.EFF(6,"more_vert"),t.k0s()()(),t.j41(7,"div",83),t.bIt("click",function(){const n=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.previewImage(n))}),t.j41(8,"img",84),t.bIt("error",function(n){t.eBV(e);const o=t.XpG(2);return t.Njj(o.onImageError(n))}),t.k0s(),t.j41(9,"div",85)(10,"mat-icon"),t.EFF(11,"visibility"),t.k0s()()(),t.j41(12,"mat-card-content")(13,"h3",86),t.EFF(14),t.k0s(),t.j41(15,"div",87)(16,"mat-chip",68),t.EFF(17),t.k0s(),t.j41(18,"span",88),t.EFF(19),t.k0s()(),t.j41(20,"div",89)(21,"span",90),t.EFF(22),t.k0s(),t.j41(23,"span",91),t.EFF(24),t.nI1(25,"date"),t.k0s()()()()()}if(2&i){const e=s.$implicit;t.XpG();const a=t.sdS(4),n=t.XpG();t.R7$(3),t.Y8G("checked",n.selection.isSelected(e)),t.R7$(),t.Y8G("matMenuTriggerFor",a)("matMenuTriggerData",t.eq3(14,Y,e)),t.R7$(4),t.Y8G("src",n.getImageUrl(e),t.B4B)("alt",e.altText||e.fileName),t.R7$(5),t.Y8G("matTooltip",e.title||e.fileName),t.R7$(),t.SpI(" ",e.title||e.fileName," "),t.R7$(3),t.JRh(n.getCategoryDisplayName(e.category)),t.R7$(2),t.JRh(n.formatFileSize(e.fileSize)),t.R7$(3),t.JRh(n.getDimensions(e)),t.R7$(2),t.JRh(t.i5U(25,11,e.uploadDate,"short"))}}function Ut(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",14),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(2);return t.Njj(o.previewImage(n))}),t.j41(1,"mat-icon"),t.EFF(2,"visibility"),t.k0s(),t.EFF(3," Preview "),t.k0s(),t.j41(4,"button",14),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(2);return t.Njj(o.viewImageDetails(n))}),t.j41(5,"mat-icon"),t.EFF(6,"info"),t.k0s(),t.EFF(7," Details "),t.k0s(),t.j41(8,"button",14),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(2);return t.Njj(o.editImage(n))}),t.j41(9,"mat-icon"),t.EFF(10,"edit"),t.k0s(),t.EFF(11," Edit "),t.k0s(),t.j41(12,"button",14),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(2);return t.Njj(o.toggleImageFeatured(n))}),t.j41(13,"mat-icon"),t.EFF(14),t.k0s(),t.EFF(15),t.k0s(),t.nrm(16,"mat-divider"),t.j41(17,"button",72),t.bIt("click",function(){const n=t.eBV(e).image,o=t.XpG(2);return t.Njj(o.deleteImage(n))}),t.j41(18,"mat-icon"),t.EFF(19,"delete"),t.k0s(),t.EFF(20," Delete "),t.k0s()}if(2&i){const e=s.image;t.R7$(14),t.JRh(e.isFeatured?"star":"star_border"),t.R7$(),t.SpI(" ",e.isFeatured?"Unfeature":"Feature"," ")}}function Yt(i,s){if(1&i&&(t.j41(0,"div",77)(1,"div",78),t.DNE(2,Vt,26,16,"div",79),t.k0s(),t.j41(3,"mat-menu",null,5),t.DNE(5,Ut,21,2,"ng-template",71),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.dataSource.data)}}function Xt(i,s){if(1&i&&(t.j41(0,"div",116)(1,"mat-icon"),t.EFF(2,"image"),t.k0s(),t.j41(3,"span",117),t.EFF(4),t.k0s(),t.j41(5,"span",88),t.EFF(6),t.k0s()()),2&i){const e=s.$implicit,a=t.XpG(3);t.R7$(4),t.JRh(e.name),t.R7$(2),t.JRh(a.formatFileSize(e.size))}}function zt(i,s){if(1&i&&(t.j41(0,"div",113)(1,"h4"),t.EFF(2),t.k0s(),t.j41(3,"div",114),t.DNE(4,Xt,7,2,"div",115),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.SpI("Selected Files (",e.selectedFiles.length,")"),t.R7$(2),t.Y8G("ngForOf",e.selectedFiles)}}function Ht(i,s){if(1&i&&(t.j41(0,"mat-option",22),t.EFF(1),t.k0s()),2&i){const e=s.$implicit,a=t.XpG(2);t.Y8G("value",e),t.R7$(),t.SpI(" ",a.getCategoryDisplayName(e)," ")}}function Jt(i,s){1&i&&t.nrm(0,"mat-spinner",118)}function Kt(i,s){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"cloud_upload"),t.k0s())}function Wt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",92)(1,"h2",93)(2,"mat-icon"),t.EFF(3,"cloud_upload"),t.k0s(),t.EFF(4," Upload Images "),t.k0s(),t.j41(5,"mat-dialog-content")(6,"div",94)(7,"div",95)(8,"input",96,6),t.bIt("change",function(n){t.eBV(e);const o=t.XpG();return t.Njj(o.onFilesSelected(n))}),t.k0s(),t.j41(10,"div",97),t.bIt("click",function(){t.eBV(e);const n=t.sdS(9);return t.Njj(n.click())})("dragover",function(n){return t.eBV(e),t.Njj(n.preventDefault())})("drop",function(n){t.eBV(e);const o=t.XpG();return n.preventDefault(),t.Njj(o.onFilesSelected(n))}),t.j41(11,"mat-icon",98),t.EFF(12,"cloud_upload"),t.k0s(),t.j41(13,"h3"),t.EFF(14,"Drop images here or click to select"),t.k0s(),t.j41(15,"p"),t.EFF(16,"Supports JPEG, PNG, GIF, WebP formats"),t.k0s()()(),t.DNE(17,zt,5,2,"div",99),t.j41(18,"div",100)(19,"h4"),t.EFF(20,"Image Details"),t.k0s(),t.j41(21,"mat-form-field",101)(22,"mat-label"),t.EFF(23,"Category"),t.k0s(),t.j41(24,"mat-select",102),t.mxI("valueChange",function(n){t.eBV(e);const o=t.XpG();return t.DH7(o.uploadMetadata.category,n)||(o.uploadMetadata.category=n),t.Njj(n)}),t.DNE(25,Ht,2,2,"mat-option",23),t.k0s()(),t.j41(26,"mat-form-field",101)(27,"mat-label"),t.EFF(28,"Title (optional)"),t.k0s(),t.j41(29,"input",103),t.mxI("ngModelChange",function(n){t.eBV(e);const o=t.XpG();return t.DH7(o.uploadMetadata.title,n)||(o.uploadMetadata.title=n),t.Njj(n)}),t.k0s()(),t.j41(30,"mat-form-field",101)(31,"mat-label"),t.EFF(32,"Description (optional)"),t.k0s(),t.j41(33,"textarea",104),t.mxI("ngModelChange",function(n){t.eBV(e);const o=t.XpG();return t.DH7(o.uploadMetadata.description,n)||(o.uploadMetadata.description=n),t.Njj(n)}),t.EFF(34,"            "),t.k0s()(),t.j41(35,"mat-form-field",101)(36,"mat-label"),t.EFF(37,"Alt Text (optional)"),t.k0s(),t.j41(38,"input",105),t.mxI("ngModelChange",function(n){t.eBV(e);const o=t.XpG();return t.DH7(o.uploadMetadata.altText,n)||(o.uploadMetadata.altText=n),t.Njj(n)}),t.k0s()(),t.j41(39,"mat-form-field",101)(40,"mat-label"),t.EFF(41,"Tags (optional)"),t.k0s(),t.j41(42,"input",106),t.mxI("ngModelChange",function(n){t.eBV(e);const o=t.XpG();return t.DH7(o.uploadMetadata.tags,n)||(o.uploadMetadata.tags=n),t.Njj(n)}),t.k0s()(),t.j41(43,"div",107)(44,"mat-checkbox",108),t.mxI("ngModelChange",function(n){t.eBV(e);const o=t.XpG();return t.DH7(o.uploadMetadata.isPublic,n)||(o.uploadMetadata.isPublic=n),t.Njj(n)}),t.EFF(45,"Make images public"),t.k0s(),t.j41(46,"mat-checkbox",108),t.mxI("ngModelChange",function(n){t.eBV(e);const o=t.XpG();return t.DH7(o.uploadMetadata.isFeatured,n)||(o.uploadMetadata.isFeatured=n),t.Njj(n)}),t.EFF(47,"Mark as featured"),t.k0s()()()()(),t.j41(48,"mat-dialog-actions",109)(49,"button",110),t.EFF(50,"Cancel"),t.k0s(),t.j41(51,"button",111),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.uploadImages())}),t.DNE(52,Jt,1,0,"mat-spinner",112)(53,Kt,2,0,"mat-icon",76),t.EFF(54),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(17),t.Y8G("ngIf",e.selectedFiles.length>0),t.R7$(7),t.R50("value",e.uploadMetadata.category),t.R7$(),t.Y8G("ngForOf",e.categories),t.R7$(4),t.R50("ngModel",e.uploadMetadata.title),t.R7$(4),t.R50("ngModel",e.uploadMetadata.description),t.R7$(5),t.R50("ngModel",e.uploadMetadata.altText),t.R7$(4),t.R50("ngModel",e.uploadMetadata.tags),t.R7$(2),t.R50("ngModel",e.uploadMetadata.isPublic),t.R7$(2),t.R50("ngModel",e.uploadMetadata.isFeatured),t.R7$(5),t.Y8G("disabled",0===e.selectedFiles.length||e.isUploading),t.R7$(),t.Y8G("ngIf",e.isUploading),t.R7$(),t.Y8G("ngIf",!e.isUploading),t.R7$(),t.SpI(" ",e.isUploading?"Uploading...":"Upload Images"," ")}}function Zt(i,s){if(1&i&&(t.j41(0,"mat-list-item")(1,"mat-icon",125),t.EFF(2,"label"),t.k0s(),t.j41(3,"div",126),t.EFF(4),t.k0s()()),2&i){const e=t.XpG(3);t.R7$(4),t.SpI("Tags: ",e.selectedImage.tags,"")}}function Qt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",120)(1,"h2",93)(2,"mat-icon"),t.EFF(3,"info"),t.k0s(),t.EFF(4," Image Details "),t.k0s(),t.j41(5,"mat-dialog-content")(6,"div",121)(7,"div",122),t.nrm(8,"img",123),t.k0s(),t.j41(9,"div",124)(10,"mat-list")(11,"mat-list-item")(12,"mat-icon",125),t.EFF(13,"title"),t.k0s(),t.j41(14,"div",126),t.EFF(15),t.k0s()(),t.j41(16,"mat-list-item")(17,"mat-icon",125),t.EFF(18,"description"),t.k0s(),t.j41(19,"div",126),t.EFF(20),t.k0s()(),t.j41(21,"mat-list-item")(22,"mat-icon",125),t.EFF(23,"folder"),t.k0s(),t.j41(24,"div",126),t.EFF(25),t.k0s()(),t.j41(26,"mat-list-item")(27,"mat-icon",125),t.EFF(28,"storage"),t.k0s(),t.j41(29,"div",126),t.EFF(30),t.k0s()(),t.j41(31,"mat-list-item")(32,"mat-icon",125),t.EFF(33,"aspect_ratio"),t.k0s(),t.j41(34,"div",126),t.EFF(35),t.k0s()(),t.j41(36,"mat-list-item")(37,"mat-icon",125),t.EFF(38,"category"),t.k0s(),t.j41(39,"div",126),t.EFF(40),t.k0s()(),t.j41(41,"mat-list-item")(42,"mat-icon",125),t.EFF(43,"schedule"),t.k0s(),t.j41(44,"div",126),t.EFF(45),t.nI1(46,"date"),t.k0s()(),t.j41(47,"mat-list-item")(48,"mat-icon",125),t.EFF(49,"person"),t.k0s(),t.j41(50,"div",126),t.EFF(51),t.k0s()(),t.DNE(52,Zt,5,1,"mat-list-item",76),t.k0s()()()(),t.j41(53,"mat-dialog-actions",109)(54,"button",110),t.EFF(55,"Close"),t.k0s(),t.j41(56,"button",12),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.editImage(n.selectedImage))}),t.j41(57,"mat-icon"),t.EFF(58,"edit"),t.k0s(),t.EFF(59," Edit "),t.k0s()()()}if(2&i){const e=t.XpG(2);t.R7$(8),t.Y8G("src",e.getImageUrl(e.selectedImage),t.B4B)("alt",e.selectedImage.altText||e.selectedImage.fileName),t.R7$(7),t.SpI("Title: ",e.selectedImage.title||"Untitled",""),t.R7$(5),t.SpI("Description: ",e.selectedImage.description||"No description",""),t.R7$(5),t.SpI("File Name: ",e.selectedImage.fileName,""),t.R7$(5),t.SpI("File Size: ",e.formatFileSize(e.selectedImage.fileSize),""),t.R7$(5),t.SpI("Dimensions: ",e.getDimensions(e.selectedImage),""),t.R7$(5),t.SpI("Category: ",e.getCategoryDisplayName(e.selectedImage.category),""),t.R7$(5),t.SpI("Upload Date: ",t.i5U(46,11,e.selectedImage.uploadDate,"full"),""),t.R7$(6),t.SpI("Uploaded By: ",e.selectedImage.uploadedBy,""),t.R7$(),t.Y8G("ngIf",e.selectedImage.tags)}}function qt(i,s){if(1&i&&t.DNE(0,Qt,60,14,"div",119),2&i){const e=t.XpG();t.Y8G("ngIf",e.selectedImage)}}function te(i,s){if(1&i&&(t.j41(0,"div",128)(1,"div",129)(2,"h2"),t.EFF(3),t.k0s(),t.j41(4,"button",130)(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",131),t.nrm(8,"img",132),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(3),t.JRh(e.selectedImage.title||e.selectedImage.fileName),t.R7$(5),t.Y8G("src",e.getImageUrl(e.selectedImage),t.B4B)("alt",e.selectedImage.altText||e.selectedImage.fileName)}}function ee(i,s){if(1&i&&t.DNE(0,te,9,3,"div",127),2&i){const e=t.XpG();t.Y8G("ngIf",e.selectedImage)}}const ne=[{path:"",component:(()=>{class i{imageService;dialog;snackBar;paginator;sort;uploadDialog;imageDetailsDialog;imagePreviewDialog;displayedColumns=["select","thumbnail","fileName","title","category","dimensions","fileSize","uploadDate","actions"];dataSource=new m.I6;selection=new nt.CB(!0,[]);totalElements=0;pageSize=10;currentPage=0;pageSizeOptions=[5,10,25,50];searchControl=new h.MJ("");categoryFilter=null;lessonFilter=null;topicFilter=null;courseFilter=null;categories=Object.values(d);isLoading=!1;isUploading=!1;selectedImage=null;selectedFiles=[];uploadMetadata={category:d.GENERAL,isPublic:!0,isFeatured:!1};viewMode="table";constructor(e,a,n){this.imageService=e,this.dialog=a,this.snackBar=n}ngOnInit(){this.loadImages(),this.setupSearchFilter()}setupSearchFilter(){this.searchControl.valueChanges.pipe((0,it.B)(300),(0,at.F)()).subscribe(()=>{this.currentPage=0,this.loadImages()})}loadImages(){this.isLoading=!0,this.hasFilters()?this.loadFilteredImages():this.loadAllImages()}loadAllImages(){this.imageService.getAllImages(this.currentPage,this.pageSize,"uploadDate","desc").subscribe({next:e=>{this.dataSource.data=e.content,this.totalElements=e.totalElements,this.isLoading=!1},error:e=>{console.error("Error loading images:",e),this.showError(403===e.status?"Access denied. Please ensure you are logged in with admin privileges.":401===e.status?"Authentication required. Please log in again.":"Failed to load images"),this.isLoading=!1}})}loadFilteredImages(){this.imageService.filterImages({category:this.categoryFilter||void 0,lessonId:this.lessonFilter||void 0,topicId:this.topicFilter||void 0,courseId:this.courseFilter||void 0,searchTerm:this.searchControl.value||void 0,page:this.currentPage,size:this.pageSize}).subscribe({next:a=>{this.dataSource.data=a.content,this.totalElements=a.totalElements,this.isLoading=!1},error:a=>{console.error("Error filtering images:",a),this.showError(403===a.status?"Access denied. Please ensure you are logged in with admin privileges.":401===a.status?"Authentication required. Please log in again.":"Failed to filter images"),this.isLoading=!1}})}hasFilters(){return!!(this.searchControl.value||this.categoryFilter||this.lessonFilter||this.topicFilter||this.courseFilter)}clearFilters(){this.searchControl.setValue(""),this.categoryFilter=null,this.lessonFilter=null,this.topicFilter=null,this.courseFilter=null,this.currentPage=0,this.loadImages()}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.loadImages()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}openUploadDialog(){this.selectedFiles=[],this.uploadMetadata={category:d.GENERAL,isPublic:!0,isFeatured:!1},this.dialog.open(this.uploadDialog,{width:"600px",maxHeight:"90vh"})}onFilesSelected(e){const a=Array.from(e.target.files);this.selectedFiles=a.filter(n=>this.imageService.isImageFile(n)),this.selectedFiles.length!==a.length&&this.showWarning("Some files were filtered out. Only image files are allowed.")}uploadImages(){0!==this.selectedFiles.length?(this.isUploading=!0,1===this.selectedFiles.length?this.imageService.uploadImage(this.selectedFiles[0],this.uploadMetadata).subscribe({next:e=>{this.showSuccess("Image uploaded successfully"),this.loadImages(),this.dialog.closeAll(),this.isUploading=!1},error:e=>{console.error("Upload error:",e),this.showError("Failed to upload image"),this.isUploading=!1}}):this.imageService.uploadMultipleImages(this.selectedFiles,this.uploadMetadata.category,this.uploadMetadata.lesson?.lessonId,this.uploadMetadata.topic?.topicId,this.uploadMetadata.course?.id,"admin").subscribe({next:e=>{this.showSuccess(`${e.length} images uploaded successfully`),this.loadImages(),this.dialog.closeAll(),this.isUploading=!1},error:e=>{console.error("Upload error:",e),this.showError("Failed to upload images"),this.isUploading=!1}})):this.showWarning("Please select at least one image file")}viewImageDetails(e){this.selectedImage=e,this.dialog.open(this.imageDetailsDialog,{width:"800px",maxHeight:"90vh"})}previewImage(e){this.selectedImage=e,this.dialog.open(this.imagePreviewDialog,{width:"90vw",height:"90vh",maxWidth:"1200px",panelClass:"image-preview-dialog"})}editImage(e){console.log("Edit image:",e)}deleteImage(e){confirm(`Are you sure you want to delete "${e.fileName}"?`)&&this.imageService.deleteImage(e.imageId).subscribe({next:()=>{this.showSuccess("Image deleted successfully"),this.loadImages()},error:a=>{console.error("Delete error:",a),this.showError("Failed to delete image")}})}deleteSelectedImages(){const e=this.selection.selected.map(a=>a.imageId);0!==e.length?confirm(`Are you sure you want to delete ${e.length} selected images?`)&&this.imageService.deleteMultipleImages(e).subscribe({next:()=>{this.showSuccess(`${e.length} images deleted successfully`),this.selection.clear(),this.loadImages()},error:a=>{console.error("Bulk delete error:",a),this.showError("Failed to delete selected images")}}):this.showWarning("Please select images to delete")}toggleImageFeatured(e){const a={...e,isFeatured:!e.isFeatured};this.imageService.updateImage(e.imageId,a).subscribe({next:()=>{e.isFeatured=!e.isFeatured,this.showSuccess(`Image ${e.isFeatured?"featured":"unfeatured"} successfully`)},error:n=>{console.error("Update error:",n),this.showError("Failed to update image")}})}getImageUrl(e){return this.imageService.getImageUrl(e.imageId)}formatFileSize(e){return this.imageService.formatFileSize(e)}getCategoryDisplayName(e){return this.imageService.getCategoryDisplayName(e)}getDimensions(e){return e.width&&e.height?`${e.width} \xd7 ${e.height}`:"Unknown"}getFileExtension(e){return this.imageService.getFileExtension(e)}showSuccess(e){this.snackBar.open(e,"Close",{duration:3e3,panelClass:["success-snackbar"]})}showError(e){this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"]})}showWarning(e){this.snackBar.open(e,"Close",{duration:4e3,panelClass:["warning-snackbar"]})}toggleViewMode(){this.viewMode="table"===this.viewMode?"grid":"table"}onImageError(e){const a=e.target;a.style.display="none";const n=a.parentElement;if(n&&!n.querySelector(".broken-image-icon")){const o=document.createElement("mat-icon");o.className="broken-image-icon",o.textContent="broken_image",o.style.fontSize="48px",o.style.color="#ccc",n.appendChild(o)}}static \u0275fac=function(a){return new(a||i)(t.rXU(ct),t.rXU(C.bZ),t.rXU(B.UG))};static \u0275cmp=t.VBU({type:i,selectors:[["app-image-library"]],viewQuery:function(a,n){if(1&a&&(t.GBs(I.iy,5),t.GBs(y,5),t.GBs(lt,5),t.GBs(gt,5),t.GBs(dt,5)),2&a){let o;t.mGM(o=t.lsd())&&(n.paginator=o.first),t.mGM(o=t.lsd())&&(n.sort=o.first),t.mGM(o=t.lsd())&&(n.uploadDialog=o.first),t.mGM(o=t.lsd())&&(n.imageDetailsDialog=o.first),t.mGM(o=t.lsd())&&(n.imagePreviewDialog=o.first)}},decls:51,vars:16,consts:[["viewMenu","matMenu"],["uploadDialog",""],["imageDetailsDialog",""],["imagePreviewDialog",""],["actionMenu","matMenu"],["gridActionMenu","matMenu"],["fileInput",""],[1,"image-library-container"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-icon-button","","matTooltip","View Options",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"filters-card"],[1,"filters-row"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name, title, or tags",3,"formControl"],["matSuffix",""],["appearance","outline"],[3,"valueChange","selectionChange","value"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","",3,"click",4,"ngIf"],["class","bulk-actions",4,"ngIf"],[1,"content-card"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["class","grid-container",4,"ngIf"],["showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions","pageIndex"],["mat-stroked-button","",3,"click"],[1,"bulk-actions"],[1,"selection-info"],["mat-stroked-button","","color","warn",3,"click"],[1,"loading-container"],["diameter","50"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","thumbnail"],["matColumnDef","fileName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","title"],["matColumnDef","category"],["matColumnDef","dimensions"],["matColumnDef","fileSize"],["matColumnDef","uploadDate"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data",4,"ngIf"],["mat-header-cell",""],[3,"change","checked","indeterminate"],["mat-cell",""],[3,"click","change","checked"],[1,"thumbnail-container",3,"click"],[1,"thumbnail-image",3,"error","src","alt"],["mat-header-cell","","mat-sort-header",""],[1,"file-info"],[1,"file-name",3,"matTooltip"],[1,"file-extension"],[1,"title-info"],[1,"title"],["class","description",4,"ngIf"],[1,"description"],[1,"category-chip"],[1,"action-buttons"],["mat-icon-button","",3,"matMenuTriggerFor","matMenuTriggerData"],["matMenuContent",""],["mat-menu-item","",1,"delete-action",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"],[4,"ngIf"],[1,"grid-container"],[1,"image-grid"],["class","image-card",4,"ngFor","ngForOf"],[1,"image-card"],[1,"card-header"],[3,"change","checked"],[1,"image-container",3,"click"],[1,"grid-image",3,"error","src","alt"],[1,"image-overlay"],[1,"image-title",3,"matTooltip"],[1,"image-meta"],[1,"file-size"],[1,"image-info"],[1,"dimensions"],[1,"upload-date"],[1,"upload-dialog"],["mat-dialog-title",""],[1,"upload-content"],[1,"file-selection"],["type","file","multiple","","accept","image/*",2,"display","none",3,"change"],[1,"drop-zone",3,"click","dragover","drop"],[1,"upload-icon"],["class","selected-files",4,"ngIf"],[1,"upload-metadata"],["appearance","outline",1,"full-width"],[3,"valueChange","value"],["matInput","","placeholder","Image title",3,"ngModelChange","ngModel"],["matInput","","rows","3","placeholder","Image description",3,"ngModelChange","ngModel"],["matInput","","placeholder","Alternative text for accessibility",3,"ngModelChange","ngModel"],["matInput","","placeholder","Comma-separated tags",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[3,"ngModelChange","ngModel"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","20",4,"ngIf"],[1,"selected-files"],[1,"file-list"],["class","file-item",4,"ngFor","ngForOf"],[1,"file-item"],[1,"file-name"],["diameter","20"],["class","image-details-dialog",4,"ngIf"],[1,"image-details-dialog"],[1,"details-content"],[1,"image-preview"],[1,"preview-image",3,"src","alt"],[1,"details-info"],["matListIcon",""],["matLine",""],["class","image-preview-dialog",4,"ngIf"],[1,"image-preview-dialog"],[1,"preview-header"],["mat-icon-button","","mat-dialog-close",""],[1,"preview-content"],[1,"full-preview-image",3,"src","alt"]],template:function(a,n){if(1&a){const o=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"h1",10)(4,"mat-icon"),t.EFF(5,"photo_library"),t.k0s(),t.EFF(6," Image Library "),t.k0s(),t.j41(7,"div",11)(8,"button",12),t.bIt("click",function(){return t.eBV(o),t.Njj(n.openUploadDialog())}),t.j41(9,"mat-icon"),t.EFF(10,"cloud_upload"),t.k0s(),t.EFF(11," Upload Images "),t.k0s(),t.j41(12,"button",13)(13,"mat-icon"),t.EFF(14,"view_module"),t.k0s()(),t.j41(15,"mat-menu",null,0)(17,"button",14),t.bIt("click",function(){return t.eBV(o),t.Njj(n.toggleViewMode())}),t.j41(18,"mat-icon"),t.EFF(19),t.k0s(),t.EFF(20),t.k0s()()()()(),t.j41(21,"mat-card",15)(22,"mat-card-content")(23,"div",16)(24,"mat-form-field",17)(25,"mat-label"),t.EFF(26,"Search images..."),t.k0s(),t.nrm(27,"input",18),t.j41(28,"mat-icon",19),t.EFF(29,"search"),t.k0s()(),t.j41(30,"mat-form-field",20)(31,"mat-label"),t.EFF(32,"Category"),t.k0s(),t.j41(33,"mat-select",21),t.mxI("valueChange",function(g){return t.eBV(o),t.DH7(n.categoryFilter,g)||(n.categoryFilter=g),t.Njj(g)}),t.bIt("selectionChange",function(){return t.eBV(o),t.Njj(n.loadImages())}),t.j41(34,"mat-option",22),t.EFF(35,"All Categories"),t.k0s(),t.DNE(36,mt,2,2,"mat-option",23),t.k0s()(),t.DNE(37,_t,4,0,"button",24),t.k0s()()(),t.DNE(38,pt,11,1,"div",25),t.j41(39,"mat-card",26)(40,"mat-card-content"),t.DNE(41,ht,4,0,"div",27)(42,Bt,32,4,"div",28)(43,Yt,6,1,"div",29),t.j41(44,"mat-paginator",30),t.bIt("page",function(g){return t.eBV(o),t.Njj(n.onPageChange(g))}),t.k0s()()()(),t.DNE(45,Wt,55,13,"ng-template",null,1,t.C5r)(47,qt,1,1,"ng-template",null,2,t.C5r)(49,ee,1,1,"ng-template",null,3,t.C5r)}if(2&a){const o=t.sdS(16);t.R7$(12),t.Y8G("matMenuTriggerFor",o),t.R7$(7),t.JRh("table"===n.viewMode?"grid_view":"table_rows"),t.R7$(),t.SpI(" ","table"===n.viewMode?"Grid View":"Table View"," "),t.R7$(7),t.Y8G("formControl",n.searchControl),t.R7$(6),t.R50("value",n.categoryFilter),t.R7$(),t.Y8G("value",null),t.R7$(2),t.Y8G("ngForOf",n.categories),t.R7$(),t.Y8G("ngIf",n.hasFilters()),t.R7$(),t.Y8G("ngIf",n.selection.selected.length>0),t.R7$(3),t.Y8G("ngIf",n.isLoading),t.R7$(),t.Y8G("ngIf",!n.isLoading&&"table"===n.viewMode),t.R7$(),t.Y8G("ngIf",!n.isLoading&&"grid"===n.viewMode),t.R7$(),t.Y8G("length",n.totalElements)("pageSize",n.pageSize)("pageSizeOptions",n.pageSizeOptions)("pageIndex",n.currentPage)}},dependencies:[b.Sq,b.bT,h.me,h.BC,h.vS,h.l_,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,I.iy,y,tt,x.RN,x.m2,w.$z,w.iY,T.An,C.tx,C.BI,C.E7,C.Yi,v.rl,v.nJ,v.yw,N.fg,G.VO,O.wT,L.So,M.kk,M.fb,M.z8,M.Cp,$.Jl,A.LG,V.oV,k.jt,k.YE,U.q,b.vh],styles:[".image-library-container[_ngcontent-%COMP%]{padding:20px;max-width:100%}.image-library-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:20px}.image-library-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px}.image-library-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0;font-size:28px;font-weight:500;color:#333}.image-library-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;color:#2196f3}.image-library-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.image-library-container[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]{margin-bottom:20px}.image-library-container[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;flex-wrap:wrap}.image-library-container[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.image-library-container[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:200px}.image-library-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px 16px;background:#f5f5f5;border-radius:8px;margin-bottom:20px}.image-library-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]{font-weight:500;color:#333}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]{width:60px;height:60px;cursor:pointer;border-radius:8px;overflow:hidden;transition:transform .2s ease}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{display:block;font-weight:500;max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-extension[_ngcontent-%COMP%]{color:#666;text-transform:uppercase;font-size:11px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .title-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:block;font-weight:500;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .title-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#666;font-size:12px;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;margin-top:4px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;font-size:12px;height:24px;line-height:24px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;height:64px;width:64px;color:#ccc;margin-bottom:16px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:20px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{position:relative;transition:transform .2s ease,box-shadow .2s ease}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 20px #0000001a}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;right:8px;display:flex;justify-content:space-between;z-index:2}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:4px;padding:4px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffffe6;color:#333}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{position:relative;height:200px;overflow:hidden;cursor:pointer}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .grid-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:48px;height:48px;width:48px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:hover   .grid-image[_ngcontent-%COMP%]{transform:scale(1.05)}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .image-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{color:#666;font-size:12px}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#999;font-size:12px}.upload-dialog[_ngcontent-%COMP%]{width:600px;max-height:90vh}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .file-selection[_ngcontent-%COMP%]{margin-bottom:20px}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .file-selection[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:8px;padding:40px;text-align:center;cursor:pointer;transition:all .3s ease}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .file-selection[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]:hover{border-color:#2196f3;background:#f8f9fa}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .file-selection[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#ccc;margin-bottom:16px}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .file-selection[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .file-selection[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]{margin-bottom:20px}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#333}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]{max-height:150px;overflow-y:auto}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#f5f5f5;border-radius:4px;margin-bottom:4px}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{color:#666;font-size:12px}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .upload-metadata[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#333}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .upload-metadata[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.upload-dialog[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .upload-metadata[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:16px}.image-details-dialog[_ngcontent-%COMP%]{width:800px;max-height:90vh}.image-details-dialog[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]{display:flex;gap:20px}.image-details-dialog[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{flex:0 0 300px}.image-details-dialog[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:400px;object-fit:contain;border-radius:8px;box-shadow:0 2px 8px #0000001a}.image-details-dialog[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]   .details-info[_ngcontent-%COMP%]{flex:1}.image-details-dialog[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]   .details-info[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:auto;padding:8px 0}.image-details-dialog[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]   .details-info[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666;margin-right:12px}.image-details-dialog[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]   .details-info[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   div[matLine][_ngcontent-%COMP%]{font-size:14px;line-height:1.4;white-space:normal;word-break:break-word}.image-preview-dialog[_ngcontent-%COMP%]{width:90vw;height:90vh;max-width:1200px;padding:0}.image-preview-dialog[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eee}.image-preview-dialog[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 16px 0 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.image-preview-dialog[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{height:calc(100% - 70px);display:flex;align-items:center;justify-content:center;background:#f5f5f5}.image-preview-dialog[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .full-preview-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}  .image-preview-dialog .mat-dialog-container{padding:0}  .delete-action{color:#f44336!important}  .success-snackbar{background:#4caf50!important;color:#fff!important}  .error-snackbar{background:#f44336!important;color:#fff!important}  .warning-snackbar{background:#ff9800!important;color:#fff!important}@media (max-width: 768px){.image-library-container[_ngcontent-%COMP%]{padding:12px}.image-library-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.image-library-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:12px}.image-library-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{justify-content:center}.image-library-container[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{flex-direction:column}.image-library-container[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{min-width:auto;width:100%}.image-library-container[_ngcontent-%COMP%]   .filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:auto;width:100%}.image-library-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px}.image-library-container[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]{text-align:center}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px}.upload-dialog[_ngcontent-%COMP%]{width:95vw;max-width:500px}.image-details-dialog[_ngcontent-%COMP%]{width:95vw;max-width:600px}.image-details-dialog[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]{flex-direction:column}.image-details-dialog[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{flex:none}}@media (max-width: 480px){.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .displayedColumns[_ngcontent-%COMP%]:nth-child(n+6){display:none}.image-library-container[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]   .image-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}}"]})}return i})()}];let ie=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[b.MD,h.YN,h.X1,X.iI.forChild(ne),m.tP,I.Ou,et,x.Hu,w.Hl,T.m_,C.hM,v.RG,N.fS,G.Ve,L.g7,M.Cn,$.YN,A.D6,B._T,V.uc,k.Fg,U.w]})}return i})()}}]);