<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>ЁЯХЙя╕П роХро╛ропродрпНро░ро┐ роороирпНродро┐ро░роЩрпНроХро│рпН</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="toggleBookmark()">
        <ion-icon [name]="isBookmarked ? 'bookmark' : 'bookmark-outline'"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-content">
      <div class="hero-icon">
        <ion-icon name="flower-outline"></ion-icon>
      </div>
      <h1>роХро╛ропродрпНро░ро┐ роороирпНродро┐ро░роЩрпНроХро│рпН</h1>
      <p>Sacred Gayathri Mantras for Spiritual Enhancement</p>
    </div>
  </div>

  <!-- Content Section -->
  <div class="content-section">
    <!-- Category Grid -->
    <div class="category-grid">
      <ion-card 
        *ngFor="let category of gayathriCategories" 
        [color]="category.color" 
        (click)="selectGayathriCategory(category)"
        class="category-card">
        <ion-card-content>
          <div class="category-icon">{{ category.icon }}</div>
          <h3>{{ category.name }}</h3>
          <p>{{ category.mantras.length }} роороирпНродро┐ро░роЩрпНроХро│рпН</p>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Selected Category Mantras -->
    <div *ngIf="selectedGayathriCategory" class="mantras-section">
      <ion-card class="back-card" (click)="selectedGayathriCategory = null">
        <ion-card-content>
          <ion-icon name="arrow-back"></ion-icon>
          <span>ро╡роХрпИроХро│рпБроХрпНроХрпБ родро┐ро░рпБроорпНрокрпБ</span>
        </ion-card-content>
      </ion-card>

      <h2 class="section-title">{{ selectedGayathriCategory.name }}</h2>
      
      <ion-card 
        *ngFor="let mantra of selectedGayathriCategory.mantras; trackBy: trackByMantraId" 
        class="mantra-card"
        (click)="openMantraDetail(mantra)">
        <ion-card-header>
          <ion-card-title>{{ mantra.name }}</ion-card-title>
          <ion-card-subtitle>{{ mantra.deity }}</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <div class="mantra-text-preview">{{ mantra.text || mantra.tamil }}</div>
          <div class="benefits-preview">
            <ion-chip *ngFor="let benefit of mantra.benefits.slice(0,2)" color="light">
              {{ benefit }}
            </ion-chip>
            <ion-chip *ngIf="mantra.benefits.length > 2" color="medium">
              +{{ mantra.benefits.length - 2 }} роорпЗро▓рпБроорпН
            </ion-chip>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Practice Guidelines -->
    <ion-card class="practice-card">
      <ion-card-header>
        <ion-card-title>ЁЯЩП роЬрок ро╡ро┐родро┐роорпБро▒рпИроХро│рпН</ion-card-title>
        <ion-card-subtitle>Practice Guidelines</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-icon name="time-outline" slot="start"></ion-icon>
            <ion-label>
              <h3>роЪро┐ро▒роирпНрод роирпЗро░роорпН</h3>
              <p>роЕродро┐роХро╛ро▓рпИ 4-6 роорогро┐ роЕро▓рпНро▓родрпБ роЪрпВро░рпНроп роЙродропроорпН</p>
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="repeat-outline" slot="start"></ion-icon>
            <ion-label>
              <h3>роЬрок роОрогрпНрогро┐роХрпНроХрпИ</h3>
              <p>108 роорпБро▒рпИ роЕро▓рпНро▓родрпБ 27 роорпБро▒рпИ родро┐ройроорпБроорпН</p>
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="leaf-outline" slot="start"></ion-icon>
            <ion-label>
              <h3>родрпВропрпНроорпИ</h3>
              <p>роХрпБро│ро┐родрпНродрпБ роЪрпБродрпНродрооро╛рой роЙроЯрпИропрпБроЯройрпН</p>
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="flower-outline" slot="start"></ion-icon>
            <ion-label>
              <h3>рокрпВроЬрпИ рокрпКро░рпБроЯрпНроХро│рпН</h3>
              <p>ро╡ро┐ро│роХрпНроХрпБ, роЕроХро░рпНрокродрпНродро┐, рокрпВ, роирпАро░рпН</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Mantra Detail Modal -->
  <ion-modal #detailModal [isOpen]="selectedMantra !== null" [presentingElement]="null" class="fullscreen-modal">
    <ng-template>
      <ion-header>
        <ion-toolbar color="primary">
          <ion-buttons slot="start">
            <ion-button (click)="closeMantraDetail()">
              <ion-icon name="arrow-back"></ion-icon>
            </ion-button>
          </ion-buttons>
          <ion-title>{{ selectedMantra?.name }}</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeMantraDetail()">
              <ion-icon name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      
      <ion-content *ngIf="selectedMantra">
        <div class="modal-content">
          <ion-card>
            <ion-card-header>
              <ion-card-title>{{ selectedMantra.name }}</ion-card-title>
              <ion-card-subtitle>{{ selectedMantra.deity }}</ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <div class="mantra-text-full">{{ selectedMantra.text || selectedMantra.tamil }}</div>
              
              <div class="benefits-section">
                <h4>рокро▓ройрпНроХро│рпН:</h4>
                <ion-list>
                  <ion-item *ngFor="let benefit of selectedMantra.benefits">
                    <ion-icon name="checkmark-circle" slot="start" color="success"></ion-icon>
                    <ion-label>{{ benefit }}</ion-label>
                  </ion-item>
                </ion-list>
              </div>

              <div class="action-buttons">
                <ion-button fill="outline" (click)="copyMantra(selectedMantra)">
                  <ion-icon name="copy" slot="start"></ion-icon>
                  роироХрд▓рпЖроЯрпБ
                </ion-button>
                <ion-button fill="outline" (click)="shareMantra(selectedMantra)">
                  <ion-icon name="share" slot="start"></ion-icon>
                  рокроХро┐ро░рпБ
                </ion-button>
                <ion-button fill="outline" (click)="toggleFavoriteMantra(selectedMantra)">
                  <ion-icon [name]="isFavoriteMantra(selectedMantra) ? 'heart' : 'heart-outline'" slot="start"></ion-icon>
                  {{ isFavoriteMantra(selectedMantra) ? 'роирпАроХрпНроХрпБ' : 'роЪрпЗро░рпН' }}
                </ion-button>
              </div>
            </ion-card-content>
          </ion-card>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
