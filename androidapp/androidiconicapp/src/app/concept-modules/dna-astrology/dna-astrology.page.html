<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/concepts"></ion-back-button>
    </ion-buttons>
    <ion-title>DNA ஜோதிஷம்</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="toggleBookmark()">
        <ion-icon slot="icon-only" [name]="isBookmarked ? 'bookmark' : 'bookmark-outline'"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-image">
      <ion-icon name="dna" size="large"></ion-icon>
    </div>
    <div class="hero-content">
      <h1>DNA ஜோதிஷம்</h1>
      <p class="subtitle">Modern Astrological Research with Genetic Science</p>
      <div class="meta-info">
        <ion-chip size="small">
          <ion-icon name="time" slot="start"></ion-icon>
          <ion-label>45 நிமிடங்கள்</ion-label>
        </ion-chip>
        <ion-chip size="small">
          <ion-icon name="school" slot="start"></ion-icon>
          <ion-label>மேம்பட்ட</ion-label>
        </ion-chip>
        <ion-chip size="small">
          <ion-icon name="card" slot="start"></ion-icon>
          <ion-label>₹299</ion-label>
        </ion-chip>
      </div>
    </div>
  </div>

  <!-- Welcome Content -->
  <ion-card class="welcome-card">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="sparkles"></ion-icon>
        வரவேற்கிறோம்!
      </ion-card-title>
      <ion-card-subtitle>Welcome to DNA Astrology</ion-card-subtitle>
    </ion-card-header>
    
    <ion-card-content>
      <div class="welcome-content">
        <h3>மரபணு ஜோதிட அறிவியல்</h3>
        <p>
          நவீன அறிவியலும் பாரம்பரிய ஜோதிடமும் இணைந்த ஒரு புதிய அணுகுமுறை! 
          உங்கள் மரபணு (DNA) வரிசையின் அடிப்படையில் துல்லியமான ஜோதிட கணிப்புகளை அறிந்து கொள்ளுங்கள்.
        </p>
        
        <div class="features-grid">
          <div class="feature-item">
            <ion-icon name="analytics" color="primary"></ion-icon>
            <h4>மரபணு பகுப்பாய்வு</h4>
            <p>உங்கள் DNA வரிசையின் ஜோதிட தாக்கம்</p>
          </div>
          
          <div class="feature-item">
            <ion-icon name="planet" color="secondary"></ion-icon>
            <h4>கோள் தாக்கம்</h4>
            <p>மரபணு அடிப்படையிலான கிரக பலன்கள்</p>
          </div>
          
          <div class="feature-item">
            <ion-icon name="library" color="tertiary"></ion-icon>
            <h4>பூர்வ ஜென்ம கர்மா</h4>
            <p>மரபு வழியாக வரும் கர்ம தோஷங்கள்</p>
          </div>
          
          <div class="feature-item">
            <ion-icon name="medical" color="success"></ion-icon>
            <h4>அறிவியல் பரிகாரம்</h4>
            <p>ஆதார பூர்வமான நவீன பரிகாரங்கள்</p>
          </div>
        </div>
        
        <div class="course-highlights">
          <h4>
            <ion-icon name="star" color="warning"></ion-icon>
            இந்த பாடத்தில் நீங்கள் கற்றுக்கொள்வது:
          </h4>
          <ion-list>
            <ion-item>
              <ion-label>மரபணு வரிசை மற்றும் ஜோதிட இணைப்பு</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>குலதெய்வம் கண்டறிதல் - DNA முறையில்</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>எப்பிஜெனெடிக் கர்ம சுத்திகரிப்பு</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>ஜீன் அடிப்படையிலான கிரக பரிகாரங்கள்</ion-label>
            </ion-item>
            <ion-item>
              <ion-label>நவீன மந்திர ஜபம் மற்றும் யந்திர பிரயோகம்</ion-label>
            </ion-item>
          </ion-list>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Overview Section -->
  <ion-card class="section-card-planet">
    <ion-card-header (click)="toggleOverview()" class="section-header-overview">
      <div class="section-header-content-overview">
        <ion-icon name="planet" color="primary" class="section-header-icon-overview"></ion-icon>
        <div>
          <div>நட்சத்திர தொடர்பு</div>
          <div>நட்சத்திர பொருத்த கண்ணோட்டம்</div>
        </div>
      </div>
      <div class="section-header-toggle-icon-overview">
        <ion-icon [name]="showOverview ? 'chevron-up-circle' : 'chevron-down-circle'" class="section-toggle-icon-overview"></ion-icon>
      </div>
    </ion-card-header>

    <ion-card-content *ngIf="showOverview">
      <div class="overview-content">
        <p>
          கிரகங்கள் மற்றும் நட்சத்திரங்களின் தொடர்பு உங்கள் மரபணுவில் எவ்வாறு பதிவாகியுள்ளது என்பதை பற்றிய விரிவான அட்டவணை.
        </p>
        <p>
          Detailed table showing how planets and stars are interconnected with your genetic makeup and birth star compatibility.
        </p>

        <div class="compatibility-table-container">
          <table class="compatibility-table">
            <thead>
              <tr class="table-header">
                <th class="header-cell">கிரகம்</th>
                <th class="header-cell">தோஷம்</th>
                <th class="header-cell">நட்சத்திரங்கள் ஆதிக்கம்</th>
                <th class="header-cell">பிறந்தது</th>
                <th class="header-cell">குறிப்பு</th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let compatibility of compatibilityData">
                <tr *ngFor="let row of compatibility.rows; let isFirst = first; let i = index" class="table-row">
                  <td class="table-cell planet-cell" *ngIf="isFirst" [attr.rowspan]="compatibility.rows.length">
                    <div class="planet-name">
                      <ion-icon [name]="compatibility.icon" [color]="compatibility.color"></ion-icon>
                      <span>{{compatibility.planet}}</span>
                    </div>
                  </td>
                  <td class="table-cell">
                    <div *ngFor="let dosham of row.dosham" class="nakshathram-item">
                      {{dosham}}
                    </div>
                  </td>
                  <td class="table-cell">
                    <div *ngFor="let adhikam of row.adhikam" class="nakshathram-item">
                      {{adhikam}}
                    </div>
                  </td>
                  <td class="table-cell">
                    {{row.birth}}
                  </td>
                  <td class="table-cell">
                    {{row.note}}
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </table>
        </div>

        <div class="compatibility-notes">
          <h5>
            <ion-icon name="information-circle" color="primary"></ion-icon>
            முக்கிய குறிப்புகள்:
          </h5>
          <ul>
            <li>பச்சை நிறம் - நல்ல பொருத்தம் (Good Compatibility)</li>
            <li>மஞ்சள் நிறம் - நடுத்தர பொருத்தம் (Medium Compatibility)</li>
            <li>சிவப்பு நிறம் - கவனம் தேவை (Needs Attention)</li>
          </ul>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Individual Planet Sections -->
  <div *ngFor="let planet of planets" class="planet-section">
    <ion-card class="section-card-planet">
      <ion-card-header (click)="toggleSection(planet.id)" class="section-header-planet">
        <div class="section-header-content-planet">
          <ion-icon [name]="planet.icon" [color]="planet.color" class="section-header-icon-planet"></ion-icon>
          <div>
            <div>{{planet.name}} ({{planet.nameEnglish}})</div>
            <div>{{planet.name}} கிரகத்தின் மரபணு தாக்கம் மற்றும் கர்ம பரிகாரங்கள்</div>
          </div>
        </div>
        <div class="section-header-toggle-icon-planet">
          <ion-icon [name]="sectionOpen[planet.id] ? 'chevron-up-circle' : 'chevron-down-circle'" class="section-toggle-icon-planet"></ion-icon>
        </div>
      </ion-card-header>
      
      <ion-card-content *ngIf="sectionOpen[planet.id]">
        
        <!-- Dosham Nakshatrams List -->
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="warning" color="warning"></ion-icon>
              கர்மப்பதிவு கொண்ட நட்சத்திரங்கள்
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="nakshatra-chips">
              <ion-chip *ngFor="let nakshatra of planet.doshamNakshatrams">
                <ion-label>{{nakshatra}}</ion-label>
              </ion-chip>
            </div>
          </ion-card-content>
        </ion-card>

        <!-- Nakshatra Details -->
        <ion-card class="nakshatra-details-card" *ngIf="planet.doshamDetails.length > 0">
          <ion-card-header>
            <ion-card-title class="remedy-heading">
              <ion-icon name="library" color="primary"></ion-icon>
              நட்சத்திர தோஷம் - தனிப்பட்ட தன்மைகள்
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div *ngFor="let detail of planet.doshamDetails" class="nakshatra-detail-block" [ngClass]="'bg-' + detail.color + '-detail'">
              <h5>
                <ion-icon name="flash" color="tertiary"></ion-icon>
                {{detail.name}}
              </h5>
              <ul>
                <li *ngFor="let trait of detail.traits">{{trait}}</li>
              </ul>
            </div>
          </ion-card-content>
        </ion-card>

        <!-- General Traits -->
        <ion-card class="dosham-card">
          <ion-card-header>
            <ion-card-title class="remedy-heading">
              <ion-icon name="warning" color="danger"></ion-icon>
              {{planet.name}} தோஷம் - பொதுவான தன்மைகள்
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ul class="dosham-list">
              <li *ngFor="let trait of planet.generalTraits; let isLast = last" [ngClass]="{'highlight-text': isLast}">
                <span *ngIf="isLast"><em>{{trait}}</em></span>
                <span *ngIf="!isLast">{{trait}}</span>
              </li>
            </ul>
          </ion-card-content>
        </ion-card>
        
        <!-- Remedies -->
        <ion-card class="remedy-card">
          <ion-card-header>
            <ion-card-title class="remedy-heading">
              <ion-icon name="medical" color="success"></ion-icon>
              {{planet.name}} தோஷ பரிகாரம்
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            
            <!-- Dharma Remedies -->
            <div class="remedy-block bg-yellow-remedy" *ngIf="planet.remedies.dharma.length > 0">
              <h5>
                <ion-icon name="heart" color="danger"></ion-icon>
                தர்மப் பரிகாரம்
              </h5>
              <ul>
                <li *ngFor="let remedy of planet.remedies.dharma">{{remedy}}</li>
              </ul>
            </div>
            
            <!-- Career Remedies -->
            <div class="remedy-block bg-blue-remedy" *ngIf="planet.remedies.career.length > 0">
              <h5>
                <ion-icon name="briefcase" color="primary"></ion-icon>
                தொழில் பரிகாரம்
              </h5>
              <ul>
                <li *ngFor="let remedy of planet.remedies.career">{{remedy}}</li>
              </ul>
            </div>
            
            <!-- Spiritual Remedies -->
            <div class="remedy-block bg-pink-remedy" *ngIf="planet.remedies.spiritual.length > 0">
              <h5>
                <ion-icon name="flower" color="tertiary"></ion-icon>
                ஆன்மீகப் பரிகாரம்
              </h5>
              <ul>
                <li *ngFor="let remedy of planet.remedies.spiritual">{{remedy}}</li>
              </ul>
            </div>
            
          </ion-card-content>
        </ion-card>
        
      </ion-card-content>
    </ion-card>
  </div>

</ion-content>