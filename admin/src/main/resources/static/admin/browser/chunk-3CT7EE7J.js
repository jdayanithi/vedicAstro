import{a as Ce,b as fe,c as ye,d as _e,e as Me,f as Se,g as I}from"./chunk-SP3Z5TV7.js";import{a as F}from"./chunk-PFIUBAZZ.js";import{a as ae,b as re,c as ne,d as me,e as le,f as ce,g as se,h as pe,i as de,j as ge,k as ue}from"./chunk-OMNFHR7K.js";import{a as oe,b as ie}from"./chunk-NNROVGUN.js";import{b as W,c as X,q as x,r as D}from"./chunk-HHRDAJVU.js";import"./chunk-NGDKZ7II.js";import{a as Y,b as J,h as K,i as Q}from"./chunk-3Y56DFGH.js";import{Ab as M,Ca as m,Da as s,Gb as S,Oc as O,Qc as P,Sa as d,Sc as j,Tc as A,Xa as l,Xc as V,_c as G,ba as y,bd as H,cc as L,db as o,dc as N,de as z,eb as i,ed as $,fb as g,fd as q,gb as C,hb as f,hd as U,ja as k,jb as R,je as b,ka as T,lc as v,le as Z,mb as u,me as h,ne as ee,ob as B,oe as te,yb as r,zb as _}from"./chunk-L74P3D6T.js";import"./chunk-GAL4ENT6.js";function Ee(e,t){e&1&&(o(0,"mat-error"),r(1," Name is required "),i())}function we(e,t){if(e&1&&(o(0,"mat-option",7),r(1),i()),e&2){let a=t.$implicit;l("value",a.categoryId),m(),M(" ",a.name," ")}}var E=class e{constructor(t,a,n,p,c){this.fb=t;this.categoryService=a;this.snackBar=n;this.dialogRef=p;this.data=c;this.editMode=!!c.category,this.availableParentCategories=c.categories.filter(ve=>!this.editMode||ve.categoryId!==c.category?.categoryId),this.categoryForm=this.fb.group({name:[c.category?.name||"",P.required],description:[c.category?.description||""],parentCategoryId:[c.category?.parentCategoryId||null]})}categoryForm;editMode=!1;availableParentCategories=[];onSubmit(){if(this.categoryForm.valid){let t=this.categoryForm.value;this.editMode?this.categoryService.updateCategory(this.data.category.categoryId,t).subscribe({next:()=>{this.snackBar.open("Category updated successfully","Close",{duration:3e3}),this.dialogRef.close(!0)},error:()=>{this.snackBar.open("Error updating category","Close",{duration:3e3})}}):this.categoryService.createCategory(t).subscribe({next:()=>{this.snackBar.open("Category created successfully","Close",{duration:3e3}),this.dialogRef.close(!0)},error:()=>{this.snackBar.open("Error creating category","Close",{duration:3e3})}})}}static \u0275fac=function(a){return new(a||e)(s(q),s(F),s(x),s(Ce),s(fe))};static \u0275cmp=y({type:e,selectors:[["app-category-form"]],standalone:!0,features:[S],decls:25,vars:7,consts:[["mat-dialog-title",""],[3,"ngSubmit","formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","description","rows","3"],["formControlName","parentCategoryId"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"button-container"],["mat-button","","type","button","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(a,n){if(a&1&&(o(0,"h2",0),r(1),i(),o(2,"mat-dialog-content")(3,"form",1),u("ngSubmit",function(){return n.onSubmit()}),o(4,"mat-form-field",2)(5,"mat-label"),r(6,"Name"),i(),g(7,"input",3),d(8,Ee,2,0,"mat-error",4),i(),o(9,"mat-form-field",2)(10,"mat-label"),r(11,"Description"),i(),g(12,"textarea",5),i(),o(13,"mat-form-field",2)(14,"mat-label"),r(15,"Parent Category"),i(),o(16,"mat-select",6)(17,"mat-option",7),r(18,"None"),i(),d(19,we,2,2,"mat-option",8),i()(),o(20,"div",9)(21,"button",10),r(22,"Cancel"),i(),o(23,"button",11),r(24),i()()()()),a&2){let p;m(),M("",n.editMode?"Edit":"Create"," Category"),m(2),l("formGroup",n.categoryForm),m(5),l("ngIf",(p=n.categoryForm.get("name"))==null?null:p.hasError("required")),m(9),l("value",null),m(2),l("ngForOf",n.availableParentCategories),m(4),l("disabled",n.categoryForm.invalid),m(),M(" ",n.editMode?"Update":"Create"," ")}},dependencies:[v,L,N,U,V,O,j,A,$,G,H,Q,K,Y,J,X,W,ie,oe,z,h,b,I,_e,Me,Se,D],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:16px}"]})};function ke(e,t){e&1&&(o(0,"th",12),r(1,"Name"),i())}function Te(e,t){if(e&1&&(o(0,"td",13),r(1),i()),e&2){let a=t.$implicit;m(),_(a.name)}}function Be(e,t){e&1&&(o(0,"th",12),r(1,"Description"),i())}function Re(e,t){if(e&1&&(o(0,"td",13),r(1),i()),e&2){let a=t.$implicit;m(),_(a.description)}}function Le(e,t){e&1&&(o(0,"th",12),r(1,"Parent Category"),i())}function Ne(e,t){if(e&1&&(o(0,"td",13),r(1),i()),e&2){let a=t.$implicit;m(),_(a.parentCategoryName||"-")}}function Oe(e,t){e&1&&(o(0,"th",12),r(1,"Actions"),i())}function Pe(e,t){if(e&1){let a=R();o(0,"td",13)(1,"button",14),u("click",function(){let p=k(a).$implicit,c=B();return T(c.editCategory(p))}),o(2,"mat-icon"),r(3,"edit"),i()(),o(4,"button",15),u("click",function(){let p=k(a).$implicit,c=B();return T(c.deleteCategory(p))}),o(5,"mat-icon"),r(6,"delete"),i()()()}}function je(e,t){e&1&&g(0,"tr",16)}function Ae(e,t){e&1&&g(0,"tr",17)}var w=class e{constructor(t,a,n){this.categoryService=t;this.dialog=a;this.snackBar=n}categories=[];displayedColumns=["name","description","parentCategory","actions"];ngOnInit(){this.loadCategories()}loadCategories(){this.categoryService.getCategories().subscribe(t=>{this.categories=t})}openCategoryForm(t){this.dialog.open(E,{width:"500px",data:{category:t,categories:this.categories}}).afterClosed().subscribe(n=>{n&&this.loadCategories()})}editCategory(t){this.openCategoryForm(t)}deleteCategory(t){confirm("Are you sure you want to delete this category?")&&this.categoryService.deleteCategory(t.categoryId).subscribe({next:()=>{this.loadCategories(),this.snackBar.open("Category deleted successfully","Close",{duration:3e3})},error:()=>{this.snackBar.open("Error deleting category","Close",{duration:3e3})}})}static \u0275fac=function(a){return new(a||e)(s(F),s(ye),s(x))};static \u0275cmp=y({type:e,selectors:[["app-category-list"]],standalone:!0,features:[S],decls:23,vars:3,consts:[[1,"container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","parentCategory"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,n){a&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Categories"),i(),o(4,"button",2),u("click",function(){return n.openCategoryForm()}),o(5,"mat-icon"),r(6,"add"),i(),r(7," Add Category "),i()(),o(8,"table",3),C(9,4),d(10,ke,2,0,"th",5)(11,Te,2,1,"td",6),f(),C(12,7),d(13,Be,2,0,"th",5)(14,Re,2,1,"td",6),f(),C(15,8),d(16,Le,2,0,"th",5)(17,Ne,2,1,"td",6),f(),C(18,9),d(19,Oe,2,0,"th",5)(20,Pe,7,0,"td",6),f(),d(21,je,1,0,"tr",10)(22,Ae,1,0,"tr",11),i()()),a&2&&(m(8),l("dataSource",n.categories),m(13),l("matHeaderRowDef",n.displayedColumns),m(),l("matRowDefColumns",n.displayedColumns))},dependencies:[v,ue,ae,ne,se,me,re,pe,le,ce,de,ge,h,b,Z,te,ee,I,D],styles:[".container[_ngcontent-%COMP%]{padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}table[_ngcontent-%COMP%]{width:100%}"]})};var _t=[{path:"",component:w}];export{_t as CATEGORY_ROUTES};
