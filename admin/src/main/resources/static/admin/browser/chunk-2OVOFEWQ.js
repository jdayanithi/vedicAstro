import{a as rt}from"./chunk-N3SMB2Y6.js";import{a as Q,b as W,c as X,d as Y,e as Z,f as tt,g as et,h as at,i as it,j as nt,k as ot}from"./chunk-VJ2U5WQN.js";import{b as $,c as A,q as J,r as K}from"./chunk-FORQPI5O.js";import"./chunk-2GDKZSYE.js";import{a as O,h as G,i as H}from"./chunk-FLUPKQIH.js";import{Ab as f,Ca as m,Gb as E,Oc as y,Qc as I,Sa as s,Sc as w,Tc as D,Xa as d,Xc as k,_ as C,_c as N,ba as S,bd as F,db as a,dc as P,eb as i,ed as R,fb as g,gb as p,gd as B,hb as u,id as V,ja as _,jb as x,ka as T,ke as q,lc as v,mb as c,me as U,ne as j,ob as h,oe as z,pe as L,yb as n}from"./chunk-BX6X7MJZ.js";import"./chunk-GAL4ENT6.js";function mt(e,t){if(e&1){let o=x();a(0,"button",18),c("click",function(){_(o);let l=h();return T(l.cancelEdit())}),n(1,"Cancel"),i()}}function lt(e,t){e&1&&(a(0,"th",19),n(1," Name "),i())}function st(e,t){if(e&1&&(a(0,"td",20),n(1),i()),e&2){let o=t.$implicit;m(),f(" ",o.tagName," ")}}function dt(e,t){e&1&&(a(0,"th",19),n(1," Category "),i())}function gt(e,t){if(e&1&&(a(0,"td",20),n(1),i()),e&2){let o=t.$implicit;m(),f(" ",o.tagCategory," ")}}function ct(e,t){e&1&&(a(0,"th",19),n(1," Description "),i())}function pt(e,t){if(e&1&&(a(0,"td",20),n(1),i()),e&2){let o=t.$implicit;m(),f(" ",o.description," ")}}function ut(e,t){e&1&&(a(0,"th",19),n(1," Actions "),i())}function ft(e,t){if(e&1){let o=x();a(0,"td",20)(1,"button",21),c("click",function(){let l=_(o).$implicit,M=h();return T(M.editTag(l))}),a(2,"mat-icon"),n(3,"edit"),i()(),a(4,"button",22),c("click",function(){let l=_(o).$implicit,M=h();return T(M.deleteTag(l))}),a(5,"mat-icon"),n(6,"delete"),i()()()}}function Ct(e,t){e&1&&g(0,"tr",23)}function _t(e,t){e&1&&g(0,"tr",24)}var b=class e{tags=[];displayedColumns=["tagName","tagCategory","description","actions"];tagForm;editMode=!1;editingTagId=null;tagService=C(rt);fb=C(B);snackBar=C(J);constructor(){this.tagForm=this.fb.group({tagName:["",I.required],tagCategory:[""],description:[""]})}ngOnInit(){this.loadTags()}loadTags(){this.tagService.getTags().subscribe(t=>this.tags=t)}onSubmit(){if(this.tagForm.invalid)return;let t=this.tagForm.value;this.editMode&&this.editingTagId?this.tagService.updateTag(this.editingTagId,t).subscribe({next:()=>{this.snackBar.open("Tag updated","Close",{duration:2e3}),this.loadTags(),this.cancelEdit()},error:()=>this.snackBar.open("Error updating tag","Close",{duration:3e3})}):this.tagService.createTag(t).subscribe({next:()=>{this.snackBar.open("Tag added","Close",{duration:2e3}),this.loadTags(),this.tagForm.reset()},error:()=>this.snackBar.open("Error adding tag","Close",{duration:3e3})})}editTag(t){this.editMode=!0,this.editingTagId=t.tagId,this.tagForm.patchValue({tagName:t.tagName,tagCategory:t.tagCategory,description:t.description})}cancelEdit(){this.editMode=!1,this.editingTagId=null,this.tagForm.reset()}deleteTag(t){confirm(`Delete tag "${t.tagName}"?`)&&this.tagService.deleteTag(t.tagId).subscribe({next:()=>{this.snackBar.open("Tag deleted","Close",{duration:2e3}),this.loadTags()},error:()=>this.snackBar.open("Error deleting tag","Close",{duration:3e3})})}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=S({type:e,selectors:[["app-tags-page"]],standalone:!0,features:[E],decls:37,vars:6,consts:[[1,"container"],[1,"tag-form",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","tagName","required",""],["matInput","","formControlName","tagCategory"],["matInput","","formControlName","description"],["mat-raised-button","","color","primary","type","submit"],["mat-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Refresh",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","tagName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tagCategory"],["matColumnDef","description"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","type","button",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,r){o&1&&(a(0,"div",0)(1,"h2"),n(2,"Manage Tags"),i(),a(3,"form",1),c("ngSubmit",function(){return r.onSubmit()}),a(4,"mat-form-field",2)(5,"mat-label"),n(6,"Tag Name"),i(),g(7,"input",3),i(),a(8,"mat-form-field",2)(9,"mat-label"),n(10,"Tag Category"),i(),g(11,"input",4),i(),a(12,"mat-form-field",2)(13,"mat-label"),n(14,"Description"),i(),g(15,"input",5),i(),a(16,"button",6),n(17),i(),s(18,mt,2,0,"button",7),a(19,"button",8),c("click",function(){return r.loadTags()}),a(20,"mat-icon"),n(21,"refresh"),i()()(),a(22,"table",9),p(23,10),s(24,lt,2,0,"th",11)(25,st,2,1,"td",12),u(),p(26,13),s(27,dt,2,0,"th",11)(28,gt,2,1,"td",12),u(),p(29,14),s(30,ct,2,0,"th",11)(31,pt,2,1,"td",12),u(),p(32,15),s(33,ut,2,0,"th",11)(34,ft,7,0,"td",12),u(),s(35,Ct,1,0,"tr",16)(36,_t,1,0,"tr",17),i()()),o&2&&(m(3),d("formGroup",r.tagForm),m(14),f(" ",r.editMode?"Update":"Add"," Tag "),m(),d("ngIf",r.editMode),m(4),d("dataSource",r.tags),m(13),d("matHeaderRowDef",r.displayedColumns),m(),d("matRowDefColumns",r.displayedColumns))},dependencies:[v,P,V,k,y,w,D,R,N,F,ot,Q,X,et,Y,W,at,Z,tt,it,nt,H,G,O,A,$,j,q,U,L,z,K],styles:[".container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto;padding:24px}.tag-form[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px;align-items:flex-end}mat-form-field[_ngcontent-%COMP%]{flex:1}table[_ngcontent-%COMP%]{width:100%;margin-top:16px}th.mat-header-cell[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%]{text-align:left}button[mat-icon-button][_ngcontent-%COMP%]{margin-right:8px}"]})};var Ut=[{path:"",component:b}];export{Ut as TAGS_ROUTES};
