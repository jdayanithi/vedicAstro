import{a as I,b as P}from"./chunk-2I4VYC56.js";import{a as y}from"./chunk-DELYXJC5.js";import{a as Mt,b as ht,c as vt,d as St,e as bt,f as xt,g as w}from"./chunk-SP3Z5TV7.js";import{a as K,b as Q,c as W,e as X,g as Y}from"./chunk-WWQZTZCX.js";import{a as lt,b as st,c as dt,d as gt,e as ct,f as pt,g as ut,h as ft,i as Tt,j as Ct,k as _t}from"./chunk-OMNFHR7K.js";import{b as it,c as ot,q as E,r as D}from"./chunk-HHRDAJVU.js";import"./chunk-NGDKZ7II.js";import{a as Z,b as tt,h as et,i as at}from"./chunk-3Y56DFGH.js";import{Ab as f,Ca as m,Da as s,Gb as S,Oc as L,Qc as R,Sa as c,Sc as A,Tc as G,Xa as g,Xc as H,_c as $,ba as _,bd as q,db as i,dc as j,eb as o,ed as U,fb as u,fd as z,gb as T,hb as C,hd as J,ja as M,jb as N,je as x,ka as h,lc as b,le as nt,mb as p,me as F,ne as rt,ob as v,oe as mt,yb as r}from"./chunk-L74P3D6T.js";import{a as O,b as V}from"./chunk-GAL4ENT6.js";function kt(a,t){a&1&&(i(0,"mat-error"),r(1," Tag name is required "),o())}var k=class a{constructor(t,e,n,l,d){this.fb=t;this.tagService=e;this.snackBar=n;this.dialogRef=l;this.data=d;this.editMode=!!d?.tag,this.tagForm=this.createForm(),this.editMode&&d.tag&&this.populateForm(d.tag)}tagForm;editMode=!1;isLoading=!1;createForm(){return this.fb.group({tagName:["",[R.required,R.minLength(2)]],description:[""],statusFlag:[!0]})}populateForm(t){this.tagForm.patchValue({tagName:t.tagName,description:t.description||"",statusFlag:t.statusFlag!==!1})}onSubmit(){if(this.tagForm.valid&&!this.isLoading){this.isLoading=!0;let t=this.tagForm.value,e={tagName:t.tagName,description:t.description,statusFlag:t.statusFlag};this.editMode&&this.data.tag?(e.tagId=this.data.tag.tagId,this.updateTag(e)):this.createTag(e)}}createTag(t){this.tagService.createTag(t).subscribe({next:e=>{this.snackBar.open("Tag created successfully","Close",{duration:3e3}),this.dialogRef.close(e)},error:e=>{console.error("Error creating tag:",e),this.snackBar.open("Error creating tag","Close",{duration:3e3}),this.isLoading=!1}})}updateTag(t){this.tagService.updateTag(t.tagId,t).subscribe({next:e=>{this.snackBar.open("Tag updated successfully","Close",{duration:3e3}),this.dialogRef.close(e)},error:e=>{console.error("Error updating tag:",e),this.snackBar.open("Error updating tag","Close",{duration:3e3}),this.isLoading=!1}})}static \u0275fac=function(e){return new(e||a)(s(z),s(y),s(E),s(Mt),s(ht))};static \u0275cmp=_({type:a,selectors:[["app-tag-form"]],standalone:!0,features:[S],decls:21,vars:5,consts:[["mat-dialog-title",""],[3,"ngSubmit","formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","tagName","required",""],[4,"ngIf"],["matInput","","formControlName","description","rows","3"],[1,"status-toggle"],["formControlName","statusFlag"],[1,"button-container"],["mat-button","","type","button","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,n){if(e&1&&(i(0,"h2",0),r(1),o(),i(2,"mat-dialog-content")(3,"form",1),p("ngSubmit",function(){return n.onSubmit()}),i(4,"mat-form-field",2)(5,"mat-label"),r(6,"Tag Name"),o(),u(7,"input",3),c(8,kt,2,0,"mat-error",4),o(),i(9,"mat-form-field",2)(10,"mat-label"),r(11,"Description"),o(),u(12,"textarea",5),o(),i(13,"div",6)(14,"mat-slide-toggle",7),r(15," Enable Tag "),o()(),i(16,"div",8)(17,"button",9),r(18,"Cancel"),o(),i(19,"button",10),r(20),o()()()()),e&2){let l;m(),f("",n.editMode?"Edit":"Create"," Tag"),m(2),g("formGroup",n.tagForm),m(5),g("ngIf",(l=n.tagForm.get("tagName"))==null?null:l.hasError("required")),m(11),g("disabled",n.tagForm.invalid||n.isLoading),m(),f(" ",n.isLoading?"Saving...":n.editMode?"Update":"Create"," ")}},dependencies:[b,j,J,H,L,A,G,U,$,q,at,et,Z,tt,ot,it,F,x,w,St,bt,xt,D,P,I],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.status-toggle[_ngcontent-%COMP%]{margin:16px 0}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:16px}mat-dialog-content[_ngcontent-%COMP%]{min-width:400px;max-width:500px}"]})};function Bt(a,t){a&1&&(i(0,"th",13),r(1," Name "),o())}function Nt(a,t){if(a&1&&(i(0,"td",14),r(1),o()),a&2){let e=t.$implicit;m(),f(" ",e.tagName," ")}}function Rt(a,t){a&1&&(i(0,"th",13),r(1," Description "),o())}function Ot(a,t){if(a&1&&(i(0,"td",14),r(1),o()),a&2){let e=t.$implicit;m(),f(" ",e.description||"-"," ")}}function Vt(a,t){a&1&&(i(0,"th",13),r(1," Status "),o())}function jt(a,t){if(a&1){let e=N();i(0,"td",14)(1,"mat-slide-toggle",15),p("change",function(){let l=M(e).$implicit,d=v();return h(d.toggleTagStatus(l))}),o()()}if(a&2){let e=t.$implicit;m(),g("checked",e.statusFlag!==!1)}}function Lt(a,t){a&1&&(i(0,"th",13),r(1," Actions "),o())}function At(a,t){if(a&1){let e=N();i(0,"td",14)(1,"button",16),p("click",function(){let l=M(e).$implicit,d=v();return h(d.editTag(l))}),i(2,"mat-icon"),r(3,"edit"),o()(),i(4,"button",17),p("click",function(){let l=M(e).$implicit,d=v();return h(d.deleteTag(l))}),i(5,"mat-icon"),r(6,"delete"),o()()()}}function Gt(a,t){a&1&&u(0,"tr",18)}function Ht(a,t){a&1&&u(0,"tr",19)}var B=class a{constructor(t,e,n){this.tagService=t;this.snackBar=e;this.dialog=n}tags=[];displayedColumns=["tagName","description","statusFlag","actions"];ngOnInit(){this.loadTags()}loadTags(){this.tagService.getTags().subscribe({next:t=>this.tags=t,error:t=>{console.error("Error loading tags:",t),this.snackBar.open("Error loading tags","Close",{duration:3e3})}})}openTagForm(t){this.dialog.open(k,{width:"500px",data:{tag:t}}).afterClosed().subscribe(n=>{n&&this.loadTags()})}editTag(t){this.openTagForm(t)}toggleTagStatus(t){let e=V(O({},t),{statusFlag:!t.statusFlag});this.tagService.updateTag(t.tagId,e).subscribe({next:()=>{this.snackBar.open(`Tag ${e.statusFlag?"enabled":"disabled"}`,"Close",{duration:2e3}),this.loadTags()},error:n=>{console.error("Error updating tag status:",n),this.snackBar.open("Error updating tag status","Close",{duration:3e3})}})}deleteTag(t){confirm(`Are you sure you want to delete the tag "${t.tagName}"?`)&&this.tagService.deleteTag(t.tagId).subscribe({next:()=>{this.snackBar.open("Tag deleted successfully","Close",{duration:3e3}),this.loadTags()},error:e=>{console.error("Error deleting tag:",e),this.snackBar.open("Error deleting tag","Close",{duration:3e3})}})}static \u0275fac=function(e){return new(e||a)(s(y),s(E),s(vt))};static \u0275cmp=_({type:a,selectors:[["app-tags-page"]],standalone:!0,features:[S],decls:28,vars:3,consts:[[1,"container"],[1,"header-content"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","tagName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","statusFlag"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"change","checked"],["mat-icon-button","","aria-label","Edit",3,"click"],["mat-icon-button","","aria-label","Delete","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,n){e&1&&(i(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"div",1)(5,"h2"),r(6,"Manage Tags"),o(),i(7,"button",2),p("click",function(){return n.openTagForm()}),i(8,"mat-icon"),r(9,"add"),o(),r(10," Add New Tag "),o()()()(),i(11,"mat-card-content")(12,"div",3)(13,"table",4),T(14,5),c(15,Bt,2,0,"th",6)(16,Nt,2,1,"td",7),C(),T(17,8),c(18,Rt,2,0,"th",6)(19,Ot,2,1,"td",7),C(),T(20,9),c(21,Vt,2,0,"th",6)(22,jt,2,1,"td",7),C(),T(23,10),c(24,Lt,2,0,"th",6)(25,At,7,0,"td",7),C(),c(26,Gt,1,0,"tr",11)(27,Ht,1,0,"tr",12),o()()()()()),e&2&&(m(13),g("dataSource",n.tags),m(13),g("matHeaderRowDef",n.displayedColumns),m(),g("matRowDefColumns",n.displayedColumns))},dependencies:[b,_t,lt,dt,ut,gt,st,ft,ct,pt,Tt,Ct,F,x,nt,mt,rt,D,w,P,I,Y,K,W,X,Q],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}th.mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#333}.mat-mdc-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:8px}"]})};var be=[{path:"",component:B}];export{be as TAGS_ROUTES};
