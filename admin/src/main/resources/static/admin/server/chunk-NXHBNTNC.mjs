import './polyfills.server.mjs';
import{a as I,b as k}from"./chunk-YD2FD7B5.mjs";import{a as N}from"./chunk-RK6JAOZB.mjs";import{a as wt,b as Et}from"./chunk-EVZYNPGW.mjs";import{a as mt,b as st}from"./chunk-NXD5BTRF.mjs";import{a as X,b as Y,c as Z,e as tt,g as et}from"./chunk-QQHXRZGA.mjs";import{a as bt,b as vt,c as xt,d as St,e as Ft,f as Pt,g as D}from"./chunk-GHMQA5DD.mjs";import{a as gt,b as dt,c as ct,d as pt,e as ut,f as ft,g as _t,h as Tt,i as Ct,j as ht,k as Mt}from"./chunk-F6HI3K2T.mjs";import{b as rt,c as lt,q as E,r as y}from"./chunk-TRHFPAUI.mjs";import"./chunk-Y3IL6YFO.mjs";import{a as at,b as it,h as ot,i as nt}from"./chunk-WPGK3LCN.mjs";import{Ba as K,Ca as Q,Da as W,ba as P,da as j,ea as w,ga as A,ia as R,ka as G,la as H,pa as $,sa as q,va as z,ya as U,za as J}from"./chunk-YEGN3WNK.mjs";import{Cc as S,Jb as r,Kc as F,Lb as _,Ma as m,Na as d,Rb as x,bb as c,da as b,gb as s,la as T,ma as C,ob as i,pb as o,qb as u,rb as h,sb as M,ub as v,xb as p,zb as f}from"./chunk-Y2VJ442J.mjs";import{a as L,b as V}from"./chunk-5XUXGTUW.mjs";function Vt(a,t){a&1&&(i(0,"mat-error"),r(1," Tag name is required "),o())}var O=class a{constructor(t,e,n,l,g){this.fb=t;this.tagService=e;this.snackBar=n;this.dialogRef=l;this.data=g;this.editMode=!!g?.tag,this.tagForm=this.createForm(),this.editMode&&g.tag&&this.populateForm(g.tag)}tagForm;editMode=!1;isLoading=!1;createForm(){return this.fb.group({tagName:["",[R.required,R.minLength(2)]],description:[""],statusFlag:[!0]})}populateForm(t){console.log("Populating form with tag data:",t),this.tagForm.patchValue({tagName:t.tagName,description:t.description||"",statusFlag:t.statusFlag!==void 0?t.statusFlag:!0}),console.log("Form values after population:",this.tagForm.value)}onSubmit(){if(this.tagForm.valid&&!this.isLoading){this.isLoading=!0;let t=this.tagForm.value;console.log("Form submission - form value:",t);let e={tagName:t.tagName,description:t.description,statusFlag:t.statusFlag};console.log("Form submission - tag data being sent:",e),this.editMode&&this.data.tag?(e.tagId=this.data.tag.tagId,this.updateTag(e)):this.createTag(e)}else console.log("Form is invalid or loading:",{valid:this.tagForm.valid,loading:this.isLoading,formErrors:this.tagForm.errors,formValue:this.tagForm.value})}createTag(t){console.log("Creating tag with data:",t),this.tagService.createTag(t).subscribe({next:e=>{console.log("Tag created successfully:",e),this.snackBar.open("Tag created successfully","Close",{duration:3e3}),this.dialogRef.close(e)},error:e=>{console.error("Error creating tag:",e),this.snackBar.open("Error creating tag","Close",{duration:3e3}),this.isLoading=!1}})}updateTag(t){console.log("Updating tag with data:",t),this.tagService.updateTag(t.tagId,t).subscribe({next:e=>{console.log("Tag updated successfully:",e),this.snackBar.open("Tag updated successfully","Close",{duration:3e3}),this.dialogRef.close(e)},error:e=>{console.error("Error updating tag:",e),this.snackBar.open("Error updating tag","Close",{duration:3e3}),this.isLoading=!1}})}static \u0275fac=function(e){return new(e||a)(d(J),d(N),d(E),d(bt),d(vt))};static \u0275cmp=b({type:a,selectors:[["app-tag-form"]],standalone:!0,features:[x],decls:21,vars:5,consts:[["mat-dialog-title",""],[3,"ngSubmit","formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","tagName","required",""],[4,"ngIf"],["matInput","","formControlName","description","rows","3"],[1,"status-toggle"],["formControlName","statusFlag"],[1,"button-container"],["mat-button","","type","button","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,n){if(e&1&&(i(0,"h2",0),r(1),o(),i(2,"mat-dialog-content")(3,"form",1),p("ngSubmit",function(){return n.onSubmit()}),i(4,"mat-form-field",2)(5,"mat-label"),r(6,"Tag Name"),o(),u(7,"input",3),c(8,Vt,2,0,"mat-error",4),o(),i(9,"mat-form-field",2)(10,"mat-label"),r(11,"Description"),o(),u(12,"textarea",5),o(),i(13,"div",6)(14,"mat-slide-toggle",7),r(15," Enable Tag "),o()(),i(16,"div",8)(17,"button",9),r(18,"Cancel"),o(),i(19,"button",10),r(20),o()()()()),e&2){let l;m(),_("",n.editMode?"Edit":"Create"," Tag"),m(2),s("formGroup",n.tagForm),m(5),s("ngIf",(l=n.tagForm.get("tagName"))==null?null:l.hasError("required")),m(11),s("disabled",n.tagForm.invalid||n.isLoading),m(),_(" ",n.isLoading?"Saving...":n.editMode?"Update":"Create"," ")}},dependencies:[F,S,K,$,A,G,H,U,q,z,nt,ot,at,it,lt,rt,w,P,D,St,Ft,Pt,y,k,I],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.status-toggle[_ngcontent-%COMP%]{margin:16px 0}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:16px}mat-dialog-content[_ngcontent-%COMP%]{min-width:400px;max-width:500px}"]})};function jt(a,t){a&1&&(i(0,"div",9),u(1,"mat-spinner",10),i(2,"p"),r(3,"Loading tags..."),o()())}function At(a,t){a&1&&(i(0,"th",20),r(1," Name "),o())}function Gt(a,t){if(a&1&&(i(0,"td",21),r(1),o()),a&2){let e=t.$implicit;m(),_(" ",e.tagName," ")}}function Ht(a,t){a&1&&(i(0,"th",20),r(1," Description "),o())}function $t(a,t){if(a&1&&(i(0,"td",21),r(1),o()),a&2){let e=t.$implicit;m(),_(" ",e.description||"-"," ")}}function qt(a,t){a&1&&(i(0,"th",20),r(1," Status "),o())}function zt(a,t){if(a&1){let e=v();i(0,"td",21)(1,"mat-slide-toggle",22),p("change",function(l){let g=T(e).$implicit,yt=f(2);return C(yt.toggleTagStatus(g,l))}),o()()}if(a&2){let e=t.$implicit;m(),s("checked",e.statusFlag!==!1)}}function Ut(a,t){a&1&&(i(0,"th",20),r(1," Actions "),o())}function Jt(a,t){if(a&1){let e=v();i(0,"td",21)(1,"button",23),p("click",function(){let l=T(e).$implicit,g=f(2);return C(g.editTag(l))}),i(2,"mat-icon"),r(3,"edit"),o()(),i(4,"button",24),p("click",function(){let l=T(e).$implicit,g=f(2);return C(g.deleteTag(l))}),i(5,"mat-icon"),r(6,"delete"),o()()()}}function Kt(a,t){a&1&&u(0,"tr",25)}function Qt(a,t){a&1&&u(0,"tr",26)}function Wt(a,t){if(a&1&&(i(0,"table",11),h(1,12),c(2,At,2,0,"th",13)(3,Gt,2,1,"td",14),M(),h(4,15),c(5,Ht,2,0,"th",13)(6,$t,2,1,"td",14),M(),h(7,16),c(8,qt,2,0,"th",13)(9,zt,2,1,"td",14),M(),h(10,17),c(11,Ut,2,0,"th",13)(12,Jt,7,0,"td",14),M(),c(13,Kt,1,0,"tr",18)(14,Qt,1,0,"tr",19),o()),a&2){let e=f();s("dataSource",e.tags),m(13),s("matHeaderRowDef",e.displayedColumns),m(),s("matRowDefColumns",e.displayedColumns)}}function Xt(a,t){if(a&1){let e=v();i(0,"div",27)(1,"mat-icon"),r(2,"local_offer"),o(),i(3,"p"),r(4,"No tags found."),o(),i(5,"button",4),p("click",function(){T(e);let l=f();return C(l.openTagForm())}),r(6," Create First Tag "),o()()}}var B=class a{constructor(t,e,n){this.tagService=t;this.snackBar=e;this.dialog=n}tags=[];displayedColumns=["tagName","description","statusFlag","actions"];isLoading=!1;ngOnInit(){this.loadTags()}loadTags(){this.isLoading=!0,this.tagService.getTags().subscribe({next:t=>{this.tags=t,this.isLoading=!1},error:t=>{console.error("Error loading tags:",t),this.snackBar.open("Error loading tags","Close",{duration:3e3}),this.isLoading=!1}})}openTagForm(t){this.dialog.open(O,{width:"500px",data:{tag:t}}).afterClosed().subscribe(n=>{n&&this.loadTags()})}editTag(t){this.openTagForm(t)}toggleTagStatus(t,e){let n=e.checked,l=V(L({},t),{statusFlag:n});this.tagService.updateTag(t.tagId,l).subscribe({next:()=>{this.snackBar.open(`Tag ${n?"enabled":"disabled"}`,"Close",{duration:2e3}),this.loadTags()},error:g=>{console.error("Error updating tag status:",g),this.snackBar.open("Error updating tag status","Close",{duration:3e3}),this.loadTags()}})}deleteTag(t){confirm(`Are you sure you want to delete the tag "${t.tagName}"?`)&&this.tagService.deleteTag(t.tagId).subscribe({next:()=>{this.snackBar.open("Tag deleted successfully","Close",{duration:3e3}),this.loadTags()},error:e=>{console.error("Error deleting tag:",e),this.snackBar.open("Error deleting tag","Close",{duration:3e3})}})}static \u0275fac=function(e){return new(e||a)(d(N),d(E),d(xt))};static \u0275cmp=b({type:a,selectors:[["app-tags-page"]],standalone:!0,features:[x],decls:20,vars:4,consts:[[1,"container"],[1,"header-content"],[1,"header-actions"],["mat-icon-button","","color","primary","matTooltip","Refresh tags",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["class","loading-container",4,"ngIf"],["mat-table","","class","mat-elevation-z2",3,"dataSource",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"loading-container"],["diameter","50"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","tagName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","statusFlag"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"change","checked"],["mat-icon-button","","aria-label","Edit",3,"click"],["mat-icon-button","","aria-label","Delete","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"div",1)(5,"h2"),r(6,"Manage Tags"),o(),i(7,"div",2)(8,"button",3),p("click",function(){return n.loadTags()}),i(9,"mat-icon"),r(10,"refresh"),o()(),i(11,"button",4),p("click",function(){return n.openTagForm()}),i(12,"mat-icon"),r(13,"add"),o(),r(14," Add New Tag "),o()()()()(),i(15,"mat-card-content")(16,"div",5),c(17,jt,4,0,"div",6)(18,Wt,15,3,"table",7)(19,Xt,7,0,"div",8),o()()()()),e&2&&(m(8),s("disabled",n.isLoading),m(9),s("ngIf",n.isLoading),m(),s("ngIf",!n.isLoading),m(),s("ngIf",!n.isLoading&&n.tags.length===0))},dependencies:[F,S,Mt,gt,ct,_t,pt,dt,Tt,ut,ft,Ct,ht,w,P,j,W,Q,y,D,k,I,et,X,Z,tt,Y,Et,wt,st,mt],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;margin-top:20px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;text-align:center;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px;opacity:.6}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:16px;font-size:16px}table[_ngcontent-%COMP%]{width:100%}th.mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#333}.mat-mdc-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:8px}.mat-mdc-table[_ngcontent-%COMP%]{width:100%;background:#fff}"]})};var Re=[{path:"",component:B}];export{Re as TAGS_ROUTES};
