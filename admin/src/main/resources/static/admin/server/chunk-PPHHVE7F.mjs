import './polyfills.server.mjs';
import{a as pe}from"./chunk-AKJ5KGH6.mjs";import{a as se,b as ce}from"./chunk-EVZYNPGW.mjs";import{a as de}from"./chunk-WMF3WR22.mjs";import{a as J,b as K}from"./chunk-NXD5BTRF.mjs";import{a as Wt,b as Gt,c as Qt,d as zt}from"./chunk-AYVQKEXB.mjs";import{a as Xt,b as Yt,c as Jt}from"./chunk-NU4HEN6K.mjs";import{a as $,b as At,c as H,e as Ut,g as W}from"./chunk-QQHXRZGA.mjs";import{a as Mt,d as St,e as vt}from"./chunk-23SLAFQR.mjs";import{a as Kt,b as Zt,c as te,d as ee,e as ne,f as ie,g as ae,h as re,i as oe,j as me,k as le}from"./chunk-F6HI3K2T.mjs";import{a as et,b as nt}from"./chunk-QJLSOKHB.mjs";import{b as X,c as Y,q as Z,r as tt}from"./chunk-TRHFPAUI.mjs";import"./chunk-Y3IL6YFO.mjs";import{a as G,b as jt,c as Vt,d as $t,e as Ht,h as Q,i as z}from"./chunk-WPGK3LCN.mjs";import{Aa as Nt,Ba as qt,Ca as j,Da as V,Ea as Rt,M as bt,X as N,ba as q,da as It,ea as R,ga as A,ia as x,ka as U,la as Et,oa as Dt,pa as Ft,qa as Ot,sa as wt,va as Tt,xa as kt,ya as Bt,za as Lt}from"./chunk-YEGN3WNK.mjs";import{$ as _t,Ac as gt,Cc as B,Fc as Ct,Gc as ht,Hc as xt,Ib as ot,Jb as a,Kb as f,Kc as L,Lb as F,Ma as o,Na as _,Nb as O,Ob as w,Pb as T,Rb as k,Rc as Pt,Sb as yt,Tb as v,Ub as mt,Vb as lt,W as ft,bb as p,da as E,gb as l,la as M,ma as S,ob as n,pb as e,qb as c,rb as C,sb as h,ub as D,xb as y,zb as g}from"./chunk-Y2VJ442J.mjs";import{a as I}from"./chunk-5XUXGTUW.mjs";var P=class i{constructor(t){this.http=t}apiUrl=`${Rt.apiUrl}/payments`;getPayments(){return this.http.get(this.apiUrl)}getPaymentById(t){return this.http.get(`${this.apiUrl}/${t}`)}createPayment(t){return this.http.post(this.apiUrl,t)}updatePayment(t,r){return this.http.put(`${this.apiUrl}/${t}`,r)}deletePayment(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(r){return new(r||i)(_t(Pt))};static \u0275prov=ft({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ee=i=>["edit",i];function De(i,t){i&1&&(n(0,"div",22),c(1,"mat-spinner"),n(2,"p"),a(3,"Loading payments..."),e()())}function Fe(i,t){i&1&&(n(0,"th",38),a(1,"Payment ID"),e())}function Oe(i,t){if(i&1&&(n(0,"td",39),a(1),e()),i&2){let r=t.$implicit;o(),f(r.paymentId)}}function we(i,t){i&1&&(n(0,"th",38),a(1,"User ID"),e())}function Te(i,t){if(i&1&&(n(0,"td",39),a(1),e()),i&2){let r=t.$implicit;o(),f(r.loginId)}}function ke(i,t){i&1&&(n(0,"th",38),a(1,"Course ID"),e())}function Be(i,t){if(i&1&&(n(0,"td",39),a(1),e()),i&2){let r=t.$implicit;o(),f(r.courseId)}}function Le(i,t){i&1&&(n(0,"th",38),a(1,"Amount"),e())}function Ne(i,t){if(i&1&&(n(0,"td",39)(1,"strong"),a(2),v(3,"number"),e()()),i&2){let r=t.$implicit;o(2),F("\u20B9",lt(3,1,r.amount,"1.2-2"),"")}}function qe(i,t){i&1&&(n(0,"th",38),a(1,"Payment Method"),e())}function Re(i,t){if(i&1&&(n(0,"td",39)(1,"mat-chip-set")(2,"mat-chip"),a(3),v(4,"titlecase"),e()()()),i&2){let r=t.$implicit;o(3),f(mt(4,1,r.paymentMethod))}}function Ae(i,t){i&1&&(n(0,"th",38),a(1,"Transaction ID"),e())}function Ue(i,t){if(i&1&&(n(0,"td",39)(1,"span",40),a(2),e()()),i&2){let r=t.$implicit;o(2),f(r.transactionId||"N/A")}}function je(i,t){i&1&&(n(0,"th",38),a(1,"Status"),e())}function Ve(i,t){if(i&1&&(n(0,"td",39)(1,"mat-chip-set")(2,"mat-chip",41),a(3),v(4,"titlecase"),e()()()),i&2){let r=t.$implicit,m=g(2);o(2),l("ngClass",m.getStatusClass(r.status)),o(),F(" ",mt(4,2,r.status)," ")}}function $e(i,t){i&1&&(n(0,"th",38),a(1,"Payment Date"),e())}function He(i,t){if(i&1&&(n(0,"td",39),a(1),v(2,"date"),e()),i&2){let r=t.$implicit;o(),F(" ",lt(2,1,r.paymentDate,"dd/MM/yyyy HH:mm")," ")}}function We(i,t){i&1&&(n(0,"th",38),a(1,"Actions"),e())}function Ge(i,t){if(i&1){let r=D();n(0,"td",39)(1,"button",42)(2,"mat-icon"),a(3,"edit"),e()(),n(4,"button",43),y("click",function(){let d=M(r).$implicit,s=g(2);return S(s.deletePayment(d))}),n(5,"mat-icon"),a(6,"delete"),e()()()}if(i&2){let r=t.$implicit;o(),l("routerLink",yt(1,Ee,r.paymentId))}}function Qe(i,t){i&1&&c(0,"tr",44)}function ze(i,t){i&1&&c(0,"tr",45)}function Xe(i,t){i&1&&(n(0,"button",4)(1,"mat-icon"),a(2,"add"),e(),a(3," Add First Payment "),e())}function Ye(i,t){if(i&1&&(n(0,"div",46)(1,"mat-icon"),a(2,"payment"),e(),n(3,"h3"),a(4,"No payments found"),e(),n(5,"p"),a(6),e(),p(7,Xe,4,0,"button",47),e()),i&2){let r=g(2);o(6),f(r.payments.length===0?"No payments have been created yet.":"No payments match your current filters."),o(),l("ngIf",r.payments.length===0)}}function Je(i,t){if(i&1&&(n(0,"mat-card")(1,"table",23),C(2,24),p(3,Fe,2,0,"th",25)(4,Oe,2,1,"td",26),h(),C(5,27),p(6,we,2,0,"th",25)(7,Te,2,1,"td",26),h(),C(8,28),p(9,ke,2,0,"th",25)(10,Be,2,1,"td",26),h(),C(11,29),p(12,Le,2,0,"th",25)(13,Ne,4,4,"td",26),h(),C(14,30),p(15,qe,2,0,"th",25)(16,Re,5,3,"td",26),h(),C(17,31),p(18,Ae,2,0,"th",25)(19,Ue,3,1,"td",26),h(),C(20,32),p(21,je,2,0,"th",25)(22,Ve,5,4,"td",26),h(),C(23,33),p(24,$e,2,0,"th",25)(25,He,3,4,"td",26),h(),C(26,34),p(27,We,2,0,"th",25)(28,Ge,7,3,"td",26),h(),p(29,Qe,1,0,"tr",35)(30,ze,1,0,"tr",36),e(),p(31,Ye,8,2,"div",37),e()),i&2){let r=g();o(),l("dataSource",r.filteredPayments),o(28),l("matHeaderRowDef",r.displayedColumns),o(),l("matRowDefColumns",r.displayedColumns),o(),l("ngIf",r.filteredPayments.length===0)}}var it=class i{constructor(t,r){this.paymentService=t;this.snackBar=r}payments=[];filteredPayments=[];loading=!1;searchQuery="";statusFilter="";paymentMethodFilter="";displayedColumns=["paymentId","loginId","courseId","amount","paymentMethod","transactionId","status","paymentDate","actions"];ngOnInit(){this.loadPayments()}loadPayments(){this.loading=!0,this.paymentService.getPayments().subscribe({next:t=>{this.payments=t,this.applyFilters(),this.loading=!1},error:t=>{console.error("Error loading payments:",t),this.snackBar.open("Error loading payments","Close",{duration:3e3}),this.loading=!1}})}applyFilters(){this.filteredPayments=this.payments.filter(t=>{let r=!this.searchQuery||t.transactionId&&t.transactionId.toLowerCase().includes(this.searchQuery.toLowerCase()),m=!this.statusFilter||t.status===this.statusFilter,d=!this.paymentMethodFilter||t.paymentMethod===this.paymentMethodFilter;return r&&m&&d})}clearFilters(){this.searchQuery="",this.statusFilter="",this.paymentMethodFilter="",this.applyFilters()}deletePayment(t){confirm(`Are you sure you want to delete payment ${t.paymentId}?`)&&this.paymentService.deletePayment(t.paymentId).subscribe({next:()=>{this.snackBar.open("Payment deleted successfully","Close",{duration:3e3}),this.loadPayments()},error:r=>{console.error("Error deleting payment:",r),this.snackBar.open("Error deleting payment","Close",{duration:3e3})}})}getStatusClass(t){return`status-${t.toLowerCase()}`}static \u0275fac=function(r){return new(r||i)(_(P),_(Z))};static \u0275cmp=E({type:i,selectors:[["app-payment-list"]],standalone:!0,features:[k],decls:55,vars:5,consts:[[1,"container"],[1,"header"],[1,"header-actions"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["mat-raised-button","","color","primary","routerLink","add"],[1,"filter-card"],[1,"filters"],["matInput","","placeholder","Enter transaction ID",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],["value","pending"],["value","completed"],["value","failed"],["value","refunded"],["value","credit_card"],["value","debit_card"],["value","paypal"],["value","upi"],["value","net_banking"],["mat-button","",3,"click"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","paymentId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","loginId"],["matColumnDef","courseId"],["matColumnDef","amount"],["matColumnDef","paymentMethod"],["matColumnDef","transactionId"],["matColumnDef","status"],["matColumnDef","paymentDate"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"transaction-id"],[3,"ngClass"],["mat-icon-button","","matTooltip","Edit Payment",3,"routerLink"],["mat-icon-button","","matTooltip","Delete Payment","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"],["mat-raised-button","","color","primary","routerLink","add",4,"ngIf"]],template:function(r,m){r&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Payment Management"),e(),n(4,"div",2)(5,"button",3),y("click",function(){return m.loadPayments()}),n(6,"mat-icon"),a(7,"refresh"),e()(),n(8,"button",4)(9,"mat-icon"),a(10,"add"),e(),a(11," Add Payment "),e()()(),n(12,"mat-card",5)(13,"mat-card-content")(14,"div",6)(15,"mat-form-field")(16,"mat-label"),a(17,"Search by Transaction ID"),e(),n(18,"input",7),T("ngModelChange",function(s){return w(m.searchQuery,s)||(m.searchQuery=s),s}),y("input",function(){return m.applyFilters()}),e()(),n(19,"mat-form-field")(20,"mat-label"),a(21,"Filter by Status"),e(),n(22,"mat-select",8),T("ngModelChange",function(s){return w(m.statusFilter,s)||(m.statusFilter=s),s}),y("selectionChange",function(){return m.applyFilters()}),n(23,"mat-option",9),a(24,"All Statuses"),e(),n(25,"mat-option",10),a(26,"Pending"),e(),n(27,"mat-option",11),a(28,"Completed"),e(),n(29,"mat-option",12),a(30,"Failed"),e(),n(31,"mat-option",13),a(32,"Refunded"),e()()(),n(33,"mat-form-field")(34,"mat-label"),a(35,"Filter by Payment Method"),e(),n(36,"mat-select",8),T("ngModelChange",function(s){return w(m.paymentMethodFilter,s)||(m.paymentMethodFilter=s),s}),y("selectionChange",function(){return m.applyFilters()}),n(37,"mat-option",9),a(38,"All Methods"),e(),n(39,"mat-option",14),a(40,"Credit Card"),e(),n(41,"mat-option",15),a(42,"Debit Card"),e(),n(43,"mat-option",16),a(44,"PayPal"),e(),n(45,"mat-option",17),a(46,"UPI"),e(),n(47,"mat-option",18),a(48,"Net Banking"),e()()(),n(49,"button",19),y("click",function(){return m.clearFilters()}),n(50,"mat-icon"),a(51,"clear"),e(),a(52," Clear Filters "),e()()()(),p(53,De,4,0,"div",20)(54,Je,32,4,"mat-card",21),e()),r&2&&(o(18),O("ngModel",m.searchQuery),o(4),O("ngModel",m.statusFilter),o(14),O("ngModel",m.paymentMethodFilter),o(17),l("ngIf",m.loading),o(),l("ngIf",!m.loading))},dependencies:[L,gt,B,xt,Ct,ht,vt,Nt,A,U,Dt,le,Kt,te,ae,ee,Zt,re,ne,ie,oe,me,W,$,H,R,q,It,V,j,z,Q,G,Y,X,nt,et,N,Jt,Xt,Yt,tt,K,J,ce,se],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.filter-card[_ngcontent-%COMP%]{margin-bottom:20px}.filters[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;flex-wrap:wrap}.filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:200px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:20px}.mat-elevation-z2[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}table[_ngcontent-%COMP%]{width:100%}.transaction-id[_ngcontent-%COMP%]{font-family:monospace;font-size:.9rem;background:#f5f5f5;padding:2px 6px;border-radius:4px}.status-pending[_ngcontent-%COMP%]{background-color:#fff3cd!important;color:#856404!important}.status-completed[_ngcontent-%COMP%]{background-color:#d4edda!important;color:#155724!important}.status-failed[_ngcontent-%COMP%]{background-color:#f8d7da!important;color:#721c24!important}.status-refunded[_ngcontent-%COMP%]{background-color:#d1ecf1!important;color:#0c5460!important}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;opacity:.5}.no-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width: 768px){.filters[_ngcontent-%COMP%]{flex-direction:column}.filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:unset}.header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.header-actions[_ngcontent-%COMP%]{justify-content:center}}"]})};function Ke(i,t){i&1&&(n(0,"div",7),c(1,"mat-spinner"),e())}function Ze(i,t){i&1&&(n(0,"mat-error"),a(1," User ID is required "),e())}function tn(i,t){i&1&&(n(0,"mat-error"),a(1," User ID must be greater than 0 "),e())}function en(i,t){i&1&&(n(0,"mat-error"),a(1," Course ID is required "),e())}function nn(i,t){i&1&&(n(0,"mat-error"),a(1," Course ID must be greater than 0 "),e())}function an(i,t){i&1&&(n(0,"mat-error"),a(1," Amount is required "),e())}function rn(i,t){i&1&&(n(0,"mat-error"),a(1," Amount must be greater than 0 "),e())}function on(i,t){i&1&&(n(0,"mat-error"),a(1," Payment method is required "),e())}function mn(i,t){i&1&&(n(0,"mat-error"),a(1," Status is required "),e())}function ln(i,t){i&1&&(n(0,"mat-error"),a(1," Payment date is required "),e())}function dn(i,t){i&1&&c(0,"mat-spinner",40)}function pn(i,t){if(i&1&&(n(0,"span"),a(1),e()),i&2){let r=g(2);o(),f(r.isEditMode?"Update Payment":"Create Payment")}}function sn(i,t){if(i&1&&(n(0,"span"),a(1),e()),i&2){let r=g(2);o(),f(r.isEditMode?"Updating...":"Creating...")}}function cn(i,t){if(i&1){let r=D();n(0,"form",8),y("ngSubmit",function(){M(r);let d=g();return S(d.onSubmit())}),n(1,"div",9)(2,"h3"),a(3,"Transaction Details"),e(),n(4,"div",10)(5,"mat-form-field",11)(6,"mat-label"),a(7,"User ID"),e(),c(8,"input",12),p(9,Ze,2,0,"mat-error",13)(10,tn,2,0,"mat-error",13),e(),n(11,"mat-form-field",11)(12,"mat-label"),a(13,"Course ID"),e(),c(14,"input",14),p(15,en,2,0,"mat-error",13)(16,nn,2,0,"mat-error",13),e()()(),n(17,"div",9)(18,"h3"),a(19,"Payment Information"),e(),n(20,"div",10)(21,"mat-form-field",11)(22,"mat-label"),a(23,"Amount"),e(),c(24,"input",15),n(25,"span",16),a(26,"\u20B9\xA0"),e(),p(27,an,2,0,"mat-error",13)(28,rn,2,0,"mat-error",13),e(),n(29,"mat-form-field",11)(30,"mat-label"),a(31,"Payment Method"),e(),n(32,"mat-select",17)(33,"mat-option",18),a(34,"Credit Card"),e(),n(35,"mat-option",19),a(36,"Debit Card"),e(),n(37,"mat-option",20),a(38,"PayPal"),e(),n(39,"mat-option",21),a(40,"UPI"),e(),n(41,"mat-option",22),a(42,"Net Banking"),e(),n(43,"mat-option",23),a(44,"Digital Wallet"),e()(),p(45,on,2,0,"mat-error",13),e()(),n(46,"div",10)(47,"mat-form-field",11)(48,"mat-label"),a(49,"Transaction ID"),e(),c(50,"input",24),n(51,"mat-hint"),a(52,"Leave empty to auto-generate"),e()(),n(53,"mat-form-field",11)(54,"mat-label"),a(55,"Status"),e(),n(56,"mat-select",25)(57,"mat-option",26),a(58,"Pending"),e(),n(59,"mat-option",27),a(60,"Completed"),e(),n(61,"mat-option",28),a(62,"Failed"),e(),n(63,"mat-option",29),a(64,"Refunded"),e()(),p(65,mn,2,0,"mat-error",13),e()(),n(66,"div",10)(67,"mat-form-field",11)(68,"mat-label"),a(69,"Payment Date"),e(),c(70,"input",30)(71,"mat-datepicker-toggle",31)(72,"mat-datepicker",null,0),p(74,ln,2,0,"mat-error",13),e(),n(75,"mat-form-field",11)(76,"mat-label"),a(77,"Expiry Date"),e(),c(78,"input",32)(79,"mat-datepicker-toggle",31)(80,"mat-datepicker",null,1),n(82,"mat-hint"),a(83,"Optional: When payment access expires"),e()()()(),n(84,"div",9)(85,"h3"),a(86,"Additional Information"),e(),n(87,"div",10)(88,"mat-form-field",11)(89,"mat-label"),a(90,"Created By (User ID)"),e(),c(91,"input",33),n(92,"mat-hint"),a(93,"ID of user who created this payment record"),e()(),n(94,"mat-form-field",11)(95,"mat-label"),a(96,"Modified By (User ID)"),e(),c(97,"input",34),n(98,"mat-hint"),a(99,"ID of user who last modified this payment record"),e()()(),n(100,"div",10)(101,"mat-form-field",11)(102,"mat-label"),a(103,"Comments"),e(),c(104,"textarea",35),n(105,"mat-hint"),a(106,"Optional comments or notes"),e()()()(),n(107,"div",36)(108,"button",37),y("click",function(){M(r);let d=g();return S(d.onCancel())}),a(109," Cancel "),e(),n(110,"button",38),p(111,dn,1,0,"mat-spinner",39)(112,pn,2,1,"span",13)(113,sn,2,1,"span",13),e()()()}if(i&2){let r,m,d,s,at,rt,dt,pt,st,ct=ot(73),ut=ot(81),u=g();l("formGroup",u.paymentForm),o(9),l("ngIf",(r=u.paymentForm.get("loginId"))==null?null:r.hasError("required")),o(),l("ngIf",(m=u.paymentForm.get("loginId"))==null?null:m.hasError("min")),o(5),l("ngIf",(d=u.paymentForm.get("courseId"))==null?null:d.hasError("required")),o(),l("ngIf",(s=u.paymentForm.get("courseId"))==null?null:s.hasError("min")),o(11),l("ngIf",(at=u.paymentForm.get("amount"))==null?null:at.hasError("required")),o(),l("ngIf",(rt=u.paymentForm.get("amount"))==null?null:rt.hasError("min")),o(17),l("ngIf",(dt=u.paymentForm.get("paymentMethod"))==null?null:dt.hasError("required")),o(20),l("ngIf",(pt=u.paymentForm.get("status"))==null?null:pt.hasError("required")),o(5),l("matDatepicker",ct),o(),l("for",ct),o(3),l("ngIf",(st=u.paymentForm.get("paymentDate"))==null?null:st.hasError("required")),o(4),l("matDatepicker",ut),o(),l("for",ut),o(31),l("disabled",u.paymentForm.invalid||u.submitting),o(),l("ngIf",u.submitting),o(),l("ngIf",!u.submitting),o(),l("ngIf",u.submitting)}}var b=class i{constructor(t,r,m,d,s,at,rt){this.fb=t;this.paymentService=r;this.userService=m;this.courseService=d;this.router=s;this.route=at;this.snackBar=rt;this.createForm()}paymentForm;isEditMode=!1;paymentId=null;loading=!1;submitting=!1;ngOnInit(){this.route.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.paymentId=+t.id,this.loadPayment())})}createForm(){this.paymentForm=this.fb.group({loginId:["",[x.required,x.min(1)]],courseId:["",[x.required,x.min(1)]],amount:["",[x.required,x.min(.01)]],paymentMethod:["",x.required],transactionId:[""],status:["pending",x.required],paymentDate:[new Date,x.required],expiryDate:[""],createdBy:[""],modifiedBy:[""],comments:[""]})}loadPayment(){this.paymentId&&(this.loading=!0,this.paymentService.getPaymentById(this.paymentId).subscribe({next:t=>{this.paymentForm.patchValue({loginId:t.loginId,courseId:t.courseId,amount:t.amount,paymentMethod:t.paymentMethod,transactionId:t.transactionId,status:t.status,paymentDate:t.paymentDate?new Date(t.paymentDate):new Date,expiryDate:t.expiryDate?new Date(t.expiryDate):null,createdBy:t.createdBy,modifiedBy:t.modifiedBy,comments:t.comments}),this.loading=!1},error:t=>{console.error("Error loading payment:",t),this.snackBar.open("Error loading payment details","Close",{duration:3e3}),this.loading=!1,this.goBack()}}))}onSubmit(){if(this.paymentForm.valid){this.submitting=!0;let t=I({},this.paymentForm.value);t.paymentDate instanceof Date&&(t.paymentDate=t.paymentDate.toISOString()),t.expiryDate instanceof Date&&(t.expiryDate=t.expiryDate.toISOString()),t.transactionId||(t.transactionId=this.generateTransactionId());let r=I(I({},t),this.isEditMode&&{paymentId:this.paymentId});(this.isEditMode?this.paymentService.updatePayment(this.paymentId,r):this.paymentService.createPayment(r)).subscribe({next:()=>{let d=this.isEditMode?"Payment updated successfully":"Payment created successfully";this.snackBar.open(d,"Close",{duration:3e3}),this.router.navigate(["/payments"])},error:d=>{console.error("Error saving payment:",d);let s=d.error?.message||"Error saving payment";this.snackBar.open(s,"Close",{duration:5e3}),this.submitting=!1}})}}onCancel(){this.goBack()}goBack(){this.router.navigate(["/payments"])}generateTransactionId(){let t=Date.now().toString(),r=Math.random().toString(36).substring(2,8);return`TXN${t}${r}`.toUpperCase()}static \u0275fac=function(r){return new(r||i)(_(Lt),_(P),_(de),_(pe),_(St),_(Mt),_(Z))};static \u0275cmp=E({type:i,selectors:[["app-payment-form"]],standalone:!0,features:[k],decls:15,vars:4,consts:[["picker",""],["expiryPicker",""],[1,"container"],[1,"header"],["mat-button","",3,"click"],["class","loading-container",4,"ngIf"],["class","payment-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"loading-container"],[1,"payment-form",3,"ngSubmit","formGroup"],[1,"section"],[1,"form-row"],["appearance","fill",1,"full-width"],["matInput","","type","number","formControlName","loginId","required",""],[4,"ngIf"],["matInput","","type","number","formControlName","courseId","required",""],["matInput","","type","number","formControlName","amount","required","","step","0.01","min","0"],["matPrefix",""],["formControlName","paymentMethod","required",""],["value","credit_card"],["value","debit_card"],["value","paypal"],["value","upi"],["value","net_banking"],["value","wallet"],["matInput","","formControlName","transactionId","placeholder","Auto-generated if empty"],["formControlName","status","required",""],["value","pending"],["value","completed"],["value","failed"],["value","refunded"],["matInput","","formControlName","paymentDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["matInput","","type","number","formControlName","createdBy","min","1"],["matInput","","type","number","formControlName","modifiedBy","min","1"],["matInput","","formControlName","comments","rows","3","placeholder","Additional notes about the payment"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],["diameter","20"]],template:function(r,m){r&1&&(n(0,"div",2)(1,"div",3)(2,"h1"),a(3),e(),n(4,"button",4),y("click",function(){return m.goBack()}),n(5,"mat-icon"),a(6,"arrow_back"),e(),a(7," Back to Payments "),e()(),n(8,"mat-card")(9,"mat-card-header")(10,"mat-card-title"),a(11),e()(),n(12,"mat-card-content"),p(13,Ke,2,0,"div",5)(14,cn,114,18,"form",6),e()()()),r&2&&(o(3),f(m.isEditMode?"Edit Payment":"Add New Payment"),o(8),f(m.isEditMode?"Edit Payment Details":"Payment Information"),o(2),l("ngIf",m.loading),o(),l("ngIf",!m.loading))},dependencies:[L,B,qt,Ft,A,Ot,U,Et,Bt,kt,wt,Tt,W,$,H,Ut,At,z,Q,G,Vt,jt,$t,Ht,Y,X,R,q,nt,et,N,zt,Wt,Gt,Qt,bt,V,j,tt,K,J],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.payment-form[_ngcontent-%COMP%]{padding:20px 0}.section[_ngcontent-%COMP%]{margin-bottom:30px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;border-bottom:2px solid #e0e0e0;padding-bottom:8px}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1}.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;margin-top:30px;padding-top:20px;border-top:1px solid #e0e0e0}mat-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}mat-card-header[_ngcontent-%COMP%]{background:#f5f5f5;margin:-24px -24px 0;padding:20px 24px;border-bottom:1px solid #e0e0e0}mat-card-title[_ngcontent-%COMP%]{color:#333;font-size:1.2rem}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.mat-form-field.ng-invalid.ng-touched[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%], .mat-form-field.ng-invalid.ng-touched[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:#f44336}"]})};var ii=[{path:"",component:it},{path:"add",component:b},{path:"edit/:id",component:b}];export{ii as PAYMENT_ROUTES};
