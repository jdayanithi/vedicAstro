import './polyfills.server.mjs';
import{a as Be}from"./chunk-234BL3PF.mjs";import{a as qe,b as Sn,c as In}from"./chunk-6RHB5M7F.mjs";import{a as Ne,b as De,c as Ve}from"./chunk-WCLX3LYD.mjs";import{b as bn}from"./chunk-YD2FD7B5.mjs";import{a as En}from"./chunk-RK6JAOZB.mjs";import{a as hn,b as _n}from"./chunk-WAAAJW7Y.mjs";import{a as xn}from"./chunk-AKJ5KGH6.mjs";import{a as yn,b as vn}from"./chunk-EVZYNPGW.mjs";import{b as Cn,c as Tn}from"./chunk-NGH6EOMK.mjs";import{a as Zt,b as Xt}from"./chunk-NXD5BTRF.mjs";import{a as nn,c as on}from"./chunk-NU4HEN6K.mjs";import{a as At,b as Lt}from"./chunk-GYKCHMCR.mjs";import{a as Ce,b as Te,c as Se,e as Ie,g as Ee}from"./chunk-QQHXRZGA.mjs";import{a as Mt,d as me}from"./chunk-23SLAFQR.mjs";import{a as an,b as rn,c as sn,d as ln,e as dn,f as cn,g as mn,h as pn,i as un,j as gn,k as fn}from"./chunk-F6HI3K2T.mjs";import{a as tn,b as Fe}from"./chunk-QJLSOKHB.mjs";import{b as Pe,c as Ae,e as Yt,g as Jt,h as en,q as Le,r as Oe}from"./chunk-TRHFPAUI.mjs";import{f as he}from"./chunk-Y3IL6YFO.mjs";import{a as Me,b as Gt,c as Qt,e as Wt,h as ke,i as we}from"./chunk-WPGK3LCN.mjs";import{Ba as ye,Ca as ve,D as wt,Da as be,Ea as zt,I as Pt,X as pe,ba as ue,da as ge,ea as fe,ga as _e,ia as S,j as kt,ka as xe,la as Ot,na as Ft,pa as Nt,qa as Dt,ra as Vt,sa as Bt,ta as qt,ua as Rt,va as Ht,wa as Kt,xa as jt,ya as $t,za as Ut}from"./chunk-YEGN3WNK.mjs";import{$ as lt,Ab as Qe,Ac as Tt,B as z,Bb as B,Bc as se,Cb as xt,Cc as le,D as rt,Db as yt,Ea as ze,Eb as We,Ec as de,Fb as Ze,Fc as St,G,Gc as It,Ib as W,Jb as r,Kb as O,Kc as ce,Lb as C,Ma as d,Na as _,P as N,Pa as pt,Q as D,Qb as re,Rb as q,Rc as Et,Ta as ut,Tb as R,Ub as j,Vb as vt,W as st,X as ie,Ya as gt,Z as H,_a as Q,a as ne,aa as E,bb as p,da as V,ea as oe,ed as Xe,f as $e,fa as K,fb as Ge,fd as Ye,gb as m,h as ot,hb as ft,ib as ae,id as Y,j as M,jb as ht,jc as Z,jd as J,ka as Ue,la as y,lb as _t,ld as Je,ma as v,na as dt,nc as X,ob as o,oc as bt,pb as i,qa as ct,qb as h,rb as w,sb as P,ua as L,ub as k,vc as Ct,w as at,x as U,xb as x,ya as mt,zb as f}from"./chunk-Y2VJ442J.mjs";import{a as $,b as te,h as A}from"./chunk-5XUXGTUW.mjs";function Xn(n,t){if(n&1&&(o(0,"mat-option",11),r(1),i()),n&2){let e=t.$implicit,a=f();m("value",e),d(),C(" ",a.displayTopicFn(e)," ")}}function Yn(n,t){n&1&&(o(0,"th",26),r(1,"ID"),i())}function Jn(n,t){if(n&1&&(o(0,"td",27),r(1),i()),n&2){let e=t.$implicit;d(),O(e.lessonId)}}function ei(n,t){n&1&&(o(0,"th",26),r(1,"Order"),i())}function ti(n,t){if(n&1&&(o(0,"td",27),r(1),i()),n&2){let e=t.$implicit;d(),O(e.orderNumber)}}function ni(n,t){n&1&&(o(0,"th",26),r(1,"Title"),i())}function ii(n,t){if(n&1&&(o(0,"td",27),r(1),i()),n&2){let e=t.$implicit;d(),O(e.title)}}function oi(n,t){n&1&&(o(0,"th",26),r(1,"Content Type"),i())}function ai(n,t){if(n&1&&(o(0,"td",27)(1,"span",28),r(2),R(3,"titlecase"),i()()),n&2){let e=t.$implicit;d(),ht("content-type-"+e.contentType),d(),C(" ",j(3,3,e.contentType)," ")}}function ri(n,t){n&1&&(o(0,"th",26),r(1,"Duration"),i())}function si(n,t){if(n&1&&(o(0,"td",27),r(1),i()),n&2){let e=t.$implicit;d(),C(" ",e.durationMinutes?e.durationMinutes+" min":"-"," ")}}function li(n,t){n&1&&(o(0,"th",26),r(1,"Free"),i())}function di(n,t){if(n&1&&(o(0,"td",27)(1,"mat-icon",29),r(2),i()()),n&2){let e=t.$implicit;d(),m("color",e.isFree?"primary":"warn"),d(),C(" ",e.isFree?"check_circle":"lock"," ")}}function ci(n,t){n&1&&(o(0,"th",26),r(1,"Created"),i())}function mi(n,t){if(n&1&&(o(0,"td",27),r(1),R(2,"date"),i()),n&2){let e=t.$implicit;d(),O(vt(2,1,e.createdAt,"short"))}}function pi(n,t){n&1&&(o(0,"th",26),r(1,"Actions"),i())}function ui(n,t){if(n&1){let e=k();o(0,"td",27)(1,"button",30),x("click",function(){let s=y(e).$implicit,l=f(2);return v(l.navigateToEditLesson(s.lessonId))}),o(2,"mat-icon"),r(3,"edit"),i()(),o(4,"button",31),x("click",function(){let s=y(e).$implicit,l=f(2);return v(l.deleteLesson(s.lessonId))}),o(5,"mat-icon"),r(6,"delete"),i()()()}}function gi(n,t){n&1&&h(0,"tr",32)}function fi(n,t){n&1&&h(0,"tr",33)}function hi(n,t){n&1&&(o(0,"div",34)(1,"p"),r(2,"No lessons found for this topic."),i()())}function _i(n,t){if(n&1&&(o(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),r(3),i()(),o(4,"mat-card-content")(5,"table",12),w(6,13),p(7,Yn,2,0,"th",14)(8,Jn,2,1,"td",15),P(),w(9,16),p(10,ei,2,0,"th",14)(11,ti,2,1,"td",15),P(),w(12,17),p(13,ni,2,0,"th",14)(14,ii,2,1,"td",15),P(),w(15,18),p(16,oi,2,0,"th",14)(17,ai,4,5,"td",15),P(),w(18,19),p(19,ri,2,0,"th",14)(20,si,2,1,"td",15),P(),w(21,20),p(22,li,2,0,"th",14)(23,di,3,2,"td",15),P(),w(24,21),p(25,ci,2,0,"th",14)(26,mi,3,4,"td",15),P(),w(27,22),p(28,pi,2,0,"th",14)(29,ui,7,0,"td",15),P(),p(30,gi,1,0,"tr",23)(31,fi,1,0,"tr",24),i(),p(32,hi,3,0,"div",25),i()()),n&2){let e=f();d(3),C("Lessons for: ",e.selectedTopic.title,""),d(2),m("dataSource",e.lessons),d(25),m("matHeaderRowDef",e.displayedColumns),d(),m("matRowDefColumns",e.displayedColumns),d(),m("ngIf",e.lessons.length===0)}}function xi(n,t){n&1&&(o(0,"mat-card",35)(1,"mat-card-content")(2,"div",34)(3,"mat-icon"),r(4,"play_lesson"),i(),o(5,"p"),r(6,"Please select a topic to view its lessons."),i()()()())}var Re=class n{constructor(t,e,a,s){this.lessonService=t;this.topicService=e;this.snackBar=a;this.router=s}lessons=[];selectedTopic=null;topicSearchControl=new Ft("");filteredTopics=M([]);displayedColumns=["lessonId","orderNumber","title","contentType","duration","isFree","createdAt","actions"];ngOnInit(){this.setupTopicAutocomplete(),this.restoreSelectedTopic()}restoreSelectedTopic(){let t=history.state;if(t&&t.selectedTopic){let e=t.selectedTopic;this.selectedTopic=e,this.topicSearchControl.setValue(e),this.loadLessons()}}setupTopicAutocomplete(){this.filteredTopics=this.topicSearchControl.valueChanges.pipe(N(""),z(300),G(),D(t=>this._filterTopics(t||"")))}_filterTopics(t){let e=typeof t=="string"?t:t?.title||"";return!e||e.trim()===""?this.topicService.getAllTopics():this.topicService.getAllTopics()}displayTopicFn=t=>{if(!t)return"";let e=t.title||"Untitled",a=t.topicId||"N/A";return`${e} (ID: ${a})`};onTopicSelected(t){let e=t.option.value;this.selectedTopic=e,this.loadLessons()}navigateToAddLesson(){this.selectedTopic&&this.router.navigate(["lessons/add"],{state:{selectedTopic:this.selectedTopic}})}navigateToEditLesson(t){this.router.navigate(["lessons/update",t],{state:{selectedTopic:this.selectedTopic}})}loadLessons(){this.selectedTopic&&this.lessonService.getLessonsByTopicId(this.selectedTopic.topicId).subscribe({next:t=>{this.lessons=t.map(e=>te($({},e),{createdAt:Mn(e.createdAt),updatedAt:Mn(e.updatedAt)}))},error:()=>{this.snackBar.open("Error loading lessons","Close",{duration:3e3})}})}deleteLesson(t){confirm("Are you sure you want to delete this lesson?")&&this.lessonService.deleteLesson(t).subscribe({next:()=>{this.loadLessons(),this.snackBar.open("Lesson deleted successfully","Close",{duration:3e3})},error:()=>{this.snackBar.open("Error deleting lesson","Close",{duration:3e3})}})}static \u0275fac=function(e){return new(e||n)(_(qe),_(Be),_(Le),_(me))};static \u0275cmp=V({type:n,selectors:[["app-lesson-list"]],standalone:!0,features:[q],decls:20,vars:9,consts:[["auto","matAutocomplete"],[1,"container"],[1,"header"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"filter-card"],[1,"full-width"],["type","text","matInput","","placeholder","Type to search topics...",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","placeholder-card",4,"ngIf"],[3,"value"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","lessonId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","orderNumber"],["matColumnDef","title"],["matColumnDef","contentType"],["matColumnDef","duration"],["matColumnDef","isFree"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"content-type-badge"],[3,"color"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"],[1,"placeholder-card"]],template:function(e,a){if(e&1){let s=k();o(0,"div",1)(1,"div",2)(2,"h1"),r(3,"Lessons"),i(),o(4,"button",3),x("click",function(){return y(s),v(a.navigateToAddLesson())}),o(5,"mat-icon"),r(6,"add"),i(),r(7," Add Lesson "),i()(),o(8,"mat-card",4)(9,"mat-card-content")(10,"mat-form-field",5)(11,"mat-label"),r(12,"Search Topic"),i(),h(13,"input",6),o(14,"mat-autocomplete",7,0),x("optionSelected",function(u){return y(s),v(a.onTopicSelected(u))}),p(16,Xn,2,2,"mat-option",8),R(17,"async"),i()()()(),p(18,_i,33,5,"mat-card",9)(19,xi,7,0,"mat-card",10),i()}if(e&2){let s=W(15);d(4),m("disabled",!a.selectedTopic),d(9),m("formControl",a.topicSearchControl)("matAutocomplete",s),d(),m("displayWith",a.displayTopicFn),d(2),m("ngForOf",j(17,7,a.filteredTopics)),d(2),m("ngIf",a.selectedTopic),d(),m("ngIf",!a.selectedTopic)}},dependencies:[ce,se,le,de,St,It,fn,an,sn,mn,ln,rn,pn,dn,cn,un,gn,fe,ue,ge,be,ve,Ee,Ce,Se,Ie,Te,we,ke,Me,Fe,pe,Ve,Ne,De,Ae,Pe,Oe,bn,ye,_e,xe,Vt],styles:[".container[_ngcontent-%COMP%]{padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.full-width[_ngcontent-%COMP%]{width:100%}.filter-card[_ngcontent-%COMP%]{margin-bottom:20px}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px}.placeholder-card[_ngcontent-%COMP%]{margin-top:20px}.content-type-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.content-type-video[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.content-type-article[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.content-type-quiz[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.content-type-exercise[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#388e3c}"]})};function Mn(n){if(!n)return null;if(n instanceof Date)return n;if(typeof n=="string"&&n.includes(",")){let e=n.split(",").map(Number);if(e.length>=3)return new Date(e[0],e[1]-1,e[2],e[3]||0,e[4]||0,e[5]||0)}let t=new Date(n);return isNaN(t.getTime())?null:t}var kn=new H("CdkAccordion");var vi=0,wn=(()=>{class n{get expanded(){return this._expanded}set expanded(e){if(this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();let a=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,a)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(e,a,s){this.accordion=e,this._changeDetectorRef=a,this._expansionDispatcher=s,this._openCloseAllSubscription=ne.EMPTY,this.closed=new L,this.opened=new L,this.destroyed=new L,this.expandedChange=new L,this.id=`cdk-accordion-child-${vi++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=s.listen((l,u)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===u&&this.id!==l&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}static{this.\u0275fac=function(a){return new(a||n)(_(kn,12),_(Z),_(he))}}static{this.\u0275dir=K({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",X],disabled:[2,"disabled","disabled",X]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[re([{provide:kn,useValue:void 0}]),Q]})}}return n})(),Pn=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var Ti=["body"],Si=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Ii=["mat-expansion-panel-header","*","mat-action-row"];function Ei(n,t){}var Mi=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ki=["mat-panel-title","mat-panel-description","*"];function wi(n,t){if(n&1&&(o(0,"span",1),dt(),o(1,"svg",2),h(2,"path",3),i()()),n&2){let e=f();m("@indicatorRotate",e._getExpandedState())}}var An=new H("MAT_ACCORDION"),Ln="225ms cubic-bezier(0.4,0.0,0.2,1)",Fn={indicatorRotate:Xe("indicatorRotate",[J("collapsed, void",Y({transform:"rotate(0deg)"})),J("expanded",Y({transform:"rotate(180deg)"})),Je("expanded <=> collapsed, void => collapsed",Ye(Ln))]),bodyExpansion:Xe("bodyExpansion",[J("collapsed, void",Y({height:"0px",visibility:"hidden"})),J("expanded",Y({height:"*",visibility:""})),Je("expanded <=> collapsed, void => collapsed",Ye(Ln))])},Nn=new H("MAT_EXPANSION_PANEL"),Pi=(()=>{class n{constructor(e,a){this._template=e,this._expansionPanel=a}static{this.\u0275fac=function(a){return new(a||n)(_(pt),_(Nn,8))}}static{this.\u0275dir=K({type:n,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}}return n})(),Ai=0,Dn=new H("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),et=(()=>{class n extends wn{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=e}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,a,s,l,u,g,b){super(e,a,s),this._viewContainerRef=l,this._animationMode=g,this._hideToggle=!1,this.afterExpand=new L,this.afterCollapse=new L,this._inputChanges=new $e,this._headerId=`mat-expansion-panel-header-${Ai++}`,this.accordion=e,this._document=u,this._animationsDisabled=g==="NoopAnimations",b&&(this.hideToggle=b.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(N(null),U(()=>this.expanded&&!this._portal),rt(1)).subscribe(()=>{this._portal=new Yt(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let e=this._document.activeElement,a=this._body.nativeElement;return e===a||a.contains(e)}return!1}_animationStarted(e){!On(e)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(e){On(e)||(e.toState==="expanded"?this.afterExpand.emit():e.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static{this.\u0275fac=function(a){return new(a||n)(_(An,12),_(Z),_(he),_(ut),_(Ct),_(ze,8),_(Dn,8))}}static{this.\u0275cmp=V({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(a,s,l){if(a&1&&xt(l,Pi,5),a&2){let u;We(u=Ze())&&(s._lazyContent=u.first)}},viewQuery:function(a,s){if(a&1&&yt(Ti,5),a&2){let l;We(l=Ze())&&(s._body=l.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(a,s){a&2&&ae("mat-expanded",s.expanded)("_mat-animation-noopable",s._animationsDisabled)("mat-expansion-panel-spacing",s._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",X],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[re([{provide:An,useValue:void 0},{provide:Nn,useExisting:n}]),Q,gt,Ue,q],ngContentSelectors:Ii,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(a,s){if(a&1){let l=k();Qe(Si),B(0),o(1,"div",1,0),x("@bodyExpansion.start",function(g){return y(l),v(s._animationStarted(g))})("@bodyExpansion.done",function(g){return y(l),v(s._animationDone(g))}),o(3,"div",2),B(4,1),p(5,Ei,0,0,"ng-template",3),i(),B(6,2),i()}a&2&&(d(),m("@bodyExpansion",s._getExpandedState())("id",s.id),Ge("aria-labelledby",s._headerId),d(4),m("cdkPortalOutlet",s._portal))},dependencies:[Jt],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color, var(--mat-app-surface));color:var(--mat-expansion-container-text-color, var(--mat-app-on-surface));border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font, var(--mat-app-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-app-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-app-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-app-body-large-tracking))}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-app-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[Fn.bodyExpansion]},changeDetection:0})}}return n})();function On(n){return n.fromState==="void"}var Vn=(()=>{class n{constructor(e,a,s,l,u,g,b){this.panel=e,this._element=a,this._focusMonitor=s,this._changeDetectorRef=l,this._animationMode=g,this._parentChangeSubscription=ne.EMPTY,this.tabIndex=0;let c=e.accordion?e.accordion._stateChanges.pipe(U(T=>!!(T.hideToggle||T.togglePosition))):ot;this.tabIndex=parseInt(b||"")||0,this._parentChangeSubscription=at(e.opened,e.closed,c,e._inputChanges.pipe(U(T=>!!(T.hideToggle||T.disabled||T.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(U(()=>e._containsFocus())).subscribe(()=>s.focusVia(a,"program")),u&&(this.expandedHeight=u.expandedHeight,this.collapsedHeight=u.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:kt(e)||(e.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e);return}}focus(e,a){e?this._focusMonitor.focusVia(this._element,e,a):this._element.nativeElement.focus(a)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static{this.\u0275fac=function(a){return new(a||n)(_(et,1),_(mt),_(wt),_(Z),_(Dn,8),_(ze,8),ct("tabindex"))}}static{this.\u0275cmp=V({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(a,s){a&1&&x("click",function(){return s._toggle()})("keydown",function(u){return s._keydown(u)}),a&2&&(Ge("id",s.panel._headerId)("tabindex",s.disabled?-1:s.tabIndex)("aria-controls",s._getPanelId())("aria-expanded",s._isExpanded())("aria-disabled",s.panel.disabled),ft("height",s._getHeaderHeight()),ae("mat-expanded",s._isExpanded())("mat-expansion-toggle-indicator-after",s._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",s._getTogglePosition()==="before")("_mat-animation-noopable",s._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:bt(e)]},standalone:!0,features:[Q,q],ngContentSelectors:ki,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(a,s){a&1&&(Qe(Mi),o(0,"span",0),B(1),B(2,1),B(3,2),i(),p(4,wi,3,1,"span",1)),a&2&&(ae("mat-content-hide-toggle",!s._showToggle()),d(4),_t(s._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font, var(--mat-app-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-app-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-app-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-app-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-app-title-medium-tracking))}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-app-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-app-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-app-on-surface-variant))}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[Fn.indicatorRotate]},changeDetection:0})}}return n})(),Bn=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275dir=K({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"],standalone:!0})}}return n})(),qn=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275dir=K({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"],standalone:!0})}}return n})();var Rn=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({imports:[Pt,Pn,en]})}}return n})();var Ke=class n{constructor(t){this.http=t}apiUrl=`${zt.apiUrl}/lesson-tags`;getTagsByLessonId(t){return this.http.get(`${this.apiUrl}/lesson/${t}`)}addLessonTag(t){return this.http.post(this.apiUrl,t)}updateLessonTag(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteLessonTag(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(lt(Et))};static \u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})};function Oi(n,t){n&1&&(o(0,"div",7),h(1,"mat-spinner"),o(2,"p"),r(3,"Loading lesson data..."),i()())}function Fi(n,t){if(n&1&&(o(0,"mat-option",49),r(1),i()),n&2){let e=t.$implicit,a=f(2);m("value",e),d(),C(" ",a.displayCourseFn(e)," ")}}function Ni(n,t){if(n&1&&(o(0,"mat-option",49),r(1),i()),n&2){let e=t.$implicit,a=f(2);m("value",e),d(),C(" ",a.displayTopicFn(e)," ")}}function Di(n,t){n&1&&(o(0,"mat-hint",50),r(1," Please select a course first to view available topics "),i())}function Vi(n,t){n&1&&(o(0,"mat-error"),r(1," Topic selection is required "),i())}function Bi(n,t){n&1&&(o(0,"mat-error"),r(1," Title is required "),i())}function qi(n,t){n&1&&(o(0,"mat-error"),r(1," Content type is required "),i())}function Ri(n,t){n&1&&(o(0,"mat-form-field",11)(1,"mat-label"),r(2,"Order Number"),i(),h(3,"input",51),o(4,"mat-hint"),r(5,"Position of this lesson within the topic"),i()())}function Hi(n,t){n&1&&(o(0,"mat-chip",106)(1,"mat-icon"),r(2,"star"),i(),r(3," Important "),i())}function Ki(n,t){n&1&&(o(0,"mat-error"),r(1," Title is required "),i())}function ji(n,t){n&1&&(o(0,"mat-error"),r(1," Content type is required "),i())}function $i(n,t){n&1&&(o(0,"div",107),r(1," Content is required "),i())}function Ui(n,t){n&1&&(o(0,"mat-form-field",11)(1,"mat-label"),r(2,"Visual Aid URL"),i(),h(3,"input",108),o(4,"mat-hint"),r(5,"URL to an image, diagram, or visual aid"),i()())}function zi(n,t){if(n&1&&(o(0,"mat-option",49),r(1),i()),n&2){let e=t.$implicit;m("value",e.tagId),d(),C(" ",e.tagName," ")}}function Gi(n,t){n&1&&(o(0,"mat-error"),r(1," Tag selection is required "),i())}function Qi(n,t){if(n&1){let e=k();o(0,"div",109)(1,"mat-form-field",110)(2,"mat-label"),r(3,"Tag"),i(),o(4,"mat-select",111),p(5,zi,2,2,"mat-option",14),i(),p(6,Gi,2,0,"mat-error",20),i(),o(7,"mat-form-field",112)(8,"mat-label"),r(9,"Relevance Score"),i(),h(10,"input",113),o(11,"mat-hint"),r(12,"1-10 scale"),i()(),o(13,"button",114),x("click",function(){let s=y(e).index,l=f().index,u=f(2);return v(u.removeKeynoteTag(l,s))}),o(14,"mat-icon"),r(15,"delete"),i()()()}if(n&2){let e,a=t.$implicit,s=t.index,l=f(3);m("formGroupName",s),d(5),m("ngForOf",l.allTags),d(),m("ngIf",(e=a.get("tagId"))==null?null:e.hasError("required"))}}function Wi(n,t){n&1&&(o(0,"div",115)(1,"mat-icon"),r(2,"local_offer_outlined"),i(),o(3,"span"),r(4,"No tags added to this keynote yet."),i()())}function Zi(n,t){if(n&1){let e=k();o(0,"mat-expansion-panel",52)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"div",53)(4,"mat-icon",54),r(5,"note_alt"),i(),o(6,"span",55),r(7),i(),p(8,Hi,4,0,"mat-chip",56),o(9,"mat-chip",57),r(10),i()()(),o(11,"mat-panel-description")(12,"span",58),r(13),i()()(),o(14,"div",59)(15,"mat-form-field",11)(16,"mat-label"),r(17,"Title"),i(),h(18,"input",60),p(19,Ki,2,0,"mat-error",20),i(),o(20,"mat-form-field",11)(21,"mat-label"),r(22,"Content Type"),i(),o(23,"mat-select",26)(24,"mat-option",61),r(25,"Text"),i(),o(26,"mat-option",62),r(27,"Bullet Points"),i(),o(28,"mat-option",63),r(29,"Quote"),i(),o(30,"mat-option",64),r(31,"Example"),i()(),p(32,ji,2,0,"mat-error",20),i(),o(33,"div",65)(34,"label",23),r(35,"Content"),i(),o(36,"div",66),h(37,"quill-editor",67),i(),o(38,"div",68),r(39),i(),p(40,$i,2,0,"div",69),i(),o(41,"div",70)(42,"mat-checkbox",71),r(43," Mark as Important "),i(),o(44,"mat-checkbox",72),r(45," Has Visual Aid "),i()(),p(46,Ui,6,0,"mat-form-field",33),o(47,"div",70)(48,"mat-form-field",73)(49,"mat-label"),r(50,"Related Planet"),i(),o(51,"mat-select",74)(52,"mat-option",75),r(53,"None"),i(),o(54,"mat-option",76),r(55,"Sun"),i(),o(56,"mat-option",77),r(57,"Moon"),i(),o(58,"mat-option",78),r(59,"Mars"),i(),o(60,"mat-option",79),r(61,"Mercury"),i(),o(62,"mat-option",80),r(63,"Jupiter"),i(),o(64,"mat-option",81),r(65,"Venus"),i(),o(66,"mat-option",82),r(67,"Saturn"),i(),o(68,"mat-option",83),r(69,"Rahu"),i(),o(70,"mat-option",84),r(71,"Ketu"),i()()(),o(72,"mat-form-field",73)(73,"mat-label"),r(74,"Related Zodiac"),i(),o(75,"mat-select",85)(76,"mat-option",75),r(77,"None"),i(),o(78,"mat-option",86),r(79,"Aries"),i(),o(80,"mat-option",87),r(81,"Taurus"),i(),o(82,"mat-option",88),r(83,"Gemini"),i(),o(84,"mat-option",89),r(85,"Cancer"),i(),o(86,"mat-option",90),r(87,"Leo"),i(),o(88,"mat-option",91),r(89,"Virgo"),i(),o(90,"mat-option",92),r(91,"Libra"),i(),o(92,"mat-option",93),r(93,"Scorpio"),i(),o(94,"mat-option",94),r(95,"Sagittarius"),i(),o(96,"mat-option",95),r(97,"Capricorn"),i(),o(98,"mat-option",96),r(99,"Aquarius"),i(),o(100,"mat-option",97),r(101,"Pisces"),i()()()(),o(102,"div",98)(103,"div",36)(104,"h4",99)(105,"mat-icon"),r(106,"local_offer"),i(),r(107," Keynote Tags "),i(),o(108,"button",100),x("click",function(){let s=y(e).index,l=f(2);return v(l.addKeynoteTag(s))}),o(109,"mat-icon"),r(110,"add"),i(),r(111," Add Tag "),i()(),o(112,"div",101),p(113,Qi,16,3,"div",102)(114,Wi,5,0,"div",103),i()(),o(115,"div",104)(116,"button",105),x("click",function(){let s=y(e).index,l=f(2);return v(l.removeKeynote(s))}),o(117,"mat-icon"),r(118,"delete"),i(),r(119," Remove "),i()()()()}if(n&2){let e,a,s,l,u,g,b,c,T,tt,nt,it,I=t.$implicit,je=t.index,F=f(2);m("formGroupName",je)("expanded",(e=I.get("isNew"))==null?null:e.value),d(7),C(" ",((a=I.get("title"))==null?null:a.value)||"New Keynote"," "),d(),m("ngIf",(s=I.get("isImportant"))==null?null:s.value),d(),m("ngClass","content-type-"+((l=I.get("contentType"))==null?null:l.value)),d(),C(" ",F.getContentTypeLabel((u=I.get("contentType"))==null?null:u.value)," "),d(3),C(" ",F.getKeynotePreview((g=I.get("content"))==null?null:g.value)," "),d(6),m("ngIf",(b=I.get("title"))==null?null:b.hasError("required")),d(13),m("ngIf",(c=I.get("contentType"))==null?null:c.hasError("required")),d(5),m("modules",F.quillModules)("placeholder",F.getContentPlaceholder((T=I.get("contentType"))==null?null:T.value)),d(2),O(F.getContentHint((tt=I.get("contentType"))==null?null:tt.value)),d(),m("ngIf",(nt=I.get("content"))==null?null:nt.hasError("required")),d(6),m("ngIf",(it=I.get("hasVisualAid"))==null?null:it.value),d(67),m("ngForOf",F.getKeynoteTags(je).controls),d(),m("ngIf",F.getKeynoteTags(je).length===0)}}function Xi(n,t){n&1&&(o(0,"div",116)(1,"mat-icon"),r(2,"note_add"),i(),o(3,"p"),r(4,'No keynotes added yet. Click "Add Keynote" to get started.'),i()())}function Yi(n,t){if(n&1&&(o(0,"mat-option",49),r(1),i()),n&2){let e=t.$implicit;m("value",e.tagId),d(),C(" ",e.tagName," ")}}function Ji(n,t){n&1&&(o(0,"mat-error"),r(1," Tag selection is required "),i())}function eo(n,t){if(n&1){let e=k();o(0,"div",117)(1,"mat-form-field",11)(2,"mat-label"),r(3,"Tag"),i(),o(4,"mat-select",111),p(5,Yi,2,2,"mat-option",14),i(),p(6,Ji,2,0,"mat-error",20),i(),o(7,"mat-form-field",11)(8,"mat-label"),r(9,"Relevance Score"),i(),h(10,"input",118),o(11,"mat-hint"),r(12,"Enter a score from 1-10 indicating relevance to the lesson"),i()(),o(13,"div",119)(14,"button",120),x("click",function(){let s=y(e).index,l=f(2);return v(l.saveTag(s))}),o(15,"mat-icon"),r(16,"save"),i()(),o(17,"button",121),x("click",function(){let s=y(e).index,l=f(2);return v(l.removeTag(s))}),o(18,"mat-icon"),r(19,"delete"),i(),r(20," Remove "),i()()()}if(n&2){let e,a=t.$implicit,s=t.index,l=f(2);m("formGroupName",s),d(5),m("ngForOf",l.allTags),d(),m("ngIf",(e=a.get("tagId"))==null?null:e.hasError("required"))}}function to(n,t){n&1&&(o(0,"div",122)(1,"mat-icon"),r(2,"label_off"),i(),o(3,"p"),r(4,'No tags added yet. Click "Add Tag" to get started.'),i()())}function no(n,t){n&1&&h(0,"mat-spinner",123)}function io(n,t){if(n&1&&(o(0,"span"),r(1),i()),n&2){let e=f(2);d(),C(" with ",e.keynotes.length," Keynote(s)")}}function oo(n,t){if(n&1){let e=k();o(0,"form",8),x("ngSubmit",function(){y(e);let s=f();return v(s.onSubmit())}),o(1,"div",9)(2,"h3",10)(3,"mat-icon"),r(4,"info"),i(),r(5," Lesson Information "),i(),o(6,"mat-form-field",11)(7,"mat-label"),r(8,"Search Course"),i(),h(9,"input",12),o(10,"mat-autocomplete",13,0),x("optionSelected",function(s){y(e);let l=f();return v(l.onCourseSelected(s))}),p(12,Fi,2,2,"mat-option",14),R(13,"async"),i(),o(14,"mat-icon",15),r(15,"school"),i(),o(16,"mat-hint"),r(17,"Select a course to filter topics"),i()(),o(18,"mat-form-field",11)(19,"mat-label"),r(20,"Course ID"),i(),h(21,"input",16),o(22,"mat-hint"),r(23,"Selected from course search above"),i()(),o(24,"mat-form-field",11)(25,"mat-label"),r(26,"Search Topic"),i(),h(27,"input",17),o(28,"mat-autocomplete",13,1),x("optionSelected",function(s){y(e);let l=f();return v(l.onTopicSelected(s))}),p(30,Ni,2,2,"mat-option",14),R(31,"async"),i(),o(32,"mat-icon",15),r(33,"search"),i(),p(34,Di,2,0,"mat-hint",18),i(),o(35,"mat-form-field",11)(36,"mat-label"),r(37,"Topic ID"),i(),h(38,"input",19),o(39,"mat-hint"),r(40,"Selected from topic search above"),i(),p(41,Vi,2,0,"mat-error",20),i(),o(42,"mat-form-field",11)(43,"mat-label"),r(44,"Title"),i(),h(45,"input",21),p(46,Bi,2,0,"mat-error",20),i(),o(47,"div",22)(48,"label",23),r(49,"Description"),i(),o(50,"div",24),h(51,"quill-editor",25),i()(),o(52,"mat-form-field",11)(53,"mat-label"),r(54,"Content Type"),i(),o(55,"mat-select",26)(56,"mat-option",27),r(57,"Video"),i(),o(58,"mat-option",28),r(59,"Article"),i(),o(60,"mat-option",29),r(61,"Quiz"),i(),o(62,"mat-option",30),r(63,"Exercise"),i()(),p(64,qi,2,0,"mat-error",20),i(),o(65,"mat-form-field",11)(66,"mat-label"),r(67,"Content URL"),i(),h(68,"input",31),o(69,"mat-hint"),r(70,"URL to the lesson content (video, article, etc.)"),i()(),o(71,"mat-form-field",11)(72,"mat-label"),r(73,"Duration (minutes)"),i(),h(74,"input",32),o(75,"mat-hint"),r(76,"Estimated time to complete this lesson"),i()(),p(77,Ri,6,0,"mat-form-field",33),o(78,"div",34)(79,"mat-checkbox",35)(80,"strong"),r(81,"Free lesson"),i(),r(82," (accessible without payment) "),i()()(),h(83,"mat-divider"),o(84,"div",9)(85,"div",36)(86,"h3",10)(87,"mat-icon"),r(88,"note_alt"),i(),r(89," Lesson Keynotes "),i(),o(90,"button",37),x("click",function(){y(e);let s=f();return v(s.addKeynote())}),o(91,"mat-icon"),r(92,"add"),i(),r(93," Add Keynote "),i()(),o(94,"div",38),p(95,Zi,120,16,"mat-expansion-panel",39)(96,Xi,5,0,"div",40),i()(),h(97,"mat-divider"),o(98,"div",9)(99,"div",36)(100,"h3",10)(101,"mat-icon"),r(102,"label"),i(),r(103," Lesson Tags "),i(),o(104,"button",41),x("click",function(){y(e);let s=f();return v(s.addTag())}),o(105,"mat-icon"),r(106,"add"),i(),r(107," Add Tag "),i()(),o(108,"div",42),p(109,eo,21,3,"div",43)(110,to,5,0,"div",44),i()(),h(111,"mat-divider"),o(112,"div",45)(113,"button",46),x("click",function(){y(e);let s=f();return v(s.goBack())}),r(114," Cancel "),i(),o(115,"button",47),p(116,no,1,0,"mat-spinner",48),r(117),p(118,io,2,1,"span",20),i()()()}if(n&2){let e,a,s,l,u,g=W(11),b=W(29),c=f();m("formGroup",c.lessonForm),d(9),m("matAutocomplete",g),d(),m("displayWith",c.displayCourseFn),d(2),m("ngForOf",j(13,22,c.filteredCourses)),d(15),m("matAutocomplete",b)("disabled",!((e=c.lessonForm.get("courseId"))!=null&&e.value)),d(),m("displayWith",c.displayTopicFn),d(2),m("ngForOf",j(31,24,c.filteredTopics)),d(4),m("ngIf",!((a=c.lessonForm.get("courseId"))!=null&&a.value)),d(7),m("ngIf",(s=c.lessonForm.get("topicId"))==null?null:s.hasError("required")),d(5),m("ngIf",(l=c.lessonForm.get("title"))==null?null:l.hasError("required")),d(5),m("modules",c.quillModules),d(13),m("ngIf",(u=c.lessonForm.get("contentType"))==null?null:u.hasError("required")),d(13),m("ngIf",c.isEditMode),d(18),m("ngForOf",c.keynotes.controls),d(),m("ngIf",c.keynotes.length===0),d(13),m("ngForOf",c.tags.controls),d(),m("ngIf",c.tags.length===0),d(5),m("disabled",c.lessonForm.invalid||c.submitting),d(),m("ngIf",c.submitting),d(),C(" ",c.submitting?c.isEditMode?"Updating...":"Creating...":c.isEditMode?"Update":"Create"," Lesson "),d(),m("ngIf",c.keynotes.length>0&&!c.submitting)}}var ee=class n{lessonForm;filteredTopics=M([]);filteredCourses=M([]);isEditMode=!1;lessonId=null;allTags=[];allCourses=[];loading=!1;submitting=!1;quillModules={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link"]]};fb=E(Ut);lessonService=E(qe);topicService=E(Be);courseService=E(xn);keynoteService=E(Sn);router=E(me);route=E(Mt);snackBar=E(Le);lessonTagService=E(Ke);keynoteTagService=E(In);tagService=E(En);constructor(){this.lessonForm=this.fb.group({title:["",S.required],description:[""],courseId:[""],courseSearch:[""],topicId:["",S.required],topicSearch:[""],contentType:["",S.required],contentUrl:[""],durationMinutes:[""],orderNumber:[1],isFree:[!1],tags:this.fb.array([]),keynotes:this.fb.array([])})}get tags(){return this.lessonForm.get("tags")}get keynotes(){return this.lessonForm.get("keynotes")}ngOnInit(){this.setupCourseAutocomplete(),this.setupTopicAutocomplete(),this.checkEditMode(),this.loadAllTags(),this.loadAllCourses(),this.handleNavigationState()}handleNavigationState(){let e=this.router.getCurrentNavigation()?.extras?.state||window.history.state;if(e&&e.selectedTopic&&!this.isEditMode){let a=e.selectedTopic;this.courseService.getCourseById(a.courseId).subscribe({next:s=>{this.lessonForm.patchValue({courseId:a.courseId,courseSearch:s,topicId:a.topicId,topicSearch:a})},error:()=>{console.error("Error loading course for selected topic")}})}}setupCourseAutocomplete(){this.filteredCourses=this.lessonForm.get("courseSearch").valueChanges.pipe(N(""),z(300),G(),D(t=>this._filterCourses(t)))}setupTopicAutocomplete(){this.filteredTopics=this.lessonForm.get("topicSearch").valueChanges.pipe(N(""),z(300),G(),D(t=>this._filterTopics(t)))}_filterCourses(t){if(typeof t!="string")return M([]);if(!t||t.trim()==="")return this.courseService.getAllCourses();let e=t.toLowerCase();return this.courseService.getAllCourses().pipe(D(a=>M(a.filter(s=>s.title.toLowerCase().includes(e)))))}_filterTopics(t){if(typeof t!="string")return M([]);let e=this.lessonForm.get("courseId")?.value;return e?this.topicService.getTopicsByCourseId(e).pipe(D(a=>{if(!t||t.trim()==="")return M(a);let s=t.toLowerCase();return M(a.filter(l=>l.title.toLowerCase().includes(s)))})):M([])}displayCourseFn=t=>t?`${t.title} (ID: ${t.courseId})`:"";displayTopicFn=t=>t?`${t.title} (ID: ${t.topicId})`:"";onCourseSelected(t){let e=t.option.value;this.lessonForm.patchValue({courseId:e.courseId,topicId:"",topicSearch:""}),this.lessonForm.get("topicSearch")?.updateValueAndValidity()}onTopicSelected(t){let e=t.option.value;this.lessonForm.patchValue({topicId:e.topicId})}loadAllCourses(){this.courseService.getAllCourses().subscribe({next:t=>{this.allCourses=t},error:t=>{console.error("Error loading courses:",t),this.snackBar.open("Error loading courses","Close",{duration:3e3})}})}addKeynote(){let t=this.fb.group({title:["",S.required],content:["",S.required],contentType:["text",S.required],isImportant:[!1],hasVisualAid:[!1],visualAidUrl:[""],relatedPlanet:[""],relatedZodiac:[""],keynoteTags:this.fb.array([]),isNew:[!0]});this.keynotes.push(t)}removeKeynote(t){this.keynotes.removeAt(t)}addTag(){let t=this.fb.group({lessonTagId:[null],tagId:[null,S.required],tagName:[""],relevanceScore:[1]});this.tags.push(t)}removeTag(t){return A(this,null,function*(){let a=this.tags.at(t).value;if(a.lessonTagId)try{yield this.lessonTagService.deleteLessonTag(a.lessonTagId).toPromise(),this.snackBar.open("Tag deleted successfully.","Close",{duration:2e3}),this.loadTags()}catch(s){let l="Failed to delete tag. Please try again.";s&&s.error&&s.error.message?l=s.error.message:s&&s.message&&(l=s.message),this.snackBar.open(l,"Close",{duration:5e3}),console.error("Error deleting tag:",s)}else this.tags.removeAt(t)})}getKeynoteTags(t){return this.keynotes.at(t).get("keynoteTags")}addKeynoteTag(t){let e=this.fb.group({keynoteTagId:[null],tagId:[null,S.required],relevanceScore:[5]});this.getKeynoteTags(t).push(e)}removeKeynoteTag(t,e){this.getKeynoteTags(t).removeAt(e)}getContentTypeLabel(t){switch(t){case"text":return"Text";case"bullet_points":return"Bullet Points";case"quote":return"Quote";case"example":return"Example";default:return t||"Text"}}getKeynotePreview(t){if(!t)return"No content";let e=t.replace(/<[^>]*>/g,"");return e.length>50?e.substring(0,50)+"...":e}getContentPlaceholder(t){switch(t){case"bullet_points":return`Enter bullet points, one per line:
\u2022 Point 1
\u2022 Point 2
\u2022 Point 3`;case"quote":return"Enter the quote text...";case"example":return"Provide a detailed example...";default:return"Enter the keynote content..."}}getContentHint(t){switch(t){case"bullet_points":return"Use bullet points (\u2022), dashes (-), or asterisks (*) to separate points";case"quote":return"Inspirational or educational quotes related to the lesson";case"example":return"Practical examples that illustrate the lesson concepts";default:return"General text content for the keynote"}}checkEditMode(){let t=this.route.snapshot.paramMap.get("id");if(t){let e=parseInt(t,10);!isNaN(e)&&e>0?(this.isEditMode=!0,this.lessonId=e,console.log("Edit mode enabled for lessonId:",this.lessonId),this.loadLesson()):(console.error("Invalid lesson ID in route:",t),this.snackBar.open("Invalid lesson ID provided","Close",{duration:3e3}),this.router.navigate(["/lessons"]))}}loadLesson(){this.lessonId&&(this.loading=!0,this.lessonService.getLessonById(this.lessonId).subscribe({next:t=>{this.lessonForm.patchValue({title:t.title,description:t.description,topicId:t.topicId,contentType:t.contentType,contentUrl:t.contentUrl,durationMinutes:t.durationMinutes,orderNumber:t.orderNumber,isFree:t.isFree}),this.topicService.getTopicById(t.topicId).subscribe({next:e=>{this.lessonForm.patchValue({topicSearch:e,courseId:e.courseId}),this.courseService.getCourseById(e.courseId).subscribe({next:a=>{this.lessonForm.patchValue({courseSearch:a})},error:()=>{console.error("Error loading course details")}})}}),this.loadKeynotes(),this.loadTags(),this.loading=!1},error:()=>{this.snackBar.open("Error loading lesson","Close",{duration:3e3}),this.loading=!1}}))}loadKeynotes(){this.lessonId&&this.keynoteService.getKeynotesByLessonId(this.lessonId).subscribe({next:t=>{for(;this.keynotes.length!==0;)this.keynotes.removeAt(0);t.forEach(e=>{let a=this.fb.group({keynoteId:[e.keynoteId],title:[e.title,S.required],content:[e.content,S.required],contentType:[e.contentType,S.required],isImportant:[e.isImportant||!1],hasVisualAid:[e.hasVisualAid||!1],visualAidUrl:[e.visualAidUrl||""],relatedPlanet:[e.relatedPlanet||""],relatedZodiac:[e.relatedZodiac||""],keynoteTags:this.fb.array([]),isNew:[!1]});this.keynotes.push(a),e.keynoteId&&this.loadKeynoteTags(e.keynoteId,this.keynotes.length-1)})},error:()=>{this.snackBar.open("Error loading keynotes","Close",{duration:3e3})}})}loadTags(){this.lessonId&&typeof this.lessonId=="number"&&this.lessonId>0?(console.log("Loading tags for lessonId:",this.lessonId),this.lessonTagService.getTagsByLessonId(this.lessonId).subscribe({next:t=>{for(console.log("Tags loaded successfully:",t);this.tags.length!==0;)this.tags.removeAt(0);t.forEach(e=>{let a=this.fb.group({lessonTagId:[e.lessonTagId],tagId:[e.tagId,S.required],tagName:[e.tagName||""],relevanceScore:[e.relevanceScore||1]});this.tags.push(a)}),console.log("Tags form array updated, length:",this.tags.length)},error:t=>{console.error("Error loading tags:",t);let e="Error loading tags";t.status&&(e+=` (${t.status})`),t.error&&t.error.message&&(e+=`: ${t.error.message}`),this.snackBar.open(e,"Close",{duration:5e3})}})):console.log("lessonId is not valid for loadTags:",this.lessonId,typeof this.lessonId)}loadAllTags(){this.tagService.getTags().subscribe({next:t=>{this.allTags=t},error:()=>{this.snackBar.open("Error loading tags","Close",{duration:3e3})}})}loadKeynoteTags(t,e){this.keynoteTagService.getTagsByKeynoteId(t).subscribe({next:a=>{let s=this.getKeynoteTags(e);for(;s.length!==0;)s.removeAt(0);a.forEach(l=>{let u=this.fb.group({keynoteTagId:[l.keynoteTagId],tagId:[l.tagId,S.required],relevanceScore:[l.relevanceScore||5]});s.push(u)})},error:()=>{this.snackBar.open("Error loading keynote tags","Close",{duration:3e3})}})}onSubmit(){if(this.lessonForm.valid){this.submitting=!0;let t=this.lessonForm.value,e=$({title:t.title,description:t.description,topicId:t.topicId,contentType:t.contentType,contentUrl:t.contentUrl,durationMinutes:t.durationMinutes,isFree:t.isFree},this.isEditMode&&{orderNumber:t.orderNumber});this.isEditMode&&this.lessonId?this.lessonService.updateLesson(this.lessonId,e).subscribe({next:()=>A(this,null,function*(){try{yield this.handleKeynotes(this.lessonId),yield this.handleTags(this.lessonId),this.snackBar.open(`Lesson updated successfully with ${this.keynotes.length} keynote(s) and ${this.tags.length} tag(s)!`,"Close",{duration:3e3}),this.submitting=!1,this.goBack()}catch(a){console.error("Error updating keynotes/tags:",a),this.snackBar.open("Lesson updated but some keynotes or tags failed to save","Close",{duration:5e3}),this.submitting=!1,this.goBack()}}),error:a=>{console.error("Error updating lesson:",a),this.snackBar.open("Error updating lesson. Please try again.","Close",{duration:5e3}),this.submitting=!1}}):this.lessonService.createLesson(e).subscribe({next:a=>A(this,null,function*(){try{yield this.handleKeynotes(a.lessonId),yield this.handleTags(a.lessonId),this.snackBar.open(`Lesson created successfully with ${this.keynotes.length} keynote(s) and ${this.tags.length} tag(s)!`,"Close",{duration:3e3}),this.submitting=!1,this.goBack()}catch(s){console.error("Error creating keynotes/tags:",s),this.snackBar.open("Lesson created but some keynotes or tags failed to save","Close",{duration:5e3}),this.submitting=!1,this.goBack()}}),error:a=>{console.error("Error creating lesson:",a),this.snackBar.open("Error creating lesson. Please try again.","Close",{duration:5e3}),this.submitting=!1}})}else this.snackBar.open("Please fill in all required fields correctly.","Close",{duration:3e3})}handleKeynotes(t){return A(this,null,function*(){let e=[],a=this.lessonForm.get("keynotes")?.value||[];for(let s=0;s<a.length;s++){let l=a[s],u={lessonId:t,title:l.title,content:l.content,contentType:l.contentType,isImportant:l.isImportant||!1,hasVisualAid:l.hasVisualAid||!1,visualAidUrl:l.visualAidUrl||null,relatedPlanet:l.relatedPlanet||null,relatedZodiac:l.relatedZodiac||null};try{let g;l.keynoteId?g=yield this.keynoteService.updateKeynote(l.keynoteId,u).toPromise():g=yield this.keynoteService.createKeynote(u).toPromise(),g&&g.keynoteId&&l.keynoteTags&&(yield this.handleKeynoteTags(g.keynoteId,l.keynoteTags))}catch(g){throw console.error("Error handling keynote:",g),g}}})}handleKeynoteTags(t,e){return A(this,null,function*(){if(this.isEditMode)try{let s=(yield this.keynoteTagService.getTagsByKeynoteId(t).toPromise())||[],l=e.map(c=>c.keynoteTagId).filter(c=>c),g=s.filter(c=>c.keynoteTagId&&!l.includes(c.keynoteTagId)).filter(c=>c.keynoteTagId).map(c=>this.keynoteTagService.deleteKeynoteTag(c.keynoteTagId).toPromise());g.length>0&&(yield Promise.all(g));let b=[];e.forEach(c=>{let T={keynoteId:t,tagId:c.tagId,relevanceScore:c.relevanceScore||5};c.keynoteTagId?b.push(this.keynoteTagService.updateKeynoteTag(c.keynoteTagId,T).toPromise()):b.push(this.keynoteTagService.createKeynoteTag(T).toPromise())}),b.length>0&&(yield Promise.all(b))}catch(a){throw console.error("Error handling keynote tags:",a),a}else{let a=[];e.forEach(s=>{let l={keynoteId:t,tagId:s.tagId,relevanceScore:s.relevanceScore||5};a.push(this.keynoteTagService.createKeynoteTag(l).toPromise())}),a.length>0&&(yield Promise.all(a))}})}handleTags(t){return A(this,null,function*(){let e=this.lessonForm.get("tags")?.value||[];if(this.isEditMode)try{let s=(yield this.lessonTagService.getTagsByLessonId(t).toPromise())||[],l=e.map(c=>c.lessonTagId).filter(c=>c),g=s.filter(c=>c.lessonTagId&&!l.includes(c.lessonTagId)).filter(c=>c.lessonTagId).map(c=>this.lessonTagService.deleteLessonTag(c.lessonTagId).toPromise());g.length>0&&(yield Promise.all(g));let b=[];e.forEach(c=>{let T={lessonId:t,tagId:c.tagId,relevanceScore:c.relevanceScore||1};c.lessonTagId?b.push(this.lessonTagService.updateLessonTag(c.lessonTagId,T).toPromise()):b.push(this.lessonTagService.addLessonTag(T).toPromise())}),b.length>0&&(yield Promise.all(b))}catch(a){throw console.error("Error handling tags:",a),a}else{let a=[];e.forEach(s=>{let l={lessonId:t,tagId:s.tagId,relevanceScore:s.relevanceScore||1};a.push(this.lessonTagService.addLessonTag(l).toPromise())}),a.length>0&&(yield Promise.all(a))}})}goBack(){let t=this.lessonForm.get("topicId")?.value,e=this.lessonForm.get("topicSearch")?.value;t&&e?this.router.navigate(["/lessons"],{state:{selectedTopic:e}}):this.router.navigate(["/lessons"])}saveTag(t){return A(this,null,function*(){let e=this.tags.at(t);if(!e.valid){this.snackBar.open("Please select a tag and enter a valid relevance score.","Close",{duration:3e3});return}if(!this.lessonId||typeof this.lessonId!="number"){this.snackBar.open("Lesson ID is missing. Cannot save tag.","Close",{duration:3e3});return}let a=e.value,s={lessonId:this.lessonId,tagId:Number(a.tagId),relevanceScore:Number(a.relevanceScore)};try{if(a.lessonTagId)yield this.lessonTagService.updateLessonTag(a.lessonTagId,te($({},s),{lessonTagId:a.lessonTagId})).toPromise(),this.snackBar.open("Tag updated successfully.","Close",{duration:2e3});else{let l=yield this.lessonTagService.addLessonTag(s).toPromise();l&&l.lessonTagId&&e.patchValue({lessonTagId:l.lessonTagId}),this.snackBar.open("Tag added successfully.","Close",{duration:2e3})}this.loadTags()}catch(l){let u="Failed to save tag. Please try again.";l&&l.error&&l.error.message?u=l.error.message:l&&l.message&&(u=l.message),this.snackBar.open(u,"Close",{duration:5e3}),console.error("Error saving tag:",l)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-add-lesson"]],standalone:!0,features:[q],decls:15,vars:3,consts:[["courseAuto","matAutocomplete"],["auto","matAutocomplete"],[1,"container"],[1,"header"],["mat-button","",3,"click"],["class","loading-container",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"loading-container"],[3,"ngSubmit","formGroup"],[1,"section"],[1,"section-title"],["appearance","outline",1,"full-width"],["type","text","matInput","","formControlName","courseSearch","placeholder","Type to search courses...",3,"matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],["matSuffix",""],["matInput","","formControlName","courseId","readonly",""],["type","text","matInput","","formControlName","topicSearch","placeholder","Type to search topics...",3,"matAutocomplete","disabled"],["class","course-warning",4,"ngIf"],["matInput","","formControlName","topicId","required","","readonly",""],[4,"ngIf"],["matInput","","formControlName","title","required","","placeholder","Enter lesson title..."],[1,"rich-text-field"],[1,"rich-text-label"],[1,"rich-text-container"],["formControlName","description","placeholder","Enter lesson description...","theme","snow",3,"modules"],["formControlName","contentType","required",""],["value","video"],["value","article"],["value","quiz"],["value","exercise"],["matInput","","formControlName","contentUrl","type","url","placeholder","https://example.com/content"],["matInput","","type","number","formControlName","durationMinutes","min","0","placeholder","0"],["appearance","outline","class","full-width",4,"ngIf"],[1,"checkbox-container"],["formControlName","isFree",1,"full-width"],[1,"section-header"],["mat-raised-button","","color","accent","type","button",1,"add-keynote-btn",3,"click"],["formArrayName","keynotes",1,"keynotes-container"],["class","keynote-panel",3,"formGroupName","expanded",4,"ngFor","ngForOf"],["class","no-keynotes",4,"ngIf"],["mat-raised-button","","color","accent","type","button",1,"add-tag-btn",3,"click"],["formArrayName","tags",1,"tags-container"],["class","tag-item",3,"formGroupName",4,"ngFor","ngForOf"],["class","no-tags",4,"ngIf"],[1,"button-container"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],[3,"value"],[1,"course-warning"],["matInput","","type","number","formControlName","orderNumber","min","1"],[1,"keynote-panel",3,"formGroupName","expanded"],[1,"keynote-title-container"],[1,"keynote-icon"],[1,"keynote-title"],["class","important-chip",4,"ngIf"],[1,"content-type-chip",3,"ngClass"],[1,"keynote-preview"],[1,"keynote-form"],["matInput","","formControlName","title","required",""],["value","text"],["value","bullet_points"],["value","quote"],["value","example"],[1,"rich-text-field","keynote-field"],[1,"rich-text-container","keynote-editor"],["formControlName","content","theme","snow",3,"modules","placeholder"],[1,"rich-text-hint"],["class","rich-text-error",4,"ngIf"],[1,"form-row"],["formControlName","isImportant",1,"checkbox-field"],["formControlName","hasVisualAid",1,"checkbox-field"],["appearance","outline",1,"half-width"],["formControlName","relatedPlanet"],["value",""],["value","Sun"],["value","Moon"],["value","Mars"],["value","Mercury"],["value","Jupiter"],["value","Venus"],["value","Saturn"],["value","Rahu"],["value","Ketu"],["formControlName","relatedZodiac"],["value","Aries"],["value","Taurus"],["value","Gemini"],["value","Cancer"],["value","Leo"],["value","Virgo"],["value","Libra"],["value","Scorpio"],["value","Sagittarius"],["value","Capricorn"],["value","Aquarius"],["value","Pisces"],[1,"keynote-tags-section"],[1,"section-subtitle"],["mat-button","","color","accent","type","button",1,"add-keynote-tag-btn",3,"click"],["formArrayName","keynoteTags",1,"keynote-tags-container"],["class","keynote-tag-item",3,"formGroupName",4,"ngFor","ngForOf"],["class","no-keynote-tags",4,"ngIf"],[1,"keynote-actions"],["mat-button","","color","warn","type","button","matTooltip","Remove this keynote",3,"click"],[1,"important-chip"],[1,"rich-text-error"],["matInput","","formControlName","visualAidUrl","type","url"],[1,"keynote-tag-item",3,"formGroupName"],["appearance","outline",1,"tag-select"],["formControlName","tagId","required",""],["appearance","outline",1,"relevance-score"],["matInput","","formControlName","relevanceScore","type","number","min","1","max","10"],["mat-icon-button","","color","warn","type","button","matTooltip","Remove this tag",1,"remove-tag-btn",3,"click"],[1,"no-keynote-tags"],[1,"no-keynotes"],[1,"tag-item",3,"formGroupName"],["matInput","","formControlName","relevanceScore","type","number","min","1"],[1,"tag-actions"],["mat-icon-button","","color","primary","type","button","matTooltip","Save this tag",1,"save-tag-btn",3,"click"],["mat-button","","color","warn","type","button","matTooltip","Remove this tag",3,"click"],[1,"no-tags"],["diameter","20"]],template:function(e,a){e&1&&(o(0,"div",2)(1,"div",3)(2,"h1"),r(3),i(),o(4,"button",4),x("click",function(){return a.goBack()}),o(5,"mat-icon"),r(6,"arrow_back"),i(),r(7," Back to Lessons "),i()(),o(8,"mat-card")(9,"mat-card-header")(10,"mat-card-title"),r(11,"Lesson Information"),i()(),o(12,"mat-card-content"),p(13,Oi,4,0,"div",5)(14,oo,119,26,"form",6),i()()()),e&2&&(d(3),O(a.isEditMode?"Edit Lesson"+(a.lessonId?" (ID: "+a.lessonId+")":""):"Add New Lesson"),d(10),m("ngIf",a.loading),d(),m("ngIf",!a.loading))},dependencies:[ce,Tt,se,le,de,ye,Nt,_e,Dt,xe,Ot,$t,jt,Kt,Bt,Ht,qt,Rt,we,ke,Me,Qt,Gt,Wt,Ae,Pe,fe,ue,ge,Ee,Ce,Se,Ie,Te,Ve,Ne,pe,De,Fe,tn,_n,hn,Oe,Rn,et,Vn,qn,Bn,be,ve,on,nn,Lt,At,vn,yn,Xt,Zt,Tn,Cn],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1000px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#1976d2;font-weight:500}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:60px 20px;color:#666}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.section[_ngcontent-%COMP%]{margin-bottom:30px}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:500;margin-bottom:20px;color:#333}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.add-keynote-btn[_ngcontent-%COMP%], .add-tag-btn[_ngcontent-%COMP%]{min-width:140px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.course-warning[_ngcontent-%COMP%]{color:#ff6b6b!important;font-weight:500}.rich-text-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.rich-text-label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:500;color:#0009;margin-bottom:8px;font-family:Roboto,Helvetica Neue,sans-serif}.rich-text-container[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);border-radius:4px;min-height:120px;background-color:#fff;transition:border-color .15s ease}.rich-text-container[_ngcontent-%COMP%]   .ql-editor[_ngcontent-%COMP%]{min-height:100px;font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;line-height:1.5}.rich-text-container[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12);font-family:Roboto,Helvetica Neue,sans-serif}.rich-text-container[_ngcontent-%COMP%]:focus-within{border-color:#1976d2;box-shadow:0 0 0 1px #1976d2}.rich-text-hint[_ngcontent-%COMP%]{font-size:12px;color:#0009;margin-top:4px;font-family:Roboto,Helvetica Neue,sans-serif}.rich-text-error[_ngcontent-%COMP%]{font-size:12px;color:#f44336;margin-top:4px;font-family:Roboto,Helvetica Neue,sans-serif}.keynote-field[_ngcontent-%COMP%]{margin-bottom:20px}.keynote-editor[_ngcontent-%COMP%]{min-height:100px}.keynote-editor[_ngcontent-%COMP%]   .ql-editor[_ngcontent-%COMP%]{min-height:80px}.half-width[_ngcontent-%COMP%]{width:48%;margin-bottom:15px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;margin-bottom:15px}.checkbox-field[_ngcontent-%COMP%]{margin-right:20px}.keynotes-container[_ngcontent-%COMP%], .tags-container[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:8px;padding:12px;background-color:#fafafa}.tag-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:16px;margin-bottom:12px;position:relative}.tag-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tag-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:12px;padding-top:12px;border-top:1px solid #f0f0f0}.keynote-tags-section[_ngcontent-%COMP%]{margin-top:20px;padding:16px;background-color:#f8f9fa;border-radius:8px;border:1px solid #e9ecef}.section-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;font-weight:500;margin:0;color:#495057}.keynote-tag-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background-color:#fff;border:1px solid #dee2e6;border-radius:6px;padding:12px;margin-bottom:8px}.tag-select[_ngcontent-%COMP%]{flex:2;margin-bottom:0}.relevance-score[_ngcontent-%COMP%]{flex:1;margin-bottom:0}.remove-tag-btn[_ngcontent-%COMP%]{flex-shrink:0;width:40px;height:40px}.add-keynote-tag-btn[_ngcontent-%COMP%]{font-size:12px;height:32px}.no-keynote-tags[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#6c757d;font-style:italic;padding:12px;justify-content:center}.keynote-panel[_ngcontent-%COMP%]{margin-bottom:12px;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden}.keynote-panel[_ngcontent-%COMP%]:last-child{margin-bottom:0}.keynote-title-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1}.keynote-icon[_ngcontent-%COMP%]{color:#666;font-size:20px}.keynote-title[_ngcontent-%COMP%]{font-weight:500;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.important-chip[_ngcontent-%COMP%]{background-color:#ff6b6b;color:#fff;font-size:11px;height:24px;min-height:24px}.content-type-chip[_ngcontent-%COMP%]{font-size:11px;height:24px;min-height:24px;color:#fff}.content-type-text[_ngcontent-%COMP%]{background-color:#4caf50}.content-type-bullet_points[_ngcontent-%COMP%]{background-color:#ff9800}.content-type-quote[_ngcontent-%COMP%]{background-color:#9c27b0}.content-type-example[_ngcontent-%COMP%]{background-color:#2196f3}.keynote-preview[_ngcontent-%COMP%]{color:#666;font-size:12px;max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.keynote-form[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:8px;margin:8px 0}.keynote-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;padding-top:16px;border-top:1px solid #f0f0f0}.no-keynotes[_ngcontent-%COMP%], .no-tags[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#666}.no-keynotes[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .no-tags[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;opacity:.5}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:30px;padding-top:20px;border-top:1px solid #e0e0e0}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}.button-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.checkbox-container[_ngcontent-%COMP%]{margin:20px 0;padding:16px;background-color:#f8f9fa;border-radius:8px;border:1px solid #e9ecef}mat-checkbox[_ngcontent-%COMP%]{margin-bottom:15px}mat-divider[_ngcontent-%COMP%]{margin:30px 0}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.form-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.half-width[_ngcontent-%COMP%]{width:100%}.keynote-title-container[_ngcontent-%COMP%]{flex-wrap:wrap}.keynote-title[_ngcontent-%COMP%]{max-width:150px}}"]})};var mr=[{path:"",component:Re},{path:"add",component:ee},{path:"update/:id",component:ee}];export{mr as LESSONS_ROUTES};
